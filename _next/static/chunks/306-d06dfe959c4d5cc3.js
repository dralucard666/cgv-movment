(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[306],{61385:function(e,t,r){"use strict";r.d(t,{o:function(){return l}});var n=r(87462),a=r(67294),o=r(25030),i=r.n(o);function s(e,{keys:t=["near","far","color","distance","decay","penumbra","angle","intensity","skeleton","visible","castShadow","receiveShadow","morphTargetDictionary","morphTargetInfluences","name","geometry","material","position","rotation","scale","up","userData"],deep:r,inject:n,castShadow:o,receiveShadow:s}){let l=i()(e,t);return r&&(l.geometry&&"materialsOnly"!==r&&(l.geometry=l.geometry.clone()),l.material&&"geometriesOnly"!==r&&(l.material=l.material.clone())),n&&(l="function"===typeof n?{...l,children:n(e)}:a.isValidElement(n)?{...l,children:n}:{...l,...n}),"Mesh"===e.type&&(o&&(l.castShadow=!0),s&&(l.receiveShadow=!0)),l}const l=a.forwardRef((({object:e,children:t,deep:r,castShadow:o,receiveShadow:i,inject:c,keys:u,...d},f)=>{const h={keys:u,deep:r,inject:c,castShadow:o,receiveShadow:i};if(Array.isArray(e))return a.createElement("group",(0,n.Z)({},d,{ref:f}),e.map((e=>a.createElement(l,(0,n.Z)({key:e.uuid,object:e},h)))),t);const{children:p,...A}=s(e,h),B=e.type[0].toLowerCase()+e.type.slice(1);return a.createElement(B,(0,n.Z)({},A,d,{ref:f}),(null==e?void 0:e.children).map((e=>{let t={},r=e.type[0].toLowerCase()+e.type.slice(1);return"group"===r||"object3D"===r?(r=l,t={object:e,...h}):t=s(e,h),a.createElement(r,(0,n.Z)({key:e.uuid},t))})),t,p)}))},27938:function(e,t,r){"use strict";r.d(t,{qA:function(){return B}});var n=r(87462),a=r(67294),o=r(88057),i=r(26173);class s extends i.DataTextureLoader{constructor(e){super(e),this.type=i.HalfFloatType}parse(e){const t=function(e,t){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(t||""));break;default:console.error("THREE.RGBELoader: Error: "+(t||""))}return-1},r=function(e,t,r){t=t||1024;let n=e.pos,a=-1,o=0,i="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));for(;0>(a=s.indexOf("\n"))&&o<t&&n<e.byteLength;)i+=s,o+=s.length,n+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));return-1<a&&(!1!==r&&(e.pos+=o+a+1),i+s.slice(0,a))},n=function(e,t,r,n){const a=e[t+3],o=Math.pow(2,a-128)/255;r[n+0]=e[t+0]*o,r[n+1]=e[t+1]*o,r[n+2]=e[t+2]*o,r[n+3]=1},a=function(e,t,r,n){const a=e[t+3],o=Math.pow(2,a-128)/255;r[n+0]=i.DataUtils.toHalfFloat(Math.min(e[t+0]*o,65504)),r[n+1]=i.DataUtils.toHalfFloat(Math.min(e[t+1]*o,65504)),r[n+2]=i.DataUtils.toHalfFloat(Math.min(e[t+2]*o,65504)),r[n+3]=i.DataUtils.toHalfFloat(1)},o=new Uint8Array(e);o.pos=0;const s=function(e){const n=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,a=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*FORMAT=(\S+)\s*$/,i=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,s={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let l,c;if(e.pos>=e.byteLength||!(l=r(e)))return t(1,"no header found");if(!(c=l.match(/^#\?(\S+)/)))return t(3,"bad initial token");for(s.valid|=1,s.programtype=c[1],s.string+=l+"\n";l=r(e),!1!==l;)if(s.string+=l+"\n","#"!==l.charAt(0)){if((c=l.match(n))&&(s.gamma=parseFloat(c[1])),(c=l.match(a))&&(s.exposure=parseFloat(c[1])),(c=l.match(o))&&(s.valid|=2,s.format=c[1]),(c=l.match(i))&&(s.valid|=4,s.height=parseInt(c[1],10),s.width=parseInt(c[2],10)),2&s.valid&&4&s.valid)break}else s.comments+=l+"\n";return 2&s.valid?4&s.valid?s:t(3,"missing image size specifier"):t(3,"missing format specifier")}(o);if(-1!==s){const e=s.width,r=s.height,l=function(e,r,n){const a=r;if(a<8||a>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(a!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");const o=new Uint8Array(4*r*n);if(!o.length)return t(4,"unable to allocate buffer space");let i=0,s=0;const l=4*a,c=new Uint8Array(4),u=new Uint8Array(l);let d=n;for(;d>0&&s<e.byteLength;){if(s+4>e.byteLength)return t(1);if(c[0]=e[s++],c[1]=e[s++],c[2]=e[s++],c[3]=e[s++],2!=c[0]||2!=c[1]||(c[2]<<8|c[3])!=a)return t(3,"bad rgbe scanline format");let r,n=0;for(;n<l&&s<e.byteLength;){r=e[s++];const a=r>128;if(a&&(r-=128),0===r||n+r>l)return t(3,"bad scanline data");if(a){const t=e[s++];for(let e=0;e<r;e++)u[n++]=t}else u.set(e.subarray(s,s+r),n),n+=r,s+=r}const f=a;for(let e=0;e<f;e++){let t=0;o[i]=u[e+t],t+=a,o[i+1]=u[e+t],t+=a,o[i+2]=u[e+t],t+=a,o[i+3]=u[e+t],i+=4}d--}return o}(o.subarray(o.pos),e,r);if(-1!==l){let t,o,c,u;switch(this.type){case i.FloatType:u=l.length/4;const e=new Float32Array(4*u);for(let t=0;t<u;t++)n(l,4*t,e,4*t);t=e,c=i.FloatType;break;case i.HalfFloatType:u=l.length/4;const r=new Uint16Array(4*u);for(let t=0;t<u;t++)a(l,4*t,r,4*t);t=r,c=i.HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:e,height:r,data:t,header:s.string,gamma:s.gamma,exposure:s.exposure,format:o,type:c}}}return null}setDataType(e){return this.type=e,this}load(e,t,r,n){return super.load(e,(function(e,r){switch(e.type){case i.FloatType:case i.HalfFloatType:e.encoding=i.LinearEncoding,e.minFilter=i.LinearFilter,e.magFilter=i.LinearFilter,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,r)}),r,n)}}const l={sunset:"venice/venice_sunset_1k.hdr",dawn:"kiara/kiara_1_dawn_1k.hdr",night:"dikhololo/dikhololo_night_1k.hdr",warehouse:"empty-wharehouse/empty_warehouse_01_1k.hdr",forest:"forrest-slope/forest_slope_1k.hdr",apartment:"lebombo/lebombo_1k.hdr",studio:"studio-small-3/studio_small_03_1k.hdr",city:"potsdamer-platz/potsdamer_platz_1k.hdr",park:"rooitou/rooitou_park_1k.hdr",lobby:"st-fagans/st_fagans_interior_1k.hdr"};var c=r(6493);const u=e=>{return(t=e).current&&t.current.isScene?e.current:e;var t};function d({scene:e,background:t=!1,map:r}){const n=(0,o.w)((e=>e.scene));return a.useLayoutEffect((()=>{if(r){const a=u(e||n),o=a.background,i=a.environment;return"only"!==t&&(a.environment=r),t&&(a.background=r),()=>{"only"!==t&&(a.environment=i),t&&(a.background=o)}}}),[n,e,r,t]),null}function f({files:e=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:t="",preset:r,extensions:n}){if(r){if(!(r in l))throw new Error("Preset must be one of: "+Object.keys(l).join(", "));e=l[r],t="https://market-assets.fra1.cdn.digitaloceanspaces.com/market-assets/hdris/"}const a=Array.isArray(e),c=a?i.CubeTextureLoader:s,u=(0,o.z)(c,a?[e]:e,(e=>{e.setPath(t),n&&n(e)})),d=a?u[0]:u;return d.mapping=a?i.CubeReflectionMapping:i.EquirectangularReflectionMapping,d}function h({background:e=!1,scene:t,...r}){const n=f(r),i=(0,o.w)((e=>e.scene));return a.useLayoutEffect((()=>{const r=u(t||i),a=r.background,o=r.environment;return"only"!==e&&(r.environment=n),e&&(r.background=n),()=>{"only"!==e&&(r.environment=o),e&&(r.background=a)}}),[n,e,t,i]),null}function p({children:e,near:t=1,far:r=1e3,resolution:n=256,frames:s=1,map:l,background:c=!1,scene:f,files:p,path:A,preset:B,extensions:m}){const g=(0,o.w)((e=>e.gl)),v=(0,o.w)((e=>e.scene)),C=a.useRef(null),[b]=a.useState((()=>new i.Scene)),y=a.useMemo((()=>{const e=new i.WebGLCubeRenderTarget(n);return e.texture.type=i.HalfFloatType,e}),[n]);a.useLayoutEffect((()=>{1===s&&C.current.update(g,b);const e=u(f||v),t=e.background,r=e.environment;return"only"!==c&&(e.environment=y.texture),c&&(e.background=y.texture),()=>{"only"!==c&&(e.environment=r),c&&(e.background=t)}}),[e,b,y.texture,f,v,c,s,g]);let F=1;return(0,o.x)((()=>{(s===1/0||F<s)&&(C.current.update(g,b),F++)})),a.createElement(a.Fragment,null,(0,o.g)(a.createElement(a.Fragment,null,e,a.createElement("cubeCamera",{ref:C,args:[t,r,y]}),p||B?a.createElement(h,{background:!0,files:p,preset:B,path:A,extensions:m}):l?a.createElement(d,{background:!0,map:l,extensions:m}):null),b))}function A(e){var t,r,o,s;const l=f(e),u=e.map||l,h=(p=u)&&p.isCubeTexture;var p;const A=a.useMemo((()=>{var e,t;const r=(null!==(e=h?null==(t=u.image[0])?void 0:t.width:u.image.width)&&void 0!==e?e:1024)/4,n=Math.floor(Math.log2(r)),a=Math.pow(2,n),o=3*Math.max(a,112);return[h?"#define ENVMAP_TYPE_CUBE":"","#define CUBEUV_TEXEL_WIDTH "+1/o,"#define CUBEUV_TEXEL_HEIGHT "+1/(4*a),`#define CUBEUV_MAX_MIP ${n}.0`,""]}),[]),B=a.useMemo((()=>A.join("\n")+"#define GLSLIFY 1\n#define ENVMAP_TYPE_CUBE_UV\nvarying vec3 vWorldPosition;uniform float radius;uniform float height;\n#ifdef ENVMAP_TYPE_CUBE\nuniform samplerCube cubemap;\n#else\nuniform sampler2D cubemap;\n#endif\nfloat diskIntersect(in vec3 ro,in vec3 rd,vec3 c,vec3 n,float r){vec3 o=ro-c;float t=-dot(n,o)/dot(rd,n);vec3 q=o+rd*t;return(dot(q,q)<r*r)? t : 1e6;}float sphereIntersect(in vec3 ro,in vec3 rd,in vec3 ce,float ra){vec3 oc=ro-ce;float b=dot(oc,rd);float c=dot(oc,oc)-ra*ra;float h=b*b-c;if(h<0.0)-1.0;h=sqrt(h);return-b+h;}vec3 project(){vec3 p=normalize(vWorldPosition);vec3 camPos=cameraPosition;camPos.y-=height;float intersection=sphereIntersect(camPos,p,vec3(0.),radius);if(intersection>0.){vec3 h=vec3(0.0,-height,0.0);float intersection2=diskIntersect(camPos,p,h,vec3(0.0,-1.0,0.0),radius);p=(camPos+min(intersection,intersection2)*p)/radius;}else{p=vec3(0.0,1.0,0.0);}return p;}\n#include <common>\n#include <cube_uv_reflection_fragment>\nvoid main(){vec3 projectedWorldPosition=project();\n#ifdef ENVMAP_TYPE_CUBE\nvec3 outcolor=textureCube(cubemap,projectedWorldPosition).rgb;\n#else\nvec3 direction=normalize(projectedWorldPosition);vec2 uv=equirectUv(direction);vec3 outcolor=texture2D(cubemap,uv).rgb;\n#endif\ngl_FragColor=vec4(outcolor,1.0);\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n}"),[A]),m=a.useMemo((()=>({cubemap:{value:null},height:{value:15},radius:{value:60}})),[]),g=a.useRef(null),v=null==(t=e.ground)?void 0:t.height,C=null==(r=e.ground)?void 0:r.radius,b=null!==(o=null==(s=e.ground)?void 0:s.scale)&&void 0!==o?o:1e3;return a.useEffect((()=>{v&&(g.current.uniforms.height.value=v)}),[v]),a.useEffect((()=>{C&&(g.current.uniforms.radius.value=C)}),[C]),a.useEffect((()=>{g.current.uniforms.cubemap.value=u}),[u]),a.createElement(a.Fragment,null,a.createElement(d,(0,n.Z)({},e,{map:u})),a.createElement(c.FC,{scale:b,args:[1,16]},a.createElement("shaderMaterial",{ref:g,side:i.BackSide,vertexShader:"#define GLSLIFY 1\nvarying vec3 vWorldPosition;void main(){vec4 worldPosition=modelMatrix*vec4(position,1.0);vWorldPosition=worldPosition.xyz;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0);}",fragmentShader:B,uniforms:m})))}function B(e){return e.ground?a.createElement(A,e):e.map?a.createElement(d,e):e.children?a.createElement(p,e):a.createElement(h,e)}},46625:function(e,t,r){"use strict";r.d(t,{x:function(){return oe}});var n=r(87462),a=r(67294),o=r(26173);r(83454);function i(){var e,t=0,r=[],n=0,a=0;var o=h((function(e){a||l(1,e)})),s=h((function(e){a||l(-1,e)}));function l(r,n){a++;var o=0;try{n===B&&p();var i=r>0&&f(n);i?i.call(n,h((function(e){o++,l(1,e)})),h((function(e){o++,l(-1,e)}))):(t=r,e=n,c())}catch(s){t||o||l(-1,s)}}function c(){n||(setTimeout(u,0),n=1)}function u(){var e=r;n=0,r=[],e.forEach(d)}function d(e){e()}function f(e){var t=e&&(A(e)||"object"===typeof e)&&e.then;return A(t)&&t}function h(e){var t=0;return function(){for(var r=[],n=arguments.length;n--;)r[n]=arguments[n];t++||e.apply(this,r)}}function p(){throw new TypeError("Chaining cycle detected")}var A=function(e){return"function"===typeof e},B={then:function(n,a){var o=i();return r.push((function(){var r=t>0?n:a;if(A(r))try{var i=r(e);i===o&&p();var s=f(i);s?s.call(i,o.resolve,o.reject):o.resolve(i)}catch(l){o.reject(l)}else o[t>0?"resolve":"reject"](e)})),t&&c(),o},resolve:o,reject:s};return B}function s(){var e,t,r=new Promise((function(r,n){e=r,t=n}));return{then:r.then.bind(r),resolve:e,reject:t}}i.all=s.all=function(e){var t=0,r=[],n=l();return 0===e.length?n.resolve([]):e.forEach((function(a,o){var i=l();i.resolve(a),i.then((function(a){t++,r[o]=a,t===e.length&&n.resolve(r)}),n.reject)})),n};var l="function"===typeof Promise?s:i;function c(){var e=Object.create(null);function t(n,a){var o=n.id,i=n.name,s=n.dependencies;void 0===s&&(s=[]);var l=n.init;void 0===l&&(l=function(){});var c=n.getTransferables;if(void 0===c&&(c=null),!e[o])try{s=s.map((function(r){return r&&r.isWorkerModule&&(t(r,(function(e){if(e instanceof Error)throw e})),r=e[r.id].value),r})),l=r("<"+i+">.init",l),c&&(c=r("<"+i+">.getTransferables",c));var u=null;"function"===typeof l?u=l.apply(void 0,s):console.error("worker module init function failed to rehydrate"),e[o]={id:o,value:u,getTransferables:c},a(u)}catch(d){d&&d.noLog||console.error(d),a(d)}}function r(e,t){var r=void 0;self.troikaDefine=function(e){return r=e};var n=URL.createObjectURL(new Blob(["/** "+e.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+t+"\n)"],{type:"application/javascript"}));try{importScripts(n)}catch(a){console.error(a)}return URL.revokeObjectURL(n),delete self.troikaDefine,r}self.addEventListener("message",(function(r){var n=r.data,a=n.messageId,o=n.action,i=n.data;try{"registerModule"===o&&t(i,(function(e){e instanceof Error?postMessage({messageId:a,success:!1,error:e.message}):postMessage({messageId:a,success:!0,result:{isCallable:"function"===typeof e}})})),"callModule"===o&&function(t,r){var n,a=t.id,o=t.args;e[a]&&"function"===typeof e[a].value||r(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var i=(n=e[a]).value.apply(n,o);i&&"function"===typeof i.then?i.then(s,(function(e){return r(e instanceof Error?e:new Error(""+e))})):s(i)}catch(l){r(l)}function s(t){try{var n=e[a].getTransferables&&e[a].getTransferables(t);n&&Array.isArray(n)&&n.length||(n=void 0),r(t,n)}catch(l){console.error(l),r(l)}}}(i,(function(e,t){e instanceof Error?postMessage({messageId:a,success:!1,error:e.message}):postMessage({messageId:a,success:!0,result:e},t||void 0)}))}catch(s){postMessage({messageId:a,success:!1,error:s.stack})}}))}var u=function(){var e=!1;if("undefined"!==typeof window&&"undefined"!==typeof window.document)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),e=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return u=function(){return e},e},d=0,f=0,h=!1,p=Object.create(null),A=Object.create(null),B=Object.create(null);function m(e){if((!e||"function"!==typeof e.init)&&!h)throw new Error("requires `options.init` function");var t=e.dependencies,r=e.init,n=e.getTransferables,a=e.workerId;if(!u())return function(e){var t=function(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];return t._getInitResult().then((function(t){if("function"===typeof t)return t.apply(void 0,e);throw new Error("Worker module function was called but `init` did not return a callable function")}))};return t._getInitResult=function(){var r=e.dependencies,n=e.init;r=Array.isArray(r)?r.map((function(e){return e&&e._getInitResult?e._getInitResult():e})):[];var a=l.all(r).then((function(e){return n.apply(null,e)}));return t._getInitResult=function(){return a},a},t}(e);null==a&&(a="#default");var o="workerModule"+ ++d,i=e.name||o,s=null;function c(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(!s){s=v(a,"registerModule",c.workerModuleData);var r=function(){s=null,A[a].delete(r)};(A[a]||(A[a]=new Set)).add(r)}return s.then((function(t){if(t.isCallable)return v(a,"callModule",{id:o,args:e});throw new Error("Worker module function was called but `init` did not return a callable function")}))}return t=t&&t.map((function(e){return"function"!==typeof e||e.workerModuleData||(h=!0,e=m({workerId:a,name:"<"+i+"> function dependency: "+e.name,init:"function(){return (\n"+g(e)+"\n)}"}),h=!1),e&&e.workerModuleData&&(e=e.workerModuleData),e})),c.workerModuleData={isWorkerModule:!0,id:o,name:i,dependencies:t,init:g(r),getTransferables:n&&g(n)},c}function g(e){var t=e.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function v(e,t,r){var n=l(),a=++f;return B[a]=function(e){e.success?n.resolve(e.result):n.reject(new Error("Error in worker "+t+" call: "+e.error))},function(e){var t=p[e];if(!t){var r=g(c);(t=p[e]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+e.replace(/\*/g,"")+" **/\n\n;("+r+")()"],{type:"application/javascript"})))).onmessage=function(e){var t=e.data,r=t.messageId,n=B[r];if(!n)throw new Error("WorkerModule response with empty or unknown messageId");delete B[r],n(t)}}return t}(e).postMessage({messageId:a,action:t,data:r}),n}var C=m({name:"Thenable",dependencies:[l],init:function(e){return e}});function b(){var e=function(e){function t(e,t,r,n,a,o,i,s){var l=1-i;s.x=l*l*e+2*l*i*r+i*i*a,s.y=l*l*t+2*l*i*n+i*i*o}function r(e,t,r,n,a,o,i,s,l,c){var u=1-l;c.x=u*u*u*e+3*u*u*l*r+3*u*l*l*a+l*l*l*i,c.y=u*u*u*t+3*u*u*l*n+3*u*l*l*o+l*l*l*s}function n(e,t){for(var r,n,a,o,i,s=/([MLQCZ])([^MLQCZ]*)/g;r=s.exec(e);){var l=r[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map((function(e){return parseFloat(e)}));switch(r[1]){case"M":o=n=l[0],i=a=l[1];break;case"L":l[0]===o&&l[1]===i||t("L",o,i,o=l[0],i=l[1]);break;case"Q":t("Q",o,i,o=l[2],i=l[3],l[0],l[1]);break;case"C":t("C",o,i,o=l[4],i=l[5],l[0],l[1],l[2],l[3]);break;case"Z":o===n&&i===a||t("L",o,i,n,a)}}}function a(e,a,o){void 0===o&&(o=16);var i={x:0,y:0};n(e,(function(e,n,s,l,c,u,d,f,h){switch(e){case"L":a(n,s,l,c);break;case"Q":for(var p=n,A=s,B=1;B<o;B++)t(n,s,u,d,l,c,B/(o-1),i),a(p,A,i.x,i.y),p=i.x,A=i.y;break;case"C":for(var m=n,g=s,v=1;v<o;v++)r(n,s,u,d,f,h,l,c,v/(o-1),i),a(m,g,i.x,i.y),m=i.x,g=i.y}}))}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",i=new WeakMap,s={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function l(e,t){var r=e.getContext?e.getContext("webgl",s):e,n=i.get(r);if(!n){var a="undefined"!==typeof WebGL2RenderingContext&&r instanceof WebGL2RenderingContext,o={},l={},c={},u=-1,d=[];function e(e){var t=o[e];if(!t&&!(t=o[e]=r.getExtension(e)))throw new Error(e+" not supported");return t}function t(e,t){var n=r.createShader(t);return r.shaderSource(n,e),r.compileShader(n),n}function s(n,o,i,s){if(!l[n]){var c={},u={},d=r.createProgram();r.attachShader(d,t(o,r.VERTEX_SHADER)),r.attachShader(d,t(i,r.FRAGMENT_SHADER)),r.linkProgram(d),l[n]={program:d,transaction:function(t){r.useProgram(d),t({setUniform:function(e,t){for(var n=[],a=arguments.length-2;a-- >0;)n[a]=arguments[a+2];var o=u[t]||(u[t]=r.getUniformLocation(d,t));r["uniform"+e].apply(r,[o].concat(n))},setAttribute:function(t,n,o,i,s){var l=c[t];l||(l=c[t]={buf:r.createBuffer(),loc:r.getAttribLocation(d,t),data:null}),r.bindBuffer(r.ARRAY_BUFFER,l.buf),r.vertexAttribPointer(l.loc,n,r.FLOAT,!1,0,0),r.enableVertexAttribArray(l.loc),a?r.vertexAttribDivisor(l.loc,i):e("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(l.loc,i),s!==l.data&&(r.bufferData(r.ARRAY_BUFFER,s,o),l.data=s)}})}}}l[n].transaction(s)}function f(e,t){u++;try{r.activeTexture(r.TEXTURE0+u);var n=c[e];n||(n=c[e]=r.createTexture(),r.bindTexture(r.TEXTURE_2D,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST)),r.bindTexture(r.TEXTURE_2D,n),t(n,u)}finally{u--}}function h(e,t,n){var a=r.createFramebuffer();d.push(a),r.bindFramebuffer(r.FRAMEBUFFER,a),r.activeTexture(r.TEXTURE0+t),r.bindTexture(r.TEXTURE_2D,e),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0);try{n(a)}finally{r.deleteFramebuffer(a),r.bindFramebuffer(r.FRAMEBUFFER,d[--d.length-1]||null)}}function p(){o={},l={},c={},u=-1,d.length=0}r.canvas.addEventListener("webglcontextlost",(function(e){p(),e.preventDefault()}),!1),i.set(r,n={gl:r,isWebGL2:a,getExtension:e,withProgram:s,withTexture:f,withTextureFramebuffer:h,handleContextLoss:p})}t(n)}function c(e,t,r,n,a,i,s,c){void 0===s&&(s=15),void 0===c&&(c=null),l(e,(function(e){var l=e.gl,u=e.withProgram;(0,e.withTexture)("copy",(function(e,d){l.texImage2D(l.TEXTURE_2D,0,l.RGBA,a,i,0,l.RGBA,l.UNSIGNED_BYTE,t),u("copy",o,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",(function(e){var t=e.setUniform;(0,e.setAttribute)("aUV",2,l.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),t("1i","image",d),l.bindFramebuffer(l.FRAMEBUFFER,c||null),l.disable(l.BLEND),l.colorMask(8&s,4&s,2&s,1&s),l.viewport(r,n,a,i),l.scissor(r,n,a,i),l.drawArrays(l.TRIANGLES,0,3)}))}))}))}var u=Object.freeze({__proto__:null,withWebGLContext:l,renderImageData:c,resizeWebGLCanvasWithoutClearing:function(e,t,r){var n=e.width,a=e.height;l(e,(function(o){var i=o.gl,s=new Uint8Array(n*a*4);i.readPixels(0,0,n,a,i.RGBA,i.UNSIGNED_BYTE,s),e.width=t,e.height=r,c(i,s,0,0,n,a)}))}});function d(e,t,r,n,o,i){void 0===i&&(i=1);var s=new Uint8Array(e*t),l=n[2]-n[0],c=n[3]-n[1],u=[];a(r,(function(e,t,r,n){u.push({x1:e,y1:t,x2:r,y2:n,minX:Math.min(e,r),minY:Math.min(t,n),maxX:Math.max(e,r),maxY:Math.max(t,n)})})),u.sort((function(e,t){return e.maxX-t.maxX}));for(var d=0;d<e;d++)for(var f=0;f<t;f++){var h=B(n[0]+l*(d+.5)/e,n[1]+c*(f+.5)/t),A=Math.pow(1-Math.abs(h)/o,i)/2;h<0&&(A=1-A),A=Math.max(0,Math.min(255,Math.round(255*A))),s[f*e+d]=A}return s;function B(e,t){for(var r=1/0,n=1/0,a=u.length;a--;){var o=u[a];if(o.maxX+n<=e)break;if(e+n>o.minX&&t-n<o.maxY&&t+n>o.minY){var i=p(e,t,o.x1,o.y1,o.x2,o.y2);i<r&&(r=i,n=Math.sqrt(r))}}return function(e,t){for(var r=0,n=u.length;n--;){var a=u[n];if(a.maxX<=e)break;a.y1>t!==a.y2>t&&e<(a.x2-a.x1)*(t-a.y1)/(a.y2-a.y1)+a.x1&&(r+=a.y1<a.y2?1:-1)}return 0!==r}(e,t)&&(n=-n),n}}function f(e,t,r,n,a,o,i,s,l,c){void 0===o&&(o=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0),h(e,t,r,n,a,o,i,null,s,l,c)}function h(e,t,r,n,a,o,i,s,l,u,f){void 0===o&&(o=1),void 0===l&&(l=0),void 0===u&&(u=0),void 0===f&&(f=0);for(var h=d(e,t,r,n,a,o),p=new Uint8Array(4*h.length),A=0;A<h.length;A++)p[4*A+f]=h[A];c(i,p,l,u,e,t,1<<3-f,s)}function p(e,t,r,n,a,o){var i=a-r,s=o-n,l=i*i+s*s,c=l?Math.max(0,Math.min(1,((e-r)*i+(t-n)*s)/l)):0,u=e-(r+c*i),d=t-(n+c*s);return u*u+d*d}var A=Object.freeze({__proto__:null,generate:d,generateIntoCanvas:f,generateIntoFramebuffer:h}),B=new Float32Array([0,0,2,0,0,2]),m=null,g=!1,v={},C=new WeakMap;function b(e){if(!g&&!E(e))throw new Error("WebGL generation not supported")}function y(e,t,r,n,a,o,i){if(void 0===o&&(o=1),void 0===i&&(i=null),!i&&!(i=m)){var s="function"===typeof OffscreenCanvas?new OffscreenCanvas(1,1):"undefined"!==typeof document?document.createElement("canvas"):null;if(!s)throw new Error("OffscreenCanvas or DOM canvas not supported");i=m=s.getContext("webgl",{depth:!1})}b(i);var c=new Uint8Array(e*t*4);l(i,(function(i){var s=i.gl,l=i.withTexture,u=i.withTextureFramebuffer;l("readable",(function(i,l){s.texImage2D(s.TEXTURE_2D,0,s.RGBA,e,t,0,s.RGBA,s.UNSIGNED_BYTE,null),u(i,l,(function(i){M(e,t,r,n,a,o,s,i,0,0,0),s.readPixels(0,0,e,t,s.RGBA,s.UNSIGNED_BYTE,c)}))}))}));for(var u=new Uint8Array(e*t),d=0,f=0;d<c.length;d+=4)u[f++]=c[d];return u}function F(e,t,r,n,a,o,i,s,l,c){void 0===o&&(o=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0),M(e,t,r,n,a,o,i,null,s,l,c)}function M(e,t,r,n,i,s,c,u,d,f,h){void 0===s&&(s=1),void 0===d&&(d=0),void 0===f&&(f=0),void 0===h&&(h=0),b(c);var p=[];a(r,(function(e,t,r,n){p.push(e,t,r,n)})),p=new Float32Array(p),l(c,(function(r){var a=r.gl,l=r.isWebGL2,c=r.getExtension,A=r.withProgram,m=r.withTexture,g=r.withTextureFramebuffer,v=r.handleContextLoss;if(m("rawDistances",(function(r,m){e===r._lastWidth&&t===r._lastHeight||a.texImage2D(a.TEXTURE_2D,0,a.RGBA,r._lastWidth=e,r._lastHeight=t,0,a.RGBA,a.UNSIGNED_BYTE,null),A("main","precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}","precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",(function(o){var u=o.setAttribute,d=o.setUniform,f=!l&&c("ANGLE_instanced_arrays"),h=!l&&c("EXT_blend_minmax");u("aUV",2,a.STATIC_DRAW,0,B),u("aLineSegment",4,a.DYNAMIC_DRAW,1,p),d.apply(void 0,["4f","uGlyphBounds"].concat(n)),d("1f","uMaxDistance",i),d("1f","uExponent",s),g(r,m,(function(r){a.enable(a.BLEND),a.colorMask(!0,!0,!0,!0),a.viewport(0,0,e,t),a.scissor(0,0,e,t),a.blendFunc(a.ONE,a.ONE),a.blendEquationSeparate(a.FUNC_ADD,l?a.MAX:h.MAX_EXT),a.clear(a.COLOR_BUFFER_BIT),l?a.drawArraysInstanced(a.TRIANGLES,0,3,p.length/4):f.drawArraysInstancedANGLE(a.TRIANGLES,0,3,p.length/4)}))})),A("post",o,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",(function(r){r.setAttribute("aUV",2,a.STATIC_DRAW,0,B),r.setUniform("1i","tex",m),a.bindFramebuffer(a.FRAMEBUFFER,u),a.disable(a.BLEND),a.colorMask(0===h,1===h,2===h,3===h),a.viewport(d,f,e,t),a.scissor(d,f,e,t),a.drawArrays(a.TRIANGLES,0,3)}))})),a.isContextLost())throw v(),new Error("webgl context lost")}))}function E(e){var t=e&&e!==m?e.canvas||e:v,r=C.get(t);if(void 0===r){g=!0;var n=null;try{var a=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],o=y(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,e);(r=o&&a.length===o.length&&o.every((function(e,t){return e===a[t]})))||(n="bad trial run results",console.info(a,o))}catch(i){r=!1,n=i.message}n&&console.warn("WebGL SDF generation not supported:",n),g=!1,C.set(t,r)}return r}var T=Object.freeze({__proto__:null,generate:y,generateIntoCanvas:F,generateIntoFramebuffer:M,isSupported:E});return e.forEachPathCommand=n,e.generate=function(e,t,r,n,a,o){void 0===a&&(a=Math.max(n[2]-n[0],n[3]-n[1])/2),void 0===o&&(o=1);try{return y.apply(T,arguments)}catch(i){return console.info("WebGL SDF generation failed, falling back to JS",i),d.apply(A,arguments)}},e.generateIntoCanvas=function(e,t,r,n,a,o,i,s,l,c){void 0===a&&(a=Math.max(n[2]-n[0],n[3]-n[1])/2),void 0===o&&(o=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0);try{return F.apply(T,arguments)}catch(u){return console.info("WebGL SDF generation failed, falling back to JS",u),f.apply(A,arguments)}},e.javascript=A,e.pathToLineSegments=a,e.webgl=T,e.webglUtils=u,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return e}var y=function(){return function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},r={},n={};r.L=1,n[1]="L",Object.keys(t).forEach((function(e,t){r[e]=1<<t+1,n[r[e]]=e})),Object.freeze(r);var a=r.LRI|r.RLI|r.FSI,o=r.L|r.R|r.AL,i=r.B|r.S|r.WS|r.ON|r.FSI|r.LRI|r.RLI|r.PDI,s=r.BN|r.RLE|r.LRE|r.RLO|r.LRO|r.PDF,l=r.S|r.WS|r.B|a|r.PDI|s,c=null;function u(e){return function(){if(!c){c=new Map;var e=function(e){if(t.hasOwnProperty(e)){var n=0;t[e].split(",").forEach((function(t){var a=t.split("+"),o=a[0],i=a[1];o=parseInt(o,36),i=i?parseInt(i,36):0,c.set(n+=o,r[e]);for(var s=0;s<i;s++)c.set(++n,r[e])}))}};for(var n in t)e(n)}}(),c.get(e.codePointAt(0))||r.L}var d,f,h,p="14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",A="6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye";function B(e,t){var r,n=0,a=new Map,o=t&&new Map;return e.split(",").forEach((function e(i){if(-1!==i.indexOf("+"))for(var s=+i;s--;)e(r);else{r=i;var l=i.split(">"),c=l[0],u=l[1];c=String.fromCodePoint(n+=parseInt(c,36)),u=String.fromCodePoint(n+=parseInt(u,36)),a.set(c,u),t&&o.set(u,c)}})),{map:a,reverseMap:o}}function m(){if(!d){var e=B(p,!0),t=e.map,r=e.reverseMap;d=t,f=r,h=B(A,!1).map}}function g(e){return m(),d.get(e)||null}function v(e){return m(),f.get(e)||null}function C(e){return m(),h.get(e)||null}var b=r.L,y=r.R,F=r.EN,M=r.ES,E=r.ET,T=r.AN,x=r.CS,G=r.B,S=r.S,D=r.ON,U=r.BN,I=r.NSM,R=r.AL,w=r.LRO,k=r.RLO,_=r.LRE,L=r.RLE,H=r.PDF,O=r.LRI,P=r.RLI,J=r.FSI,K=r.PDI;var N;function j(e){return function(){if(!N){var e=B("14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",!0),t=e.map;e.reverseMap.forEach((function(e,r){t.set(r,e)})),N=t}}(),N.get(e)||null}function X(e,t,r,n){var a=e.length;r=Math.max(0,null==r?0:+r),n=Math.min(a-1,null==n?a-1:+n);var o=[];return t.paragraphs.forEach((function(a){var i=Math.max(r,a.start),s=Math.min(n,a.end);if(i<s){for(var c=t.levels.slice(i,s+1),d=s;d>=i&&u(e[d])&l;d--)c[d]=a.level;for(var f=a.level,h=1/0,p=0;p<c.length;p++){var A=c[p];A>f&&(f=A),A<h&&(h=1|A)}for(var B=f;B>=h;B--)for(var m=0;m<c.length;m++)if(c[m]>=B){for(var g=m;m+1<c.length&&c[m+1]>=B;)m++;m>g&&o.push([g+r,m+r])}}})),o}function Q(e,t,r,n){for(var a=X(e,t,r,n),o=[],i=0;i<e.length;i++)o[i]=i;return a.forEach((function(e){for(var t=e[0],r=e[1],n=o.slice(t,r+1),a=n.length;a--;)o[r-a]=n[a]})),o}return e.closingToOpeningBracket=v,e.getBidiCharType=u,e.getBidiCharTypeName=function(e){return n[u(e)]},e.getCanonicalBracket=C,e.getEmbeddingLevels=function(e,t){for(var r=new Uint32Array(e.length),n=0;n<e.length;n++)r[n]=u(e[n]);var c=new Map;function d(e,t){var n=r[e];r[e]=t,c.set(n,c.get(n)-1),n&i&&c.set(i,c.get(i)-1),c.set(t,(c.get(t)||0)+1),t&i&&c.set(i,(c.get(i)||0)+1)}for(var f=new Uint8Array(e.length),h=new Map,p=[],A=null,B=0;B<e.length;B++)A||p.push(A={start:B,end:e.length-1,level:"rtl"===t?1:"ltr"===t?0:Jt(B,!1)}),r[B]&G&&(A.end=B,A=null);for(var m=L|_|k|w|a|K|H|G,N=function(e){return e+(1&e?1:2)},j=function(e){return e+(1&e?2:1)},X=0;X<p.length;X++){var Q=[{_level:(A=p[X]).level,_override:0,_isolate:0}],W=void 0,Y=0,V=0,Z=0;c.clear();for(var z=A.start;z<=A.end;z++){var q=r[z];if(W=Q[Q.length-1],c.set(q,(c.get(q)||0)+1),q&i&&c.set(i,(c.get(i)||0)+1),q&m)if(q&(L|_)){f[z]=W._level;var $=(q===L?j:N)(W._level);$<=125&&!Y&&!V?Q.push({_level:$,_override:0,_isolate:0}):Y||V++}else if(q&(k|w)){f[z]=W._level;var ee=(q===k?j:N)(W._level);ee<=125&&!Y&&!V?Q.push({_level:ee,_override:q&k?y:b,_isolate:0}):Y||V++}else if(q&a){q&J&&(q=1===Jt(z+1,!0)?P:O),f[z]=W._level,W._override&&d(z,W._override);var te=(q===P?j:N)(W._level);te<=125&&0===Y&&0===V?(Z++,Q.push({_level:te,_override:0,_isolate:1,_isolInitIndex:z})):Y++}else if(q&K){if(Y>0)Y--;else if(Z>0){for(V=0;!Q[Q.length-1]._isolate;)Q.pop();var re=Q[Q.length-1]._isolInitIndex;null!=re&&(h.set(re,z),h.set(z,re)),Q.pop(),Z--}W=Q[Q.length-1],f[z]=W._level,W._override&&d(z,W._override)}else q&H?(0===Y&&(V>0?V--:!W._isolate&&Q.length>1&&(Q.pop(),W=Q[Q.length-1])),f[z]=W._level):q&G&&(f[z]=A.level);else f[z]=W._level,W._override&&q!==U&&d(z,W._override)}for(var ne=[],ae=null,oe=A.start;oe<=A.end;oe++){var ie=r[oe];if(!(ie&s)){var se=f[oe],le=ie&a,ce=ie===K;ae&&se===ae._level?(ae._end=oe,ae._endsWithIsolInit=le):ne.push(ae={_start:oe,_end:oe,_level:se,_startsWithPDI:ce,_endsWithIsolInit:le})}}for(var ue=[],de=0;de<ne.length;de++){var fe=ne[de];if(!fe._startsWithPDI||fe._startsWithPDI&&!h.has(fe._start)){for(var he=[ae=fe],pe=void 0;ae&&ae._endsWithIsolInit&&null!=(pe=h.get(ae._end));)for(var Ae=de+1;Ae<ne.length;Ae++)if(ne[Ae]._start===pe){he.push(ae=ne[Ae]);break}for(var Be=[],me=0;me<he.length;me++)for(var ge=he[me],ve=ge._start;ve<=ge._end;ve++)Be.push(ve);for(var Ce=f[Be[0]],be=A.level,ye=Be[0]-1;ye>=0;ye--)if(!(r[ye]&s)){be=f[ye];break}var Fe=Be[Be.length-1],Me=f[Fe],Ee=A.level;if(!(r[Fe]&a))for(var Te=Fe+1;Te<=A.end;Te++)if(!(r[Te]&s)){Ee=f[Te];break}ue.push({_seqIndices:Be,_sosType:Math.max(be,Ce)%2?y:b,_eosType:Math.max(Ee,Me)%2?y:b})}}for(var xe=0;xe<ue.length;xe++){var Ge=ue[xe],Se=Ge._seqIndices,De=Ge._sosType,Ue=Ge._eosType;if(c.get(I))for(var Ie=0;Ie<Se.length;Ie++){var Re=Se[Ie];if(r[Re]&I){for(var we=De,ke=Ie-1;ke>=0;ke--)if(!(r[Se[ke]]&s)){we=r[Se[ke]];break}d(Re,we&(a|K)?D:we)}}if(c.get(F))for(var _e=0;_e<Se.length;_e++){var Le=Se[_e];if(r[Le]&F)for(var He=_e-1;He>=-1;He--){var Oe=-1===He?De:r[Se[He]];if(Oe&o){Oe===R&&d(Le,T);break}}}if(c.get(R))for(var Pe=0;Pe<Se.length;Pe++){var Je=Se[Pe];r[Je]&R&&d(Je,y)}if(c.get(M)||c.get(x))for(var Ke=1;Ke<Se.length-1;Ke++){var Ne=Se[Ke];if(r[Ne]&(M|x)){for(var je=0,Xe=0,Qe=Ke-1;Qe>=0&&(je=r[Se[Qe]])&s;Qe--);for(var We=Ke+1;We<Se.length&&(Xe=r[Se[We]])&s;We++);je===Xe&&(r[Ne]===M?je===F:je&(F|T))&&d(Ne,je)}}if(c.get(F))for(var Ye=0;Ye<Se.length;Ye++){var Ve=Se[Ye];if(r[Ve]&F){for(var Ze=Ye-1;Ze>=0&&r[Se[Ze]]&(E|s);Ze--)d(Se[Ze],F);for(var ze=Ye+1;ze<Se.length&&r[Se[ze]]&(E|s);ze++)d(Se[ze],F)}}if(c.get(E)||c.get(M)||c.get(x))for(var qe=0;qe<Se.length;qe++){var $e=Se[qe];if(r[$e]&(E|M|x)){d($e,D);for(var et=qe-1;et>=0&&r[Se[et]]&s;et--)d(Se[et],D);for(var tt=qe+1;tt<Se.length&&r[Se[tt]]&s;tt++)d(Se[tt],D)}}if(c.get(F))for(var rt=0,nt=De;rt<Se.length;rt++){var at=Se[rt],ot=r[at];ot&F?nt===b&&d(at,b):ot&o&&(nt=ot)}if(c.get(i)){for(var it=y|F|T,st=it|b,lt=[],ct=[],ut=0;ut<Se.length;ut++)if(r[Se[ut]]&i){var dt=e[Se[ut]],ft=void 0;if(null!==g(dt)){if(!(ct.length<63))break;ct.push({char:dt,seqIndex:ut})}else if(null!==(ft=v(dt)))for(var ht=ct.length-1;ht>=0;ht--){var pt=ct[ht].char;if(pt===ft||pt===v(C(dt))||g(C(pt))===dt){lt.push([ct[ht].seqIndex,ut]),ct.length=ht;break}}}lt.sort((function(e,t){return e[0]-t[0]}));for(var At=0;At<lt.length;At++){for(var Bt=lt[At],mt=Bt[0],gt=Bt[1],vt=!1,Ct=0,bt=mt+1;bt<gt;bt++){var yt=Se[bt];if(r[yt]&st){vt=!0;var Ft=r[yt]&it?y:b;if(Ft===Nt(yt)){Ct=Ft;break}}}if(vt&&!Ct){Ct=De;for(var Mt=mt-1;Mt>=0;Mt--){var Et=Se[Mt];if(r[Et]&st){var Tt=r[Et]&it?y:b;Ct=Tt!==Nt(Et)?Tt:Nt(Et);break}}}if(Ct){if(r[Se[mt]]=r[Se[gt]]=Ct,Ct!==Nt(Se[mt]))for(var xt=mt+1;xt<Se.length;xt++)if(!(r[Se[xt]]&s)){u(e[Se[xt]])&I&&(r[Se[xt]]=Ct);break}if(Ct!==Nt(Se[gt]))for(var Gt=gt+1;Gt<Se.length;Gt++)if(!(r[Se[Gt]]&s)){u(e[Se[Gt]])&I&&(r[Se[Gt]]=Ct);break}}}for(var St=0;St<Se.length;St++)if(r[Se[St]]&i){for(var Dt=St,Ut=St,It=De,Rt=St-1;Rt>=0;Rt--){if(!(r[Se[Rt]]&s)){It=r[Se[Rt]]&it?y:b;break}Dt=Rt}for(var wt=Ue,kt=St+1;kt<Se.length;kt++){if(!(r[Se[kt]]&(i|s))){wt=r[Se[kt]]&it?y:b;break}Ut=kt}for(var _t=Dt;_t<=Ut;_t++)r[Se[_t]]=It===wt?It:Nt(Se[_t]);St=Ut}}}for(var Lt=A.start;Lt<=A.end;Lt++){var Ht=f[Lt],Ot=r[Lt];if(1&Ht?Ot&(b|F|T)&&f[Lt]++:Ot&y?f[Lt]++:Ot&(T|F)&&(f[Lt]+=2),Ot&s&&(f[Lt]=0===Lt?A.level:f[Lt-1]),Lt===A.end||u(e[Lt])&(S|G))for(var Pt=Lt;Pt>=0&&u(e[Pt])&l;Pt--)f[Pt]=A.level}}return{levels:f,paragraphs:p};function Jt(t,n){for(var o=t;o<e.length;o++){var i=r[o];if(i&(y|R))return 1;if(i&(G|b)||n&&i===K)return 0;if(i&a){var s=Kt(o);o=-1===s?e.length:s}}return 0}function Kt(t){for(var n=1,o=t+1;o<e.length;o++){var i=r[o];if(i&G)break;if(i&K){if(0===--n)return o}else i&a&&n++}return-1}function Nt(e){return 1&f[e]?y:b}},e.getMirroredCharacter=j,e.getMirroredCharactersMap=function(e,t,r,n){var a=e.length;r=Math.max(0,null==r?0:+r),n=Math.min(a-1,null==n?a-1:+n);for(var o=new Map,i=r;i<=n;i++)if(1&t[i]){var s=j(e[i]);null!==s&&o.set(i,s)}return o},e.getReorderSegments=X,e.getReorderedIndices=Q,e.getReorderedString=function(e,t,r,n){var a=Q(e,t,r,n),o=[].concat(e);return a.forEach((function(r,n){o[n]=(1&t.levels[r]?j(e[r]):null)||e[r]})),o.join("")},e.openingToClosingBracket=g,Object.defineProperty(e,"__esModule",{value:!0}),e}({})};const F=/\bvoid\s+main\s*\(\s*\)\s*{/g;function M(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(e,t){let r=o.ShaderChunk[t];return r?M(r):e}))}const E=[];for(let ie=0;ie<256;ie++)E[ie]=(ie<16?"0":"")+ie.toString(16);const T=Object.assign||function(){let e=arguments[0];for(let t=1,r=arguments.length;t<r;t++){let r=arguments[t];if(r)for(let t in r)r.hasOwnProperty(t)&&(e[t]=r[t])}return e},x=Date.now(),G=new WeakMap,S=new Map;let D=1e10;function U(e,t){const r=function(e){const t=JSON.stringify(e,R);let r=k.get(t);null==r&&k.set(t,r=++w);return r}(t);let n=G.get(e);if(n||G.set(e,n=Object.create(null)),n[r])return new n[r];const a=`_onBeforeCompile${r}`,i=function(n){e.onBeforeCompile.call(this,n);const o=this.customProgramCacheKey()+"|"+n.vertexShader+"|"+n.fragmentShader;let i=S[o];if(!i){const e=function({vertexShader:e,fragmentShader:t},r,n){let{vertexDefs:a,vertexMainIntro:o,vertexMainOutro:i,vertexTransform:s,fragmentDefs:l,fragmentMainIntro:c,fragmentMainOutro:u,fragmentColorTransform:d,customRewriter:f,timeUniform:h}=r;a=a||"",o=o||"",i=i||"",l=l||"",c=c||"",u=u||"",(s||f)&&(e=M(e));(d||f)&&(t=M(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n")));if(f){let r=f({vertexShader:e,fragmentShader:t});e=r.vertexShader,t=r.fragmentShader}if(d){let e=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,(t=>(e.push(t),""))),u=`${d}\n${e.join("\n")}\n${u}`}if(h){const e=`\nuniform float ${h};\n`;a=e+a,l=e+l}s&&(a=`${a}\nvoid troikaVertexTransform${n}(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  ${s}\n}\n`,o=`\ntroika_position_${n} = vec3(position);\ntroika_normal_${n} = vec3(normal);\ntroika_uv_${n} = vec2(uv);\ntroikaVertexTransform${n}(troika_position_${n}, troika_normal_${n}, troika_uv_${n});\n${o}\n`,e=(e=`vec3 troika_position_${n};\nvec3 troika_normal_${n};\nvec2 troika_uv_${n};\n${e}\n`).replace(/\b(position|normal|uv)\b/g,((e,t,r,a)=>/\battribute\s+vec[23]\s+$/.test(a.substr(0,r))?t:`troika_${t}_${n}`)));return e=I(e,n,a,o,i),t=I(t,n,l,c,u),{vertexShader:e,fragmentShader:t}}(n,t,r);i=S[o]=e}n.vertexShader=i.vertexShader,n.fragmentShader=i.fragmentShader,T(n.uniforms,this.uniforms),t.timeUniform&&(n.uniforms[t.timeUniform]={get value(){return Date.now()-x}}),this[a]&&this[a](n)},s=function(){return l(t.chained?e:e.clone())},l=function(n){const a=Object.create(n,c);return Object.defineProperty(a,"baseMaterial",{value:e}),Object.defineProperty(a,"id",{value:D++}),a.uuid=function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(E[255&e]+E[e>>8&255]+E[e>>16&255]+E[e>>24&255]+"-"+E[255&t]+E[t>>8&255]+"-"+E[t>>16&15|64]+E[t>>24&255]+"-"+E[63&r|128]+E[r>>8&255]+"-"+E[r>>16&255]+E[r>>24&255]+E[255&n]+E[n>>8&255]+E[n>>16&255]+E[n>>24&255]).toUpperCase()}(),a.uniforms=T({},n.uniforms,t.uniforms),a.defines=T({},n.defines,t.defines),a.defines[`TROIKA_DERIVED_MATERIAL_${r}`]="",a.extensions=T({},n.extensions,t.extensions),a._listeners=void 0,a},c={constructor:{value:s},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return e.customProgramCacheKey()+"|"+r}},onBeforeCompile:{get:()=>i,set(e){this[a]=e}},copy:{writable:!0,configurable:!0,value:function(t){return e.copy.call(this,t),e.isShaderMaterial||e.isDerivedMaterial||(T(this.extensions,t.extensions),T(this.defines,t.defines),T(this.uniforms,o.UniformsUtils.clone(t.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const t=new e.constructor;return l(t).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let r=this._depthMaterial;return r||(r=this._depthMaterial=U(e.isDerivedMaterial?e.getDepthMaterial():new o.MeshDepthMaterial({depthPacking:o.RGBADepthPacking}),t),r.defines.IS_DEPTH_MATERIAL="",r.uniforms=this.uniforms),r}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let r=this._distanceMaterial;return r||(r=this._distanceMaterial=U(e.isDerivedMaterial?e.getDistanceMaterial():new o.MeshDistanceMaterial,t),r.defines.IS_DISTANCE_MATERIAL="",r.uniforms=this.uniforms),r}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:t,_distanceMaterial:r}=this;t&&t.dispose(),r&&r.dispose(),e.dispose.call(this)}}};return n[r]=s,new s}function I(e,t,r,n,a){return(n||a||r)&&(e=e.replace(F,`\n${r}\nvoid troikaOrigMain${t}() {`),e+=`\nvoid main() {\n  ${n}\n  troikaOrigMain${t}();\n  ${a}\n}`),e}function R(e,t){return"uniforms"===e?void 0:"function"===typeof t?t.toString():t}let w=0;const k=new Map;o.DoubleSide;const _=()=>(self.performance||Date).now(),L=b();let H;const O=function(){const e=[];let t=0;function r(){const n=_();for(;e.length&&_()-n<5;)e.shift()();t=e.length?setTimeout(r,0):0}return(...n)=>{const a=l();return e.push((()=>{const e=_();try{L.webgl.generateIntoCanvas(...n),a.resolve({timing:_()-e})}catch(t){a.reject(t)}})),t||(t=setTimeout(r,0)),a}}(),P=function(){const e={};let t=0;return function(r,n,a,o,i,s,l,c,u,d){const f="TroikaTextSDFGenerator_JS_"+t++%4;let h=e[f];return h||(h=e[f]={workerModule:m({name:f,workerId:f,dependencies:[b,_],init(e,t){const r=e().javascript.generate;return function(...e){const n=t();return{textureData:r(...e),timing:t()-n}}},getTransferables:e=>[e.textureData.buffer]}),requests:0,idleTimer:null}),h.requests++,clearTimeout(h.idleTimer),h.workerModule(r,n,a,o,i,s).then((({textureData:e,timing:t})=>{const a=_(),o=new Uint8Array(4*e.length);for(let r=0;r<e.length;r++)o[4*r+d]=e[r];return L.webglUtils.renderImageData(l,o,c,u,r,n,1<<3-d),t+=_()-a,0===--h.requests&&(h.idleTimer=setTimeout((()=>{!function(e){A[e]&&A[e].forEach((function(e){e()})),p[e]&&(p[e].terminate(),delete p[e])}(f)}),2e3)),{timing:t}}))}}();const J=L.webglUtils.resizeWebGLCanvasWithoutClearing;const K=m({name:"Typr Font Parser",dependencies:[function(){return"undefined"==typeof window&&(self.window=self),function(e){var t={parse:function(e){var r=t._bin,n=new Uint8Array(e);if("ttcf"==r.readASCII(n,0,4)){var a=4;r.readUshort(n,a),a+=2,r.readUshort(n,a),a+=2;var o=r.readUint(n,a);a+=4;for(var i=[],s=0;s<o;s++){var l=r.readUint(n,a);a+=4,i.push(t._readFont(n,l))}return i}return[t._readFont(n,0)]},_readFont:function(e,r){var n=t._bin,a=r;n.readFixed(e,r),r+=4;var o=n.readUshort(e,r);r+=2,n.readUshort(e,r),r+=2,n.readUshort(e,r),r+=2,n.readUshort(e,r),r+=2;for(var i=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],s={_data:e,_offset:a},l={},c=0;c<o;c++){var u=n.readASCII(e,r,4);r+=4,n.readUint(e,r),r+=4;var d=n.readUint(e,r);r+=4;var f=n.readUint(e,r);r+=4,l[u]={offset:d,length:f}}for(c=0;c<i.length;c++){var h=i[c];l[h]&&(s[h.trim()]=t[h.trim()].parse(e,l[h].offset,l[h].length,s))}return s},_tabOffset:function(e,r,n){for(var a=t._bin,o=a.readUshort(e,n+4),i=n+12,s=0;s<o;s++){var l=a.readASCII(e,i,4);i+=4,a.readUint(e,i),i+=4;var c=a.readUint(e,i);if(i+=4,a.readUint(e,i),i+=4,l==r)return c}return 0}};t._bin={readFixed:function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<8|e[t+3])/65540},readF2dot14:function(e,r){return t._bin.readShort(e,r)/16384},readInt:function(e,r){return t._bin._view(e).getInt32(r)},readInt8:function(e,r){return t._bin._view(e).getInt8(r)},readShort:function(e,r){return t._bin._view(e).getInt16(r)},readUshort:function(e,r){return t._bin._view(e).getUint16(r)},readUshorts:function(e,r,n){for(var a=[],o=0;o<n;o++)a.push(t._bin.readUshort(e,r+2*o));return a},readUint:function(e,r){return t._bin._view(e).getUint32(r)},readUint64:function(e,r){return 4294967296*t._bin.readUint(e,r)+t._bin.readUint(e,r+4)},readASCII:function(e,t,r){for(var n="",a=0;a<r;a++)n+=String.fromCharCode(e[t+a]);return n},readUnicode:function(e,t,r){for(var n="",a=0;a<r;a++){var o=e[t++]<<8|e[t++];n+=String.fromCharCode(o)}return n},_tdec:"undefined"!=typeof window&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(e,r,n){var a=t._bin._tdec;return a&&0==r&&n==e.length?a.decode(e):t._bin.readASCII(e,r,n)},readBytes:function(e,t,r){for(var n=[],a=0;a<r;a++)n.push(e[t+a]);return n},readASCIIArray:function(e,t,r){for(var n=[],a=0;a<r;a++)n.push(String.fromCharCode(e[t+a]));return n},_view:function(e){return e._dataView||(e._dataView=e.buffer?new DataView(e.buffer,e.byteOffset,e.byteLength):new DataView(new Uint8Array(e).buffer))}},t._lctf={},t._lctf.parse=function(e,r,n,a,o){var i=t._bin,s={},l=r;i.readFixed(e,r),r+=4;var c=i.readUshort(e,r);r+=2;var u=i.readUshort(e,r);r+=2;var d=i.readUshort(e,r);return r+=2,s.scriptList=t._lctf.readScriptList(e,l+c),s.featureList=t._lctf.readFeatureList(e,l+u),s.lookupList=t._lctf.readLookupList(e,l+d,o),s},t._lctf.readLookupList=function(e,r,n){var a=t._bin,o=r,i=[],s=a.readUshort(e,r);r+=2;for(var l=0;l<s;l++){var c=a.readUshort(e,r);r+=2;var u=t._lctf.readLookupTable(e,o+c,n);i.push(u)}return i},t._lctf.readLookupTable=function(e,r,n){var a=t._bin,o=r,i={tabs:[]};i.ltype=a.readUshort(e,r),r+=2,i.flag=a.readUshort(e,r),r+=2;var s=a.readUshort(e,r);r+=2;for(var l=i.ltype,c=0;c<s;c++){var u=a.readUshort(e,r);r+=2;var d=n(e,l,o+u,i);i.tabs.push(d)}return i},t._lctf.numOfOnes=function(e){for(var t=0,r=0;r<32;r++)0!=(e>>>r&1)&&t++;return t},t._lctf.readClassDef=function(e,r){var n=t._bin,a=[],o=n.readUshort(e,r);if(r+=2,1==o){var i=n.readUshort(e,r);r+=2;var s=n.readUshort(e,r);r+=2;for(var l=0;l<s;l++)a.push(i+l),a.push(i+l),a.push(n.readUshort(e,r)),r+=2}if(2==o){var c=n.readUshort(e,r);for(r+=2,l=0;l<c;l++)a.push(n.readUshort(e,r)),r+=2,a.push(n.readUshort(e,r)),r+=2,a.push(n.readUshort(e,r)),r+=2}return a},t._lctf.getInterval=function(e,t){for(var r=0;r<e.length;r+=3){var n=e[r],a=e[r+1];if(e[r+2],n<=t&&t<=a)return r}return-1},t._lctf.readCoverage=function(e,r){var n=t._bin,a={};a.fmt=n.readUshort(e,r),r+=2;var o=n.readUshort(e,r);return r+=2,1==a.fmt&&(a.tab=n.readUshorts(e,r,o)),2==a.fmt&&(a.tab=n.readUshorts(e,r,3*o)),a},t._lctf.coverageIndex=function(e,r){var n=e.tab;if(1==e.fmt)return n.indexOf(r);if(2==e.fmt){var a=t._lctf.getInterval(n,r);if(-1!=a)return n[a+2]+(r-n[a])}return-1},t._lctf.readFeatureList=function(e,r){var n=t._bin,a=r,o=[],i=n.readUshort(e,r);r+=2;for(var s=0;s<i;s++){var l=n.readASCII(e,r,4);r+=4;var c=n.readUshort(e,r);r+=2;var u=t._lctf.readFeatureTable(e,a+c);u.tag=l.trim(),o.push(u)}return o},t._lctf.readFeatureTable=function(e,r){var n=t._bin,a=r,o={},i=n.readUshort(e,r);r+=2,i>0&&(o.featureParams=a+i);var s=n.readUshort(e,r);r+=2,o.tab=[];for(var l=0;l<s;l++)o.tab.push(n.readUshort(e,r+2*l));return o},t._lctf.readScriptList=function(e,r){var n=t._bin,a=r,o={},i=n.readUshort(e,r);r+=2;for(var s=0;s<i;s++){var l=n.readASCII(e,r,4);r+=4;var c=n.readUshort(e,r);r+=2,o[l.trim()]=t._lctf.readScriptTable(e,a+c)}return o},t._lctf.readScriptTable=function(e,r){var n=t._bin,a=r,o={},i=n.readUshort(e,r);r+=2,o.default=t._lctf.readLangSysTable(e,a+i);var s=n.readUshort(e,r);r+=2;for(var l=0;l<s;l++){var c=n.readASCII(e,r,4);r+=4;var u=n.readUshort(e,r);r+=2,o[c.trim()]=t._lctf.readLangSysTable(e,a+u)}return o},t._lctf.readLangSysTable=function(e,r){var n=t._bin,a={};n.readUshort(e,r),r+=2,a.reqFeature=n.readUshort(e,r),r+=2;var o=n.readUshort(e,r);return r+=2,a.features=n.readUshorts(e,r,o),a},t.CFF={},t.CFF.parse=function(e,r,n){var a=t._bin;(e=new Uint8Array(e.buffer,r,n))[r=0],e[++r],e[++r],e[++r],r++;var o=[];r=t.CFF.readIndex(e,r,o);for(var i=[],s=0;s<o.length-1;s++)i.push(a.readASCII(e,r+o[s],o[s+1]-o[s]));r+=o[o.length-1];var l=[];r=t.CFF.readIndex(e,r,l);var c=[];for(s=0;s<l.length-1;s++)c.push(t.CFF.readDict(e,r+l[s],r+l[s+1]));r+=l[l.length-1];var u=c[0],d=[];r=t.CFF.readIndex(e,r,d);var f=[];for(s=0;s<d.length-1;s++)f.push(a.readASCII(e,r+d[s],d[s+1]-d[s]));if(r+=d[d.length-1],t.CFF.readSubrs(e,r,u),u.CharStrings){r=u.CharStrings,d=[],r=t.CFF.readIndex(e,r,d);var h=[];for(s=0;s<d.length-1;s++)h.push(a.readBytes(e,r+d[s],d[s+1]-d[s]));u.CharStrings=h}if(u.ROS){r=u.FDArray;var p=[];for(r=t.CFF.readIndex(e,r,p),u.FDArray=[],s=0;s<p.length-1;s++){var A=t.CFF.readDict(e,r+p[s],r+p[s+1]);t.CFF._readFDict(e,A,f),u.FDArray.push(A)}r+=p[p.length-1],r=u.FDSelect,u.FDSelect=[];var B=e[r];if(r++,3!=B)throw B;var m=a.readUshort(e,r);for(r+=2,s=0;s<m+1;s++)u.FDSelect.push(a.readUshort(e,r),e[r+2]),r+=3}return u.Encoding&&(u.Encoding=t.CFF.readEncoding(e,u.Encoding,u.CharStrings.length)),u.charset&&(u.charset=t.CFF.readCharset(e,u.charset,u.CharStrings.length)),t.CFF._readFDict(e,u,f),u},t.CFF._readFDict=function(e,r,n){var a;for(var o in r.Private&&(a=r.Private[1],r.Private=t.CFF.readDict(e,a,a+r.Private[0]),r.Private.Subrs&&t.CFF.readSubrs(e,a+r.Private.Subrs,r.Private)),r)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(o)&&(r[o]=n[r[o]-426+35])},t.CFF.readSubrs=function(e,r,n){var a=t._bin,o=[];r=t.CFF.readIndex(e,r,o);var i,s=o.length;i=s<1240?107:s<33900?1131:32768,n.Bias=i,n.Subrs=[];for(var l=0;l<o.length-1;l++)n.Subrs.push(a.readBytes(e,r+o[l],o[l+1]-o[l]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(e,t){for(var r=0;r<e.charset.length;r++)if(e.charset[r]==t)return r;return-1},t.CFF.glyphBySE=function(e,r){return r<0||r>255?-1:t.CFF.glyphByUnicode(e,t.CFF.tableSE[r])},t.CFF.readEncoding=function(e,r,n){t._bin;var a=[".notdef"],o=e[r];if(r++,0!=o)throw"error: unknown encoding format: "+o;var i=e[r];r++;for(var s=0;s<i;s++)a.push(e[r+s]);return a},t.CFF.readCharset=function(e,r,n){var a=t._bin,o=[".notdef"],i=e[r];if(r++,0==i)for(var s=0;s<n;s++){var l=a.readUshort(e,r);r+=2,o.push(l)}else{if(1!=i&&2!=i)throw"error: format: "+i;for(;o.length<n;){l=a.readUshort(e,r),r+=2;var c=0;for(1==i?(c=e[r],r++):(c=a.readUshort(e,r),r+=2),s=0;s<=c;s++)o.push(l),l++}}return o},t.CFF.readIndex=function(e,r,n){var a=t._bin,o=a.readUshort(e,r)+1,i=e[r+=2];if(r++,1==i)for(var s=0;s<o;s++)n.push(e[r+s]);else if(2==i)for(s=0;s<o;s++)n.push(a.readUshort(e,r+2*s));else if(3==i)for(s=0;s<o;s++)n.push(16777215&a.readUint(e,r+3*s-1));else if(1!=o)throw"unsupported offset size: "+i+", count: "+o;return(r+=o*i)-1},t.CFF.getCharString=function(e,r,n){var a=t._bin,o=e[r],i=e[r+1];e[r+2],e[r+3],e[r+4];var s=1,l=null,c=null;o<=20&&(l=o,s=1),12==o&&(l=100*o+i,s=2),21<=o&&o<=27&&(l=o,s=1),28==o&&(c=a.readShort(e,r+1),s=3),29<=o&&o<=31&&(l=o,s=1),32<=o&&o<=246&&(c=o-139,s=1),247<=o&&o<=250&&(c=256*(o-247)+i+108,s=2),251<=o&&o<=254&&(c=256*-(o-251)-i-108,s=2),255==o&&(c=a.readInt(e,r+1)/65535,s=5),n.val=null!=c?c:"o"+l,n.size=s},t.CFF.readCharString=function(e,r,n){for(var a=r+n,o=t._bin,i=[];r<a;){var s=e[r],l=e[r+1];e[r+2],e[r+3],e[r+4];var c=1,u=null,d=null;s<=20&&(u=s,c=1),12==s&&(u=100*s+l,c=2),19!=s&&20!=s||(u=s,c=2),21<=s&&s<=27&&(u=s,c=1),28==s&&(d=o.readShort(e,r+1),c=3),29<=s&&s<=31&&(u=s,c=1),32<=s&&s<=246&&(d=s-139,c=1),247<=s&&s<=250&&(d=256*(s-247)+l+108,c=2),251<=s&&s<=254&&(d=256*-(s-251)-l-108,c=2),255==s&&(d=o.readInt(e,r+1)/65535,c=5),i.push(null!=d?d:"o"+u),r+=c}return i},t.CFF.readDict=function(e,r,n){for(var a=t._bin,o={},i=[];r<n;){var s=e[r],l=e[r+1];e[r+2],e[r+3],e[r+4];var c=1,u=null,d=null;if(28==s&&(d=a.readShort(e,r+1),c=3),29==s&&(d=a.readInt(e,r+1),c=5),32<=s&&s<=246&&(d=s-139,c=1),247<=s&&s<=250&&(d=256*(s-247)+l+108,c=2),251<=s&&s<=254&&(d=256*-(s-251)-l-108,c=2),255==s)throw d=a.readInt(e,r+1)/65535,c=5,"unknown number";if(30==s){var f=[];for(c=1;;){var h=e[r+c];c++;var p=h>>4,A=15&h;if(15!=p&&f.push(p),15!=A&&f.push(A),15==A)break}for(var B="",m=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],g=0;g<f.length;g++)B+=m[f[g]];d=parseFloat(B)}s<=21&&(u=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][s],c=1,12==s&&(u=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][l],c=2)),null!=u?(o[u]=1==i.length?i[0]:i,i=[]):i.push(d),r+=c}return o},t.cmap={},t.cmap.parse=function(e,r,n){e=new Uint8Array(e.buffer,r,n),r=0;var a=t._bin,o={};a.readUshort(e,r),r+=2;var i=a.readUshort(e,r);r+=2;var s=[];o.tables=[];for(var l=0;l<i;l++){var c=a.readUshort(e,r);r+=2;var u=a.readUshort(e,r);r+=2;var d=a.readUint(e,r);r+=4;var f="p"+c+"e"+u,h=s.indexOf(d);if(-1==h){var p;h=o.tables.length,s.push(d);var A=a.readUshort(e,d);0==A?p=t.cmap.parse0(e,d):4==A?p=t.cmap.parse4(e,d):6==A?p=t.cmap.parse6(e,d):12==A?p=t.cmap.parse12(e,d):console.debug("unknown format: "+A,c,u,d),o.tables.push(p)}if(null!=o[f])throw"multiple tables for one platform+encoding";o[f]=h}return o},t.cmap.parse0=function(e,r){var n=t._bin,a={};a.format=n.readUshort(e,r),r+=2;var o=n.readUshort(e,r);r+=2,n.readUshort(e,r),r+=2,a.map=[];for(var i=0;i<o-6;i++)a.map.push(e[r+i]);return a},t.cmap.parse4=function(e,r){var n=t._bin,a=r,o={};o.format=n.readUshort(e,r),r+=2;var i=n.readUshort(e,r);r+=2,n.readUshort(e,r),r+=2;var s=n.readUshort(e,r);r+=2;var l=s/2;o.searchRange=n.readUshort(e,r),r+=2,o.entrySelector=n.readUshort(e,r),r+=2,o.rangeShift=n.readUshort(e,r),r+=2,o.endCount=n.readUshorts(e,r,l),r+=2*l,r+=2,o.startCount=n.readUshorts(e,r,l),r+=2*l,o.idDelta=[];for(var c=0;c<l;c++)o.idDelta.push(n.readShort(e,r)),r+=2;for(o.idRangeOffset=n.readUshorts(e,r,l),r+=2*l,o.glyphIdArray=[];r<a+i;)o.glyphIdArray.push(n.readUshort(e,r)),r+=2;return o},t.cmap.parse6=function(e,r){var n=t._bin,a={};a.format=n.readUshort(e,r),r+=2,n.readUshort(e,r),r+=2,n.readUshort(e,r),r+=2,a.firstCode=n.readUshort(e,r),r+=2;var o=n.readUshort(e,r);r+=2,a.glyphIdArray=[];for(var i=0;i<o;i++)a.glyphIdArray.push(n.readUshort(e,r)),r+=2;return a},t.cmap.parse12=function(e,r){var n=t._bin,a={};a.format=n.readUshort(e,r),r+=2,r+=2,n.readUint(e,r),r+=4,n.readUint(e,r),r+=4;var o=n.readUint(e,r);r+=4,a.groups=[];for(var i=0;i<o;i++){var s=r+12*i,l=n.readUint(e,s+0),c=n.readUint(e,s+4),u=n.readUint(e,s+8);a.groups.push([l,c,u])}return a},t.glyf={},t.glyf.parse=function(e,t,r,n){for(var a=[],o=0;o<n.maxp.numGlyphs;o++)a.push(null);return a},t.glyf._parseGlyf=function(e,r){var n=t._bin,a=e._data,o=t._tabOffset(a,"glyf",e._offset)+e.loca[r];if(e.loca[r]==e.loca[r+1])return null;var i={};if(i.noc=n.readShort(a,o),o+=2,i.xMin=n.readShort(a,o),o+=2,i.yMin=n.readShort(a,o),o+=2,i.xMax=n.readShort(a,o),o+=2,i.yMax=n.readShort(a,o),o+=2,i.xMin>=i.xMax||i.yMin>=i.yMax)return null;if(i.noc>0){i.endPts=[];for(var s=0;s<i.noc;s++)i.endPts.push(n.readUshort(a,o)),o+=2;var l=n.readUshort(a,o);if(o+=2,a.length-o<l)return null;i.instructions=n.readBytes(a,o,l),o+=l;var c=i.endPts[i.noc-1]+1;for(i.flags=[],s=0;s<c;s++){var u=a[o];if(o++,i.flags.push(u),0!=(8&u)){var d=a[o];o++;for(var f=0;f<d;f++)i.flags.push(u),s++}}for(i.xs=[],s=0;s<c;s++){var h=0!=(2&i.flags[s]),p=0!=(16&i.flags[s]);h?(i.xs.push(p?a[o]:-a[o]),o++):p?i.xs.push(0):(i.xs.push(n.readShort(a,o)),o+=2)}for(i.ys=[],s=0;s<c;s++)h=0!=(4&i.flags[s]),p=0!=(32&i.flags[s]),h?(i.ys.push(p?a[o]:-a[o]),o++):p?i.ys.push(0):(i.ys.push(n.readShort(a,o)),o+=2);var A=0,B=0;for(s=0;s<c;s++)A+=i.xs[s],B+=i.ys[s],i.xs[s]=A,i.ys[s]=B}else{var m;i.parts=[];do{m=n.readUshort(a,o),o+=2;var g={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(i.parts.push(g),g.glyphIndex=n.readUshort(a,o),o+=2,1&m){var v=n.readShort(a,o);o+=2;var C=n.readShort(a,o);o+=2}else v=n.readInt8(a,o),o++,C=n.readInt8(a,o),o++;2&m?(g.m.tx=v,g.m.ty=C):(g.p1=v,g.p2=C),8&m?(g.m.a=g.m.d=n.readF2dot14(a,o),o+=2):64&m?(g.m.a=n.readF2dot14(a,o),o+=2,g.m.d=n.readF2dot14(a,o),o+=2):128&m&&(g.m.a=n.readF2dot14(a,o),o+=2,g.m.b=n.readF2dot14(a,o),o+=2,g.m.c=n.readF2dot14(a,o),o+=2,g.m.d=n.readF2dot14(a,o),o+=2)}while(32&m);if(256&m){var b=n.readUshort(a,o);for(o+=2,i.instr=[],s=0;s<b;s++)i.instr.push(a[o]),o++}}return i},t.GPOS={},t.GPOS.parse=function(e,r,n,a){return t._lctf.parse(e,r,n,a,t.GPOS.subt)},t.GPOS.subt=function(e,r,n,a){var o=t._bin,i=n,s={};if(s.fmt=o.readUshort(e,n),n+=2,1==r||2==r||3==r||7==r||8==r&&s.fmt<=2){var l=o.readUshort(e,n);n+=2,s.coverage=t._lctf.readCoverage(e,l+i)}if(1==r&&1==s.fmt){var c=o.readUshort(e,n);n+=2;var u=t._lctf.numOfOnes(c);0!=c&&(s.pos=t.GPOS.readValueRecord(e,n,c))}else if(2==r&&s.fmt>=1&&s.fmt<=2){c=o.readUshort(e,n),n+=2;var d=o.readUshort(e,n);n+=2,u=t._lctf.numOfOnes(c);var f=t._lctf.numOfOnes(d);if(1==s.fmt){s.pairsets=[];var h=o.readUshort(e,n);n+=2;for(var p=0;p<h;p++){var A=i+o.readUshort(e,n);n+=2;var B=o.readUshort(e,A);A+=2;for(var m=[],g=0;g<B;g++){var v=o.readUshort(e,A);A+=2,0!=c&&(E=t.GPOS.readValueRecord(e,A,c),A+=2*u),0!=d&&(T=t.GPOS.readValueRecord(e,A,d),A+=2*f),m.push({gid2:v,val1:E,val2:T})}s.pairsets.push(m)}}if(2==s.fmt){var C=o.readUshort(e,n);n+=2;var b=o.readUshort(e,n);n+=2;var y=o.readUshort(e,n);n+=2;var F=o.readUshort(e,n);for(n+=2,s.classDef1=t._lctf.readClassDef(e,i+C),s.classDef2=t._lctf.readClassDef(e,i+b),s.matrix=[],p=0;p<y;p++){var M=[];for(g=0;g<F;g++){var E=null,T=null;0!=c&&(E=t.GPOS.readValueRecord(e,n,c),n+=2*u),0!=d&&(T=t.GPOS.readValueRecord(e,n,d),n+=2*f),M.push({val1:E,val2:T})}s.matrix.push(M)}}}else{if(9==r&&1==s.fmt){var x=o.readUshort(e,n);n+=2;var G=o.readUint(e,n);if(n+=4,9==a.ltype)a.ltype=x;else if(a.ltype!=x)throw"invalid extension substitution";return t.GPOS.subt(e,a.ltype,i+G)}console.debug("unsupported GPOS table LookupType",r,"format",s.fmt)}return s},t.GPOS.readValueRecord=function(e,r,n){var a=t._bin,o=[];return o.push(1&n?a.readShort(e,r):0),r+=1&n?2:0,o.push(2&n?a.readShort(e,r):0),r+=2&n?2:0,o.push(4&n?a.readShort(e,r):0),r+=4&n?2:0,o.push(8&n?a.readShort(e,r):0),r+=8&n?2:0,o},t.GSUB={},t.GSUB.parse=function(e,r,n,a){return t._lctf.parse(e,r,n,a,t.GSUB.subt)},t.GSUB.subt=function(e,r,n,a){var o=t._bin,i=n,s={};if(s.fmt=o.readUshort(e,n),n+=2,1!=r&&4!=r&&5!=r&&6!=r)return null;if(1==r||4==r||5==r&&s.fmt<=2||6==r&&s.fmt<=2){var l=o.readUshort(e,n);n+=2,s.coverage=t._lctf.readCoverage(e,i+l)}if(1==r&&s.fmt>=1&&s.fmt<=2){if(1==s.fmt)s.delta=o.readShort(e,n),n+=2;else if(2==s.fmt){var c=o.readUshort(e,n);n+=2,s.newg=o.readUshorts(e,n,c),n+=2*s.newg.length}}else if(4==r){s.vals=[],c=o.readUshort(e,n),n+=2;for(var u=0;u<c;u++){var d=o.readUshort(e,n);n+=2,s.vals.push(t.GSUB.readLigatureSet(e,i+d))}}else if(5==r&&2==s.fmt){if(2==s.fmt){var f=o.readUshort(e,n);n+=2,s.cDef=t._lctf.readClassDef(e,i+f),s.scset=[];var h=o.readUshort(e,n);for(n+=2,u=0;u<h;u++){var p=o.readUshort(e,n);n+=2,s.scset.push(0==p?null:t.GSUB.readSubClassSet(e,i+p))}}}else if(6==r&&3==s.fmt){if(3==s.fmt){for(u=0;u<3;u++){c=o.readUshort(e,n),n+=2;for(var A=[],B=0;B<c;B++)A.push(t._lctf.readCoverage(e,i+o.readUshort(e,n+2*B)));n+=2*c,0==u&&(s.backCvg=A),1==u&&(s.inptCvg=A),2==u&&(s.ahedCvg=A)}c=o.readUshort(e,n),n+=2,s.lookupRec=t.GSUB.readSubstLookupRecords(e,n,c)}}else{if(7==r&&1==s.fmt){var m=o.readUshort(e,n);n+=2;var g=o.readUint(e,n);if(n+=4,9==a.ltype)a.ltype=m;else if(a.ltype!=m)throw"invalid extension substitution";return t.GSUB.subt(e,a.ltype,i+g)}console.debug("unsupported GSUB table LookupType",r,"format",s.fmt)}return s},t.GSUB.readSubClassSet=function(e,r){var n=t._bin.readUshort,a=r,o=[],i=n(e,r);r+=2;for(var s=0;s<i;s++){var l=n(e,r);r+=2,o.push(t.GSUB.readSubClassRule(e,a+l))}return o},t.GSUB.readSubClassRule=function(e,r){var n=t._bin.readUshort,a={},o=n(e,r),i=n(e,r+=2);r+=2,a.input=[];for(var s=0;s<o-1;s++)a.input.push(n(e,r)),r+=2;return a.substLookupRecords=t.GSUB.readSubstLookupRecords(e,r,i),a},t.GSUB.readSubstLookupRecords=function(e,r,n){for(var a=t._bin.readUshort,o=[],i=0;i<n;i++)o.push(a(e,r),a(e,r+2)),r+=4;return o},t.GSUB.readChainSubClassSet=function(e,r){var n=t._bin,a=r,o=[],i=n.readUshort(e,r);r+=2;for(var s=0;s<i;s++){var l=n.readUshort(e,r);r+=2,o.push(t.GSUB.readChainSubClassRule(e,a+l))}return o},t.GSUB.readChainSubClassRule=function(e,r){for(var n=t._bin,a={},o=["backtrack","input","lookahead"],i=0;i<o.length;i++){var s=n.readUshort(e,r);r+=2,1==i&&s--,a[o[i]]=n.readUshorts(e,r,s),r+=2*a[o[i]].length}return s=n.readUshort(e,r),r+=2,a.subst=n.readUshorts(e,r,2*s),r+=2*a.subst.length,a},t.GSUB.readLigatureSet=function(e,r){var n=t._bin,a=r,o=[],i=n.readUshort(e,r);r+=2;for(var s=0;s<i;s++){var l=n.readUshort(e,r);r+=2,o.push(t.GSUB.readLigature(e,a+l))}return o},t.GSUB.readLigature=function(e,r){var n=t._bin,a={chain:[]};a.nglyph=n.readUshort(e,r),r+=2;var o=n.readUshort(e,r);r+=2;for(var i=0;i<o-1;i++)a.chain.push(n.readUshort(e,r)),r+=2;return a},t.head={},t.head.parse=function(e,r,n){var a=t._bin,o={};return a.readFixed(e,r),r+=4,o.fontRevision=a.readFixed(e,r),r+=4,a.readUint(e,r),r+=4,a.readUint(e,r),r+=4,o.flags=a.readUshort(e,r),r+=2,o.unitsPerEm=a.readUshort(e,r),r+=2,o.created=a.readUint64(e,r),r+=8,o.modified=a.readUint64(e,r),r+=8,o.xMin=a.readShort(e,r),r+=2,o.yMin=a.readShort(e,r),r+=2,o.xMax=a.readShort(e,r),r+=2,o.yMax=a.readShort(e,r),r+=2,o.macStyle=a.readUshort(e,r),r+=2,o.lowestRecPPEM=a.readUshort(e,r),r+=2,o.fontDirectionHint=a.readShort(e,r),r+=2,o.indexToLocFormat=a.readShort(e,r),r+=2,o.glyphDataFormat=a.readShort(e,r),r+=2,o},t.hhea={},t.hhea.parse=function(e,r,n){var a=t._bin,o={};return a.readFixed(e,r),r+=4,o.ascender=a.readShort(e,r),r+=2,o.descender=a.readShort(e,r),r+=2,o.lineGap=a.readShort(e,r),r+=2,o.advanceWidthMax=a.readUshort(e,r),r+=2,o.minLeftSideBearing=a.readShort(e,r),r+=2,o.minRightSideBearing=a.readShort(e,r),r+=2,o.xMaxExtent=a.readShort(e,r),r+=2,o.caretSlopeRise=a.readShort(e,r),r+=2,o.caretSlopeRun=a.readShort(e,r),r+=2,o.caretOffset=a.readShort(e,r),r+=2,r+=8,o.metricDataFormat=a.readShort(e,r),r+=2,o.numberOfHMetrics=a.readUshort(e,r),r+=2,o},t.hmtx={},t.hmtx.parse=function(e,r,n,a){for(var o=t._bin,i={aWidth:[],lsBearing:[]},s=0,l=0,c=0;c<a.maxp.numGlyphs;c++)c<a.hhea.numberOfHMetrics&&(s=o.readUshort(e,r),r+=2,l=o.readShort(e,r),r+=2),i.aWidth.push(s),i.lsBearing.push(l);return i},t.kern={},t.kern.parse=function(e,r,n,a){var o=t._bin,i=o.readUshort(e,r);if(r+=2,1==i)return t.kern.parseV1(e,r-2,n,a);var s=o.readUshort(e,r);r+=2;for(var l={glyph1:[],rval:[]},c=0;c<s;c++){r+=2,n=o.readUshort(e,r),r+=2;var u=o.readUshort(e,r);r+=2;var d=u>>>8;if(0!=(d&=15))throw"unknown kern table format: "+d;r=t.kern.readFormat0(e,r,l)}return l},t.kern.parseV1=function(e,r,n,a){var o=t._bin;o.readFixed(e,r),r+=4;var i=o.readUint(e,r);r+=4;for(var s={glyph1:[],rval:[]},l=0;l<i;l++){o.readUint(e,r),r+=4;var c=o.readUshort(e,r);r+=2,o.readUshort(e,r),r+=2;var u=c>>>8;if(0!=(u&=15))throw"unknown kern table format: "+u;r=t.kern.readFormat0(e,r,s)}return s},t.kern.readFormat0=function(e,r,n){var a=t._bin,o=-1,i=a.readUshort(e,r);r+=2,a.readUshort(e,r),r+=2,a.readUshort(e,r),r+=2,a.readUshort(e,r),r+=2;for(var s=0;s<i;s++){var l=a.readUshort(e,r);r+=2;var c=a.readUshort(e,r);r+=2;var u=a.readShort(e,r);r+=2,l!=o&&(n.glyph1.push(l),n.rval.push({glyph2:[],vals:[]}));var d=n.rval[n.rval.length-1];d.glyph2.push(c),d.vals.push(u),o=l}return r},t.loca={},t.loca.parse=function(e,r,n,a){var o=t._bin,i=[],s=a.head.indexToLocFormat,l=a.maxp.numGlyphs+1;if(0==s)for(var c=0;c<l;c++)i.push(o.readUshort(e,r+(c<<1))<<1);if(1==s)for(c=0;c<l;c++)i.push(o.readUint(e,r+(c<<2)));return i},t.maxp={},t.maxp.parse=function(e,r,n){var a=t._bin,o={},i=a.readUint(e,r);return r+=4,o.numGlyphs=a.readUshort(e,r),r+=2,65536==i&&(o.maxPoints=a.readUshort(e,r),r+=2,o.maxContours=a.readUshort(e,r),r+=2,o.maxCompositePoints=a.readUshort(e,r),r+=2,o.maxCompositeContours=a.readUshort(e,r),r+=2,o.maxZones=a.readUshort(e,r),r+=2,o.maxTwilightPoints=a.readUshort(e,r),r+=2,o.maxStorage=a.readUshort(e,r),r+=2,o.maxFunctionDefs=a.readUshort(e,r),r+=2,o.maxInstructionDefs=a.readUshort(e,r),r+=2,o.maxStackElements=a.readUshort(e,r),r+=2,o.maxSizeOfInstructions=a.readUshort(e,r),r+=2,o.maxComponentElements=a.readUshort(e,r),r+=2,o.maxComponentDepth=a.readUshort(e,r),r+=2),o},t.name={},t.name.parse=function(e,r,n){var a=t._bin,o={};a.readUshort(e,r),r+=2;var i=a.readUshort(e,r);r+=2,a.readUshort(e,r);for(var s,l=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],c=r+=2,u=0;u<i;u++){var d=a.readUshort(e,r);r+=2;var f=a.readUshort(e,r);r+=2;var h=a.readUshort(e,r);r+=2;var p=a.readUshort(e,r);r+=2;var A=a.readUshort(e,r);r+=2;var B=a.readUshort(e,r);r+=2;var m,g=l[p],v=c+12*i+B;if(0==d)m=a.readUnicode(e,v,A/2);else if(3==d&&0==f)m=a.readUnicode(e,v,A/2);else if(0==f)m=a.readASCII(e,v,A);else if(1==f)m=a.readUnicode(e,v,A/2);else if(3==f)m=a.readUnicode(e,v,A/2);else{if(1!=d)throw"unknown encoding "+f+", platformID: "+d;m=a.readASCII(e,v,A),console.debug("reading unknown MAC encoding "+f+" as ASCII")}var C="p"+d+","+h.toString(16);null==o[C]&&(o[C]={}),o[C][void 0!==g?g:p]=m,o[C]._lang=h}for(var b in o)if(null!=o[b].postScriptName&&1033==o[b]._lang)return o[b];for(var b in o)if(null!=o[b].postScriptName&&0==o[b]._lang)return o[b];for(var b in o)if(null!=o[b].postScriptName&&3084==o[b]._lang)return o[b];for(var b in o)if(null!=o[b].postScriptName)return o[b];for(var b in o){s=b;break}return console.debug("returning name table with languageID "+o[s]._lang),o[s]},t["OS/2"]={},t["OS/2"].parse=function(e,r,n){var a=t._bin.readUshort(e,r);r+=2;var o={};if(0==a)t["OS/2"].version0(e,r,o);else if(1==a)t["OS/2"].version1(e,r,o);else if(2==a||3==a||4==a)t["OS/2"].version2(e,r,o);else{if(5!=a)throw"unknown OS/2 table version: "+a;t["OS/2"].version5(e,r,o)}return o},t["OS/2"].version0=function(e,r,n){var a=t._bin;return n.xAvgCharWidth=a.readShort(e,r),r+=2,n.usWeightClass=a.readUshort(e,r),r+=2,n.usWidthClass=a.readUshort(e,r),r+=2,n.fsType=a.readUshort(e,r),r+=2,n.ySubscriptXSize=a.readShort(e,r),r+=2,n.ySubscriptYSize=a.readShort(e,r),r+=2,n.ySubscriptXOffset=a.readShort(e,r),r+=2,n.ySubscriptYOffset=a.readShort(e,r),r+=2,n.ySuperscriptXSize=a.readShort(e,r),r+=2,n.ySuperscriptYSize=a.readShort(e,r),r+=2,n.ySuperscriptXOffset=a.readShort(e,r),r+=2,n.ySuperscriptYOffset=a.readShort(e,r),r+=2,n.yStrikeoutSize=a.readShort(e,r),r+=2,n.yStrikeoutPosition=a.readShort(e,r),r+=2,n.sFamilyClass=a.readShort(e,r),r+=2,n.panose=a.readBytes(e,r,10),r+=10,n.ulUnicodeRange1=a.readUint(e,r),r+=4,n.ulUnicodeRange2=a.readUint(e,r),r+=4,n.ulUnicodeRange3=a.readUint(e,r),r+=4,n.ulUnicodeRange4=a.readUint(e,r),r+=4,n.achVendID=[a.readInt8(e,r),a.readInt8(e,r+1),a.readInt8(e,r+2),a.readInt8(e,r+3)],r+=4,n.fsSelection=a.readUshort(e,r),r+=2,n.usFirstCharIndex=a.readUshort(e,r),r+=2,n.usLastCharIndex=a.readUshort(e,r),r+=2,n.sTypoAscender=a.readShort(e,r),r+=2,n.sTypoDescender=a.readShort(e,r),r+=2,n.sTypoLineGap=a.readShort(e,r),r+=2,n.usWinAscent=a.readUshort(e,r),r+=2,n.usWinDescent=a.readUshort(e,r),r+2},t["OS/2"].version1=function(e,r,n){var a=t._bin;return r=t["OS/2"].version0(e,r,n),n.ulCodePageRange1=a.readUint(e,r),r+=4,n.ulCodePageRange2=a.readUint(e,r),r+4},t["OS/2"].version2=function(e,r,n){var a=t._bin;return r=t["OS/2"].version1(e,r,n),n.sxHeight=a.readShort(e,r),r+=2,n.sCapHeight=a.readShort(e,r),r+=2,n.usDefault=a.readUshort(e,r),r+=2,n.usBreak=a.readUshort(e,r),r+=2,n.usMaxContext=a.readUshort(e,r),r+2},t["OS/2"].version5=function(e,r,n){var a=t._bin;return r=t["OS/2"].version2(e,r,n),n.usLowerOpticalPointSize=a.readUshort(e,r),r+=2,n.usUpperOpticalPointSize=a.readUshort(e,r),r+2},t.post={},t.post.parse=function(e,r,n){var a=t._bin,o={};return o.version=a.readFixed(e,r),r+=4,o.italicAngle=a.readFixed(e,r),r+=4,o.underlinePosition=a.readShort(e,r),r+=2,o.underlineThickness=a.readShort(e,r),r+=2,o},null==t&&(t={}),null==t.U&&(t.U={}),t.U.codeToGlyph=function(e,t){var r=e.cmap,n=-1;if(null!=r.p0e4?n=r.p0e4:null!=r.p3e1?n=r.p3e1:null!=r.p1e0?n=r.p1e0:null!=r.p0e3&&(n=r.p0e3),-1==n)throw"no familiar platform and encoding!";var a=r.tables[n];if(0==a.format)return t>=a.map.length?0:a.map[t];if(4==a.format){for(var o=-1,i=0;i<a.endCount.length;i++)if(t<=a.endCount[i]){o=i;break}return-1==o||a.startCount[o]>t?0:65535&(0!=a.idRangeOffset[o]?a.glyphIdArray[t-a.startCount[o]+(a.idRangeOffset[o]>>1)-(a.idRangeOffset.length-o)]:t+a.idDelta[o])}if(12==a.format){if(t>a.groups[a.groups.length-1][1])return 0;for(i=0;i<a.groups.length;i++){var s=a.groups[i];if(s[0]<=t&&t<=s[1])return s[2]+(t-s[0])}return 0}throw"unknown cmap table format "+a.format},t.U.glyphToPath=function(e,r){var n={cmds:[],crds:[]};if(e.SVG&&e.SVG.entries[r]){var a=e.SVG.entries[r];return null==a?n:("string"==typeof a&&(a=t.SVG.toPath(a),e.SVG.entries[r]=a),a)}if(e.CFF){var o={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:e.CFF.Private?e.CFF.Private.defaultWidthX:0,open:!1},i=e.CFF,s=e.CFF.Private;if(i.ROS){for(var l=0;i.FDSelect[l+2]<=r;)l+=2;s=i.FDArray[i.FDSelect[l+1]].Private}t.U._drawCFF(e.CFF.CharStrings[r],o,i,s,n)}else e.glyf&&t.U._drawGlyf(r,e,n);return n},t.U._drawGlyf=function(e,r,n){var a=r.glyf[e];null==a&&(a=r.glyf[e]=t.glyf._parseGlyf(r,e)),null!=a&&(a.noc>-1?t.U._simpleGlyph(a,n):t.U._compoGlyph(a,r,n))},t.U._simpleGlyph=function(e,r){for(var n=0;n<e.noc;n++){for(var a=0==n?0:e.endPts[n-1]+1,o=e.endPts[n],i=a;i<=o;i++){var s=i==a?o:i-1,l=i==o?a:i+1,c=1&e.flags[i],u=1&e.flags[s],d=1&e.flags[l],f=e.xs[i],h=e.ys[i];if(i==a)if(c){if(!u){t.U.P.moveTo(r,f,h);continue}t.U.P.moveTo(r,e.xs[s],e.ys[s])}else u?t.U.P.moveTo(r,e.xs[s],e.ys[s]):t.U.P.moveTo(r,(e.xs[s]+f)/2,(e.ys[s]+h)/2);c?u&&t.U.P.lineTo(r,f,h):d?t.U.P.qcurveTo(r,f,h,e.xs[l],e.ys[l]):t.U.P.qcurveTo(r,f,h,(f+e.xs[l])/2,(h+e.ys[l])/2)}t.U.P.closePath(r)}},t.U._compoGlyph=function(e,r,n){for(var a=0;a<e.parts.length;a++){var o={cmds:[],crds:[]},i=e.parts[a];t.U._drawGlyf(i.glyphIndex,r,o);for(var s=i.m,l=0;l<o.crds.length;l+=2){var c=o.crds[l],u=o.crds[l+1];n.crds.push(c*s.a+u*s.b+s.tx),n.crds.push(c*s.c+u*s.d+s.ty)}for(l=0;l<o.cmds.length;l++)n.cmds.push(o.cmds[l])}},t.U._getGlyphClass=function(e,r){var n=t._lctf.getInterval(r,e);return-1==n?0:r[n+2]},t.U.getPairAdjustment=function(e,r,n){var a=0,o=!1;if(e.GPOS)for(var i=e.GPOS,s=i.lookupList,l=i.featureList,c=[],u=0;u<l.length;u++){var d=l[u];if("kern"==d.tag){o=!0;for(var f=0;f<d.tab.length;f++)if(!c[d.tab[f]]){c[d.tab[f]]=!0;for(var h=s[d.tab[f]],p=0;p<h.tabs.length;p++)if(null!=h.tabs[p]){var A,B=h.tabs[p];if(!B.coverage||-1!=(A=t._lctf.coverageIndex(B.coverage,r)))if(1==h.ltype);else if(2==h.ltype){var m;if(1==B.fmt){var g=B.pairsets[A];for(u=0;u<g.length;u++)g[u].gid2==n&&(m=g[u])}else if(2==B.fmt){var v=t.U._getGlyphClass(r,B.classDef1),C=t.U._getGlyphClass(n,B.classDef2);m=B.matrix[v][C]}m&&m.val1&&m.val1[2]&&(a+=m.val1[2]),m&&m.val2&&m.val2[0]&&(a+=m.val2[0])}}}}}if(e.kern&&!o){var b=e.kern.glyph1.indexOf(r);if(-1!=b){var y=e.kern.rval[b].glyph2.indexOf(n);-1!=y&&(a+=e.kern.rval[b].vals[y])}}return a},t.U._applySubs=function(e,r,n,a){for(var o=e.length-r-1,i=0;i<n.tabs.length;i++)if(null!=n.tabs[i]){var s,l=n.tabs[i];if(!l.coverage||-1!=(s=t._lctf.coverageIndex(l.coverage,e[r])))if(1==n.ltype)e[r],1==l.fmt?e[r]=e[r]+l.delta:e[r]=l.newg[s];else if(4==n.ltype)for(var c=l.vals[s],u=0;u<c.length;u++){var d=c[u],f=d.chain.length;if(!(f>o)){for(var h=!0,p=0,A=0;A<f;A++){for(;-1==e[r+p+(1+A)];)p++;d.chain[A]!=e[r+p+(1+A)]&&(h=!1)}if(h){for(e[r]=d.nglyph,A=0;A<f+p;A++)e[r+A+1]=-1;break}}}else if(5==n.ltype&&2==l.fmt)for(var B=t._lctf.getInterval(l.cDef,e[r]),m=l.cDef[B+2],g=l.scset[m],v=0;v<g.length;v++){var C=g[v],b=C.input;if(!(b.length>o)){for(h=!0,A=0;A<b.length;A++){var y=t._lctf.getInterval(l.cDef,e[r+1+A]);if(-1==B&&l.cDef[y+2]!=b[A]){h=!1;break}}if(h){var F=C.substLookupRecords;for(u=0;u<F.length;u+=2)F[u],F[u+1]}}}else if(6==n.ltype&&3==l.fmt){if(!t.U._glsCovered(e,l.backCvg,r-l.backCvg.length))continue;if(!t.U._glsCovered(e,l.inptCvg,r))continue;if(!t.U._glsCovered(e,l.ahedCvg,r+l.inptCvg.length))continue;var M=l.lookupRec;for(v=0;v<M.length;v+=2){B=M[v];var E=a[M[v+1]];t.U._applySubs(e,r+B,E,a)}}}},t.U._glsCovered=function(e,r,n){for(var a=0;a<r.length;a++)if(-1==t._lctf.coverageIndex(r[a],e[n+a]))return!1;return!0},t.U.glyphsToPath=function(e,r,n){for(var a={cmds:[],crds:[]},o=0,i=0;i<r.length;i++){var s=r[i];if(-1!=s){for(var l=i<r.length-1&&-1!=r[i+1]?r[i+1]:0,c=t.U.glyphToPath(e,s),u=0;u<c.crds.length;u+=2)a.crds.push(c.crds[u]+o),a.crds.push(c.crds[u+1]);for(n&&a.cmds.push(n),u=0;u<c.cmds.length;u++)a.cmds.push(c.cmds[u]);n&&a.cmds.push("X"),o+=e.hmtx.aWidth[s],i<r.length-1&&(o+=t.U.getPairAdjustment(e,s,l))}}return a},t.U.P={},t.U.P.moveTo=function(e,t,r){e.cmds.push("M"),e.crds.push(t,r)},t.U.P.lineTo=function(e,t,r){e.cmds.push("L"),e.crds.push(t,r)},t.U.P.curveTo=function(e,t,r,n,a,o,i){e.cmds.push("C"),e.crds.push(t,r,n,a,o,i)},t.U.P.qcurveTo=function(e,t,r,n,a){e.cmds.push("Q"),e.crds.push(t,r,n,a)},t.U.P.closePath=function(e){e.cmds.push("Z")},t.U._drawCFF=function(e,r,n,a,o){for(var i=r.stack,s=r.nStems,l=r.haveWidth,c=r.width,u=r.open,d=0,f=r.x,h=r.y,p=0,A=0,B=0,m=0,g=0,v=0,C=0,b=0,y=0,F=0,M={val:0,size:0};d<e.length;){t.CFF.getCharString(e,d,M);var E=M.val;if(d+=M.size,"o1"==E||"o18"==E)i.length%2!=0&&!l&&(c=i.shift()+a.nominalWidthX),s+=i.length>>1,i.length=0,l=!0;else if("o3"==E||"o23"==E)i.length%2!=0&&!l&&(c=i.shift()+a.nominalWidthX),s+=i.length>>1,i.length=0,l=!0;else if("o4"==E)i.length>1&&!l&&(c=i.shift()+a.nominalWidthX,l=!0),u&&t.U.P.closePath(o),h+=i.pop(),t.U.P.moveTo(o,f,h),u=!0;else if("o5"==E)for(;i.length>0;)f+=i.shift(),h+=i.shift(),t.U.P.lineTo(o,f,h);else if("o6"==E||"o7"==E)for(var T=i.length,x="o6"==E,G=0;G<T;G++){var S=i.shift();x?f+=S:h+=S,x=!x,t.U.P.lineTo(o,f,h)}else if("o8"==E||"o24"==E){T=i.length;for(var D=0;D+6<=T;)p=f+i.shift(),A=h+i.shift(),B=p+i.shift(),m=A+i.shift(),f=B+i.shift(),h=m+i.shift(),t.U.P.curveTo(o,p,A,B,m,f,h),D+=6;"o24"==E&&(f+=i.shift(),h+=i.shift(),t.U.P.lineTo(o,f,h))}else{if("o11"==E)break;if("o1234"==E||"o1235"==E||"o1236"==E||"o1237"==E)"o1234"==E&&(A=h,B=(p=f+i.shift())+i.shift(),F=m=A+i.shift(),v=m,b=h,f=(C=(g=(y=B+i.shift())+i.shift())+i.shift())+i.shift(),t.U.P.curveTo(o,p,A,B,m,y,F),t.U.P.curveTo(o,g,v,C,b,f,h)),"o1235"==E&&(p=f+i.shift(),A=h+i.shift(),B=p+i.shift(),m=A+i.shift(),y=B+i.shift(),F=m+i.shift(),g=y+i.shift(),v=F+i.shift(),C=g+i.shift(),b=v+i.shift(),f=C+i.shift(),h=b+i.shift(),i.shift(),t.U.P.curveTo(o,p,A,B,m,y,F),t.U.P.curveTo(o,g,v,C,b,f,h)),"o1236"==E&&(p=f+i.shift(),A=h+i.shift(),B=p+i.shift(),F=m=A+i.shift(),v=m,C=(g=(y=B+i.shift())+i.shift())+i.shift(),b=v+i.shift(),f=C+i.shift(),t.U.P.curveTo(o,p,A,B,m,y,F),t.U.P.curveTo(o,g,v,C,b,f,h)),"o1237"==E&&(p=f+i.shift(),A=h+i.shift(),B=p+i.shift(),m=A+i.shift(),y=B+i.shift(),F=m+i.shift(),g=y+i.shift(),v=F+i.shift(),C=g+i.shift(),b=v+i.shift(),Math.abs(C-f)>Math.abs(b-h)?f=C+i.shift():h=b+i.shift(),t.U.P.curveTo(o,p,A,B,m,y,F),t.U.P.curveTo(o,g,v,C,b,f,h));else if("o14"==E){if(i.length>0&&!l&&(c=i.shift()+n.nominalWidthX,l=!0),4==i.length){var U=i.shift(),I=i.shift(),R=i.shift(),w=i.shift(),k=t.CFF.glyphBySE(n,R),_=t.CFF.glyphBySE(n,w);t.U._drawCFF(n.CharStrings[k],r,n,a,o),r.x=U,r.y=I,t.U._drawCFF(n.CharStrings[_],r,n,a,o)}u&&(t.U.P.closePath(o),u=!1)}else if("o19"==E||"o20"==E)i.length%2!=0&&!l&&(c=i.shift()+a.nominalWidthX),s+=i.length>>1,i.length=0,l=!0,d+=s+7>>3;else if("o21"==E)i.length>2&&!l&&(c=i.shift()+a.nominalWidthX,l=!0),h+=i.pop(),f+=i.pop(),u&&t.U.P.closePath(o),t.U.P.moveTo(o,f,h),u=!0;else if("o22"==E)i.length>1&&!l&&(c=i.shift()+a.nominalWidthX,l=!0),f+=i.pop(),u&&t.U.P.closePath(o),t.U.P.moveTo(o,f,h),u=!0;else if("o25"==E){for(;i.length>6;)f+=i.shift(),h+=i.shift(),t.U.P.lineTo(o,f,h);p=f+i.shift(),A=h+i.shift(),B=p+i.shift(),m=A+i.shift(),f=B+i.shift(),h=m+i.shift(),t.U.P.curveTo(o,p,A,B,m,f,h)}else if("o26"==E)for(i.length%2&&(f+=i.shift());i.length>0;)p=f,A=h+i.shift(),f=B=p+i.shift(),h=(m=A+i.shift())+i.shift(),t.U.P.curveTo(o,p,A,B,m,f,h);else if("o27"==E)for(i.length%2&&(h+=i.shift());i.length>0;)A=h,B=(p=f+i.shift())+i.shift(),m=A+i.shift(),f=B+i.shift(),h=m,t.U.P.curveTo(o,p,A,B,m,f,h);else if("o10"==E||"o29"==E){var L="o10"==E?a:n;if(0==i.length)console.debug("error: empty stack");else{var H=i.pop(),O=L.Subrs[H+L.Bias];r.x=f,r.y=h,r.nStems=s,r.haveWidth=l,r.width=c,r.open=u,t.U._drawCFF(O,r,n,a,o),f=r.x,h=r.y,s=r.nStems,l=r.haveWidth,c=r.width,u=r.open}}else if("o30"==E||"o31"==E){var P=i.length,J=(D=0,"o31"==E);for(D+=P-(T=-3&P);D<T;)J?(A=h,B=(p=f+i.shift())+i.shift(),h=(m=A+i.shift())+i.shift(),T-D==5?(f=B+i.shift(),D++):f=B,J=!1):(p=f,A=h+i.shift(),B=p+i.shift(),m=A+i.shift(),f=B+i.shift(),T-D==5?(h=m+i.shift(),D++):h=m,J=!0),t.U.P.curveTo(o,p,A,B,m,f,h),D+=4}else{if("o"==(E+"").charAt(0))throw console.debug("Unknown operation: "+E,e),E;i.push(E)}}}r.x=f,r.y=h,r.nStems=s,r.haveWidth=l,r.width=c,r.open=u};var r=t,n={Typr:r};return e.Typr=r,e.default=n,Object.defineProperty(e,"__esModule",{value:!0}),e}({}).Typr},function(){return function(e){var t=Uint8Array,r=Uint16Array,n=Uint32Array,a=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),i=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(e,t){for(var a=new r(31),o=0;o<31;++o)a[o]=t+=1<<e[o-1];var i=new n(a[30]);for(o=1;o<30;++o)for(var s=a[o];s<a[o+1];++s)i[s]=s-a[o]<<5|o;return[a,i]},l=s(a,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var d=s(o,0)[0],f=new r(32768),h=0;h<32768;++h){var p=(43690&h)>>>1|(21845&h)<<1;p=(61680&(p=(52428&p)>>>2|(13107&p)<<2))>>>4|(3855&p)<<4,f[h]=((65280&p)>>>8|(255&p)<<8)>>>1}var A=function(e,t,n){for(var a=e.length,o=0,i=new r(t);o<a;++o)++i[e[o]-1];var s,l=new r(t);for(o=0;o<t;++o)l[o]=l[o-1]+i[o-1]<<1;if(n){s=new r(1<<t);var c=15-t;for(o=0;o<a;++o)if(e[o])for(var u=o<<4|e[o],d=t-e[o],h=l[e[o]-1]++<<d,p=h|(1<<d)-1;h<=p;++h)s[f[h]>>>c]=u}else for(s=new r(a),o=0;o<a;++o)e[o]&&(s[o]=f[l[e[o]-1]++]>>>15-e[o]);return s},B=new t(288);for(h=0;h<144;++h)B[h]=8;for(h=144;h<256;++h)B[h]=9;for(h=256;h<280;++h)B[h]=7;for(h=280;h<288;++h)B[h]=8;var m=new t(32);for(h=0;h<32;++h)m[h]=5;var g=A(B,9,1),v=A(m,5,1),C=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},b=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(7&t)&r},y=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(7&t)},F=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],M=function(e,t,r){var n=new Error(t||F[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,M),!r)throw n;return n},E=function(e,s,l){var u=e.length;if(!u||l&&!l.l&&u<5)return s||new t(0);var f=!s||l,h=!l||l.i;l||(l={}),s||(s=new t(3*u));var p,B=function(e){var r=s.length;if(e>r){var n=new t(Math.max(2*r,e));n.set(s),s=n}},m=l.f||0,F=l.p||0,E=l.b||0,T=l.l,x=l.d,G=l.m,S=l.n,D=8*u;do{if(!T){l.f=m=b(e,F,1);var U=b(e,F+1,3);if(F+=3,!U){var I=e[(N=((p=F)/8|0)+(7&p&&1)+4)-4]|e[N-3]<<8,R=N+I;if(R>u){h&&M(0);break}f&&B(E+I),s.set(e.subarray(N,R),E),l.b=E+=I,l.p=F=8*R;continue}if(1==U)T=g,x=v,G=9,S=5;else if(2==U){var w=b(e,F,31)+257,k=b(e,F+10,15)+4,_=w+b(e,F+5,31)+1;F+=14;for(var L=new t(_),H=new t(19),O=0;O<k;++O)H[i[O]]=b(e,F+3*O,7);F+=3*k;var P=C(H),J=(1<<P)-1,K=A(H,P,1);for(O=0;O<_;){var N,j=K[b(e,F,J)];if(F+=15&j,(N=j>>>4)<16)L[O++]=N;else{var X=0,Q=0;for(16==N?(Q=3+b(e,F,3),F+=2,X=L[O-1]):17==N?(Q=3+b(e,F,7),F+=3):18==N&&(Q=11+b(e,F,127),F+=7);Q--;)L[O++]=X}}var W=L.subarray(0,w),Y=L.subarray(w);G=C(W),S=C(Y),T=A(W,G,1),x=A(Y,S,1)}else M(1);if(F>D){h&&M(0);break}}f&&B(E+131072);for(var V=(1<<G)-1,Z=(1<<S)-1,z=F;;z=F){var q=(X=T[y(e,F)&V])>>>4;if((F+=15&X)>D){h&&M(0);break}if(X||M(2),q<256)s[E++]=q;else{if(256==q){z=F,T=null;break}var $=q-254;if(q>264){var ee=a[O=q-257];$=b(e,F,(1<<ee)-1)+c[O],F+=ee}var te=x[y(e,F)&Z],re=te>>>4;if(te||M(3),F+=15&te,Y=d[re],re>3&&(ee=o[re],Y+=y(e,F)&(1<<ee)-1,F+=ee),F>D){h&&M(0);break}f&&B(E+131072);for(var ne=E+$;E<ne;E+=4)s[E]=s[E-Y],s[E+1]=s[E+1-Y],s[E+2]=s[E+2-Y],s[E+3]=s[E+3-Y];E=ne}}l.l=T,l.p=z,l.b=E,T&&(m=1,l.m=G,l.d=x,l.n=S)}while(!m);return E==s.length?s:function(e,a,o){(null==a||a<0)&&(a=0),(null==o||o>e.length)&&(o=e.length);var i=new(e instanceof r?r:e instanceof n?n:t)(o-a);return i.set(e.subarray(a,o)),i}(s,0,E)},T=new t(0),x="undefined"!=typeof TextDecoder&&new TextDecoder;try{x.decode(T,{stream:!0})}catch(e){}return e.convert_streams=function(e){var t=new DataView(e),r=0;function n(){var e=t.getUint16(r);return r+=2,e}function a(){var e=t.getUint32(r);return r+=4,e}function o(e){m.setUint16(g,e),g+=2}function i(e){m.setUint32(g,e),g+=4}for(var s={signature:a(),flavor:a(),length:a(),numTables:n(),reserved:n(),totalSfntSize:a(),majorVersion:n(),minorVersion:n(),metaOffset:a(),metaLength:a(),metaOrigLength:a(),privOffset:a(),privLength:a()},l=0;Math.pow(2,l)<=s.numTables;)l++;l--;for(var c=16*Math.pow(2,l),u=16*s.numTables-c,d=12,f=[],h=0;h<s.numTables;h++)f.push({tag:a(),offset:a(),compLength:a(),origLength:a(),origChecksum:a()}),d+=16;var p,A=new Uint8Array(12+16*f.length+f.reduce((function(e,t){return e+t.origLength+4}),0)),B=A.buffer,m=new DataView(B),g=0;return i(s.flavor),o(s.numTables),o(c),o(l),o(u),f.forEach((function(e){i(e.tag),i(e.origChecksum),i(d),i(e.origLength),e.outOffset=d,(d+=e.origLength)%4!=0&&(d+=4-d%4)})),f.forEach((function(t){var r,n=e.slice(t.offset,t.offset+t.compLength);if(t.compLength!=t.origLength){var a=new Uint8Array(t.origLength);r=new Uint8Array(n,2),E(r,a)}else a=new Uint8Array(n);A.set(a,t.outOffset);var o=0;(d=t.outOffset+t.origLength)%4!=0&&(o=4-d%4),A.set(new Uint8Array(o).buffer,t.outOffset+t.origLength),p=d+o})),B.slice(0,p)},Object.defineProperty(e,"__esModule",{value:!0}),e}({}).convert_streams},function(e,t){const r={M:2,L:2,Q:4,C:6,Z:0},n={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"};let a;function o(e){if(!a){const e={R:2,L:1,D:4,C:16,U:32,T:8};a=new Map;for(let t in n){let r=0;n[t].split(",").forEach((n=>{let[o,i]=n.split("+");o=parseInt(o,36),i=i?parseInt(i,36):0,a.set(r+=o,e[t]);for(let s=i;s--;)a.set(++r,e[t])}))}}return a.get(e)||32}const i=[null,"isol","init","fina","medi"];function s(e){const t=new Uint8Array(e.length);let r=32,n=1,a=-1;for(let i=0;i<e.length;i++){const s=e.codePointAt(i);let l=0|o(s),c=1;8&l||(21&r?22&l?(c=3,1!==n&&3!==n||t[a]++):33&l&&(2!==n&&4!==n||t[a]--):34&r&&(2!==n&&4!==n||t[a]--),n=t[i]=c,r=l,a=i,s>65535&&i++)}return t}function l(t){const n=Object.create(null),a={unitsPerEm:t.head.unitsPerEm,ascender:t.hhea.ascender,descender:t.hhea.descender,forEachGlyph(o,l,c,u){let d=0;const f=1/a.unitsPerEm*l,h=function(t,r){const n=[];for(let o=0;o<r.length;o++){const a=r.codePointAt(o);a>65535&&o++,n.push(e.U.codeToGlyph(t,a))}const a=t.GSUB;if(a){const{lookupList:t,featureList:o}=a;let l;const c=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,u=[];o.forEach((a=>{if(c.test(a.tag))for(let o=0;o<a.tab.length;o++){if(u[a.tab[o]])continue;u[a.tab[o]]=!0;const c=t[a.tab[o]],d=/^(isol|init|fina|medi)$/.test(a.tag);d&&!l&&(l=s(r));for(let r=0;r<n.length;r++)l&&d&&i[l[r]]!==a.tag||e.U._applySubs(n,r,c,t)}}))}return n}(t,o);let p=0,A=-1;return h.forEach(((a,i)=>{if(-1!==a){let o=n[a];if(!o){const{cmds:i,crds:s}=e.U.glyphToPath(t,a);let l,c,u,d,f="",h=0;for(let e=0,t=i.length;e<t;e++){const t=r[i[e]];f+=i[e];for(let e=1;e<=t;e++)f+=(e>1?",":"")+s[h++]}if(s.length){l=c=1/0,u=d=-1/0;for(let e=0,t=s.length;e<t;e+=2){let t=s[e],r=s[e+1];t<l&&(l=t),r<c&&(c=r),t>u&&(u=t),r>d&&(d=r)}}else l=u=c=d=0;o=n[a]={index:a,advanceWidth:t.hmtx.aWidth[a],xMin:l,yMin:c,xMax:u,yMax:d,path:f,pathCommandCount:i.length}}-1!==A&&(d+=e.U.getPairAdjustment(t,A,a)*f),u.call(null,o,d,p),o.advanceWidth&&(d+=o.advanceWidth*f),c&&(d+=c*l),A=a}p+=o.codePointAt(p)>65535?2:1})),d}};return a}return function(r){const n=new Uint8Array(r,0,4),a=e._bin.readASCII(n,0,4);if("wOFF"===a)r=t(r);else if("wOF2"===a)throw new Error("woff2 fonts not supported");return l(e.parse(r)[0])}}],init:(e,t,r)=>r(e(),t())}),N={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},j=new o.Color;let X=!1;function Q(){return(self.performance||Date).now()}const W=Object.create(null);function Y(e,t){X=!0,e=Z({},e);const r=Q();if(e.font=function(e){z||(z="undefined"===typeof document?{}:document.createElement("a"));return z.href=e,z.href}(e.font||N.defaultFontURL),e.text=""+e.text,e.sdfGlyphSize=e.sdfGlyphSize||N.sdfGlyphSize,null!=e.colorRanges){let t={};for(let r in e.colorRanges)if(e.colorRanges.hasOwnProperty(r)){let n=e.colorRanges[r];"number"!==typeof n&&(n=j.set(n).getHex()),t[r]=n}e.colorRanges=t}Object.freeze(e);const{textureWidth:n,sdfExponent:a}=N,{sdfGlyphSize:i}=e,s=n/i*4;let c=W[i];if(!c){const e=document.createElement("canvas");e.width=n,e.height=256*i/s,c=W[i]={glyphCount:0,sdfGlyphSize:i,sdfCanvas:e,sdfTexture:new o.Texture(e,void 0,void 0,void 0,o.LinearFilter,o.LinearFilter),contextLost:!1,glyphsByFont:new Map},c.sdfTexture.generateMipmaps=!1,function(e){const t=e.sdfCanvas;t.addEventListener("webglcontextlost",(t=>{console.log("Context Lost",t),t.preventDefault(),e.contextLost=!0})),t.addEventListener("webglcontextrestored",(t=>{console.log("Context Restored",t),e.contextLost=!1;const r=[];e.glyphsByFont.forEach((t=>{t.forEach((t=>{r.push(V(t,e,!0))}))})),l.all(r).then((()=>{q(e),e.sdfTexture.needsUpdate=!0}))}))}(c)}const{sdfTexture:u,sdfCanvas:d}=c;let f=c.glyphsByFont.get(e.font);f||c.glyphsByFont.set(e.font,f=new Map),ee(e).then((o=>{const{glyphIds:h,glyphPositions:p,fontSize:A,unitsPerEm:B,timings:m}=o,g=[],v=new Float32Array(4*h.length),C=A/B;let b=0,y=0;const F=Q();h.forEach(((e,t)=>{let r=f.get(e);if(!r){const{path:t,pathBounds:n}=o.glyphData[e],a=Math.max(n[2]-n[0],n[3]-n[1])/i*(N.sdfMargin*i+.5),s=c.glyphCount++,l=[n[0]-a,n[1]-a,n[2]+a,n[3]+a];f.set(e,r={path:t,atlasIndex:s,sdfViewBox:l}),g.push(r)}const{sdfViewBox:n}=r,a=p[y++],s=p[y++];v[b++]=a+n[0]*C,v[b++]=s+n[1]*C,v[b++]=a+n[2]*C,v[b++]=s+n[3]*C,h[t]=r.atlasIndex})),m.quads=(m.quads||0)+(Q()-F);const M=Q();m.sdf={};const E=d.height,T=Math.ceil(c.glyphCount/s),x=Math.pow(2,Math.ceil(Math.log2(T*i)));x>E&&(console.info(`Increasing SDF texture size ${E}->${x}`),J(d,n,x),u.dispose()),l.all(g.map((t=>V(t,c,e.gpuAccelerateSDF).then((({timing:e})=>{m.sdf[t.atlasIndex]=e}))))).then((()=>{g.length&&!c.contextLost&&(q(c),u.needsUpdate=!0),m.sdfTotal=Q()-M,m.total=Q()-r,t(Object.freeze({parameters:e,sdfTexture:u,sdfGlyphSize:i,sdfExponent:a,glyphBounds:v,glyphAtlasIndices:h,glyphColors:o.glyphColors,caretPositions:o.caretPositions,caretHeight:o.caretHeight,chunkedBounds:o.chunkedBounds,ascender:o.ascender,descender:o.descender,lineHeight:o.lineHeight,topBaseline:o.topBaseline,blockBounds:o.blockBounds,visibleBounds:o.visibleBounds,timings:o.timings,get totalBounds(){return console.log("totalBounds deprecated, use blockBounds instead"),o.blockBounds},get totalBlockSize(){console.log("totalBlockSize deprecated, use blockBounds instead");const[e,t,r,n]=o.blockBounds;return[r-e,n-t]}}))}))})),l.all([]).then((()=>{var e;c.contextLost||(e=d)._warm||(L.webgl.isSupported(e),e._warm=!0)}))}function V({path:e,atlasIndex:t,sdfViewBox:r},{sdfGlyphSize:n,sdfCanvas:a,contextLost:o},i){if(o)return Promise.resolve({timing:-1});const{textureWidth:s,sdfExponent:l}=N,c=Math.max(r[2]-r[0],r[3]-r[1]),u=Math.floor(t/4);return function(e,t,r,n,a,o,i,s,l,c,u=!0){return u?O(e,t,r,n,a,o,i,s,l,c).then(null,(u=>(H||(console.warn("WebGL SDF generation failed, falling back to JS",u),H=!0),P(e,t,r,n,a,o,i,s,l,c)))):P(e,t,r,n,a,o,i,s,l,c)}(n,n,e,r,c,l,a,u%(s/n)*n,Math.floor(u/(s/n))*n,t%4,i)}function Z(e,t){for(let r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}let z;function q(e){if("function"!==typeof createImageBitmap){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:t,sdfTexture:r}=e,{width:n,height:a}=t,o=e.sdfCanvas.getContext("webgl");let i=r.image.data;i&&i.length===n*a*4||(i=new Uint8Array(n*a*4),r.image={width:n,height:a,data:i},r.flipY=!1,r.isDataTexture=!0),o.readPixels(0,0,n,a,o.RGBA,o.UNSIGNED_BYTE,i)}}const $=m({name:"Typesetter",dependencies:[N,K,function(e,t,r){const{defaultFontURL:n}=r,a=Object.create(null),o=1/0,i=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,s=/[\s\-\u007C\u00AD\u2010\u2012-\u2014\u2027\u2056\u2E17\u2E40]/;function l(t,r){t||(t=n);let o=a[t];o?o.pending?o.pending.push(r):r(o):(a[t]={pending:[r]},function(t,r){!function a(){const o=e=>{console.error(`Failure loading font ${t}${t===n?"":"; trying fallback"}`,e),t!==n&&(t=n,a())};try{const n=new XMLHttpRequest;n.open("get",t,!0),n.responseType="arraybuffer",n.onload=function(){if(n.status>=400)o(new Error(n.statusText));else if(n.status>0)try{const t=e(n.response);r(t)}catch(t){o(t)}},n.onerror=o,n.send()}catch(i){o(i)}}()}(t,(e=>{let r=a[t].pending;a[t]=e,r.forEach((t=>t(e)))})))}function c({text:e="",font:r=n,sdfGlyphSize:a=64,fontSize:c=1,letterSpacing:p=0,lineHeight:A="normal",maxWidth:B=o,direction:m,textAlign:g="left",textIndent:v=0,whiteSpace:C="normal",overflowWrap:b="normal",anchorX:y=0,anchorY:F=0,includeCaretPositions:M=!1,chunkedBoundsSize:E=8192,colorRanges:T=null},x,G=!1){const S=f(),D={fontLoad:0,typesetting:0};e.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),c=+c,p=+p,B=+B,A=A||"normal",v=+v,l(r,(r=>{const n=isFinite(B);let a=null,l=null,U=null,I=null,R=null,w=null,k=null,_=0,L=0,H="nowrap"!==C;const{ascender:O,descender:P,unitsPerEm:J}=r;D.fontLoad=f()-S;const K=f(),N=c/J;"normal"===A&&(A=(O-P)/J);const j=((A*=c)-(O-P)*N)/2,X=-(O*N+j),Q=Math.min(A,(O-P)*N),W=(O+P)/2*N-Q/2;let Y=v,V=new h;const Z=[V];r.forEachGlyph(e,c,p,((t,r,a)=>{const o=e.charAt(a),l=t.advanceWidth*N,u=V.count;let d;if("isEmpty"in t||(t.isWhitespace=!!o&&/\s/.test(o),t.canBreakAfter=!!o&&s.test(o),t.isEmpty=t.xMin===t.xMax||t.yMin===t.yMax||i.test(o)),t.isWhitespace||t.isEmpty||L++,H&&n&&!t.isWhitespace&&r+l+Y>B&&u){if(V.glyphAt(u-1).glyphObj.canBreakAfter)d=new h,Y=-r;else for(let e=u;e--;){if(0===e&&"break-word"===b){d=new h,Y=-r;break}if(V.glyphAt(e).glyphObj.canBreakAfter){d=V.splitAt(e+1);const t=d.glyphAt(0).x;Y-=t;for(let e=d.count;e--;)d.glyphAt(e).x-=t;break}}d&&(V.isSoftWrapped=!0,V=d,Z.push(V),_=B)}let f=V.glyphAt(V.count);f.glyphObj=t,f.x=r+Y,f.width=l,f.charIndex=a,"\n"===o&&(V=new h,Z.push(V),Y=-(r+l+p*c)+v)})),Z.forEach((e=>{for(let t=e.count;t--;){let{glyphObj:r,x:n,width:a}=e.glyphAt(t);if(!r.isWhitespace)return e.width=n+a,void(e.width>_&&(_=e.width))}}));let z=0,q=0;if(y&&("number"===typeof y?z=-y:"string"===typeof y&&(z=-_*("left"===y?0:"center"===y?.5:"right"===y?1:u(y)))),F)if("number"===typeof F)q=-F;else if("string"===typeof F){let e=Z.length*A;q="top"===F?0:"top-baseline"===F?-X:"middle"===F?e/2:"bottom"===F?e:"bottom-baseline"===F?e-j+P*N:u(F)*e}if(!G){const n=t.getEmbeddingLevels(e,m);a=new Uint16Array(L),l=new Float32Array(2*L),U={},w=[o,o,-1/0,-1/0],k=[];let i=X;M&&(R=new Float32Array(3*e.length)),T&&(I=new Uint8Array(3*L));let s,c,u=0,f=-1,h=-1;if(Z.forEach(((p,B)=>{let{count:m,width:v}=p;if(m>0){let A=0;for(let e=m;e--&&p.glyphAt(e).glyphObj.isWhitespace;)A++;let B=0,C=0;if("center"===g)B=(_-v)/2;else if("right"===g)B=_-v;else if("justify"===g&&p.isSoftWrapped){let e=0;for(let t=m-A;t--;)p.glyphAt(t).glyphObj.isWhitespace&&e++;C=(_-v)/e}if(C||B){let e=0;for(let t=0;t<m;t++){let r=p.glyphAt(t);const n=r.glyphObj;r.x+=B+e,0!==C&&n.isWhitespace&&t<m-A&&(e+=C,r.width+=C)}}const b=t.getReorderSegments(e,n,p.glyphAt(0).charIndex,p.glyphAt(p.count-1).charIndex);for(let e=0;e<b.length;e++){const[t,r]=b[e];let n=1/0,a=-1/0;for(let e=0;e<m;e++)if(p.glyphAt(e).charIndex>=t){let t=e,o=e;for(;o<m;o++){let e=p.glyphAt(o);if(e.charIndex>r)break;o<m-A&&(n=Math.min(n,e.x),a=Math.max(a,e.x+e.width))}for(let e=t;e<o;e++){const t=p.glyphAt(e);t.x=a-(t.x+t.width-n)}break}}let y;const F=e=>y=e;for(let g=0;g<m;g++){let A=p.glyphAt(g);y=A.glyphObj;const B=y.index,m=1&n.levels[A.charIndex];if(m){const n=t.getMirroredCharacter(e[A.charIndex]);n&&r.forEachGlyph(n,0,0,F)}if(M){const{charIndex:e}=A,t=A.x+z,r=A.x+A.width+z;R[3*e]=m?r:t,R[3*e+1]=m?t:r,R[3*e+2]=i+W+q;const n=e-f;n>1&&d(R,f,n),f=e}if(T){const{charIndex:e}=A;for(;e>h;)h++,T.hasOwnProperty(h)&&(c=T[h])}if(!y.isWhitespace&&!y.isEmpty){const e=u++;U[B]||(U[B]={path:y.path,pathBounds:[y.xMin,y.yMin,y.xMax,y.yMax]});const t=A.x+z,r=i+q;l[2*e]=t,l[2*e+1]=r;const n=t+y.xMin*N,d=r+y.yMin*N,f=t+y.xMax*N,h=r+y.yMax*N;n<w[0]&&(w[0]=n),d<w[1]&&(w[1]=d),f>w[2]&&(w[2]=f),h>w[3]&&(w[3]=h),e%E===0&&(s={start:e,end:e,rect:[o,o,-1/0,-1/0]},k.push(s)),s.end++;const p=s.rect;if(n<p[0]&&(p[0]=n),d<p[1]&&(p[1]=d),f>p[2]&&(p[2]=f),h>p[3]&&(p[3]=h),a[e]=B,T){const t=3*e;I[t]=c>>16&255,I[t+1]=c>>8&255,I[t+2]=255&c}}}}i-=A})),R){const t=e.length-f;t>1&&d(R,f,t)}}D.typesetting=f()-K,x({glyphIds:a,glyphPositions:l,glyphData:U,caretPositions:R,caretHeight:Q,glyphColors:I,chunkedBounds:k,fontSize:c,unitsPerEm:J,ascender:O*N,descender:P*N,lineHeight:A,topBaseline:X,blockBounds:[z,q-Z.length*A,z+_,q],visibleBounds:w,timings:D})}))}function u(e){let t=e.match(/^([\d.]+)%$/),r=t?parseFloat(t[1]):NaN;return isNaN(r)?0:r/100}function d(e,t,r){const n=e[3*t],a=e[3*t+1],o=e[3*t+2],i=(a-n)/r;for(let s=0;s<r;s++){const r=3*(t+s);e[r]=n+i*s,e[r+1]=n+i*(s+1),e[r+2]=o}}function f(){return(self.performance||Date).now()}function h(){this.data=[]}const p=["glyphObj","x","width","charIndex"];return h.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/p.length)},glyphAt(e){let t=h.flyweight;return t.data=this.data,t.index=e,t},splitAt(e){let t=new h;return t.data=this.data.splice(e*p.length),t}},h.flyweight=p.reduce(((e,t,r,n)=>(Object.defineProperty(e,t,{get(){return this.data[this.index*p.length+r]},set(e){this.data[this.index*p.length+r]=e}}),e)),{data:null,index:0}),{typeset:c,measure:function(e,t){c(e,(e=>{const[r,n,a,o]=e.blockBounds;t({width:a-r,height:o-n})}),{metricsOnly:!0})},loadFont:l}},y],init(e,t,r,n){const{defaultFontURL:a}=e;return r(t,n(),{defaultFontURL:a})}}),ee=m({name:"Typesetter",dependencies:[$,C],init:(e,t)=>function(r){const n=new t;return e.typeset(r,n.resolve),n},getTransferables(e){const t=[e.glyphPositions.buffer,e.glyphIds.buffer];return e.caretPositions&&t.push(e.caretPositions.buffer),e.glyphColors&&t.push(e.glyphColors.buffer),t}});const te=(()=>{const e={};const t="aTroikaGlyphIndex";class r extends o.InstancedBufferGeometry{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new o.Sphere,this.boundingBox=new o.Box3}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===o.BackSide?t/2:0,e===o.DoubleSide?t:t/2)}set detail(t){if(t!==this._detail){this._detail=t,("number"!==typeof t||t<1)&&(t=1);let r=function(t){let r=e[t];if(!r){const n=new o.PlaneBufferGeometry(1,1,t,t),a=n.clone(),i=n.attributes,s=a.attributes,l=new o.BufferGeometry,c=i.uv.count;for(let e=0;e<c;e++)s.position.array[3*e]*=-1,s.normal.array[3*e+2]*=-1;["position","normal","uv"].forEach((e=>{l.setAttribute(e,new o.Float32BufferAttribute([...i[e].array,...s[e].array],i[e].itemSize))})),l.setIndex([...n.index.array,...a.index.array.map((e=>e+c))]),l.translate(.5,.5,0),r=e[t]=l}return r}(t);["position","normal","uv"].forEach((e=>{this.attributes[e]=r.attributes[e].clone()})),this.setIndex(r.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,r,o,i,s){n(this,"aTroikaGlyphBounds",e,4),n(this,t,r,1),n(this,"aTroikaGlyphColor",s,3),this._blockBounds=o,this._chunkedBounds=i,a(this,r.length),this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:r}=this;if(t){const{PI:n,floor:a,min:o,max:i,sin:s,cos:l}=Math,c=n/2,u=2*n,d=Math.abs(t),f=e[0]/d,h=e[2]/d,p=a((f+c)/u)!==a((h+c)/u)?-d:o(s(f)*d,s(h)*d),A=a((f-c)/u)!==a((h-c)/u)?d:i(s(f)*d,s(h)*d),B=a((f+n)/u)!==a((h+n)/u)?2*d:i(d-l(f)*d,d-l(h)*d);r.min.set(p,e[1],t<0?-B:0),r.max.set(A,e[3],t<0?0:B)}else r.min.set(e[0],e[1],0),r.max.set(e[2],e[3],0);r.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let r=this.getAttribute(t).count,n=this._chunkedBounds;if(n)for(let t=n.length;t--;){r=n[t].end;let a=n[t].rect;if(a[1]<e.w&&a[3]>e.y&&a[0]<e.z&&a[2]>e.x)break}a(this,r)}}function n(e,t,r,n){const a=e.getAttribute(t);r?a&&a.array.length===r.length?(a.array.set(r),a.needsUpdate=!0):(e.setAttribute(t,new o.InstancedBufferAttribute(r,n)),delete e._maxInstanceCount,e.dispose()):a&&e.deleteAttribute(t)}function a(e,t){e[e.hasOwnProperty("instanceCount")?"instanceCount":"maxInstancedCount"]=t}return r.prototype.setAttribute||(r.prototype.setAttribute=function(e,t){return this.attributes[e]=t,this}),r})();const re=(()=>{const e=new o.MeshBasicMaterial({color:16777215,side:o.DoubleSide,transparent:!0}),t=8421504,r=new o.Matrix4,n=new o.Vector3,a=new o.Vector3,i=[],s=new o.Vector3,l="+x+y";function c(e){return Array.isArray(e)?e[0]:e}let u=()=>{const t=new o.Mesh(new o.PlaneBufferGeometry(1,1),e);return u=()=>t,t},d=()=>{const t=new o.Mesh(new o.PlaneBufferGeometry(1,1,32,1),e);return d=()=>t,t};const f={type:"syncstart"},h={type:"synccomplete"},p=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],A=p.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class B extends o.Mesh{constructor(){super(new te,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=t,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=l,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(f),Y({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},(t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const r=this._queuedSyncs;r&&(this._queuedSyncs=null,this._needsSync=!0,this.sync((()=>{r.forEach((e=>e&&e()))}))),this.dispatchEvent(h),e&&e()}))))}onBeforeRender(e,t,r,n,a,i){this.sync(),a.isTroikaTextMaterial&&this._prepareForRender(a),a._hadOwnSide=a.hasOwnProperty("side"),this.geometry.setSide(a._actualSide=a.side),a.side=o.FrontSide}onAfterRender(e,t,r,n,a,o){a._hadOwnSide?a.side=a._actualSide:delete a.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let t=this._derivedMaterial;const r=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=e.clone());if(t&&t.baseMaterial===r||(t=this._derivedMaterial=function(e){const t=U(e,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new o.Vector2},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new o.Vector4(0,0,0,0)},uTroikaClipRect:{value:new o.Vector4(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new o.Vector2},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new o.Color},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new o.Matrix3},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:"\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaBlurRadius;\nuniform vec2 uTroikaPositionOffset;\nuniform float uTroikaCurveRadius;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n",vertexTransform:"\nvec4 bounds = aTroikaGlyphBounds;\nbounds.xz += uTroikaPositionOffset.x;\nbounds.yw -= uTroikaPositionOffset.y;\n\nvec4 outlineBounds = vec4(\n  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,\n  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius\n);\nvec4 clippedBounds = vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\n\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nfloat rad = uTroikaCurveRadius;\nif (rad != 0.0) {\n  float angle = position.x / rad;\n  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\n  normal.xz = vec2(sin(angle), cos(angle));\n}\n  \nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerSquare * vec2(\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\n",fragmentDefs:"\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaFillOpacity;\nuniform float uTroikaOutlineOpacity;\nuniform float uTroikaBlurRadius;\nuniform vec3 uTroikaStrokeColor;\nuniform float uTroikaStrokeWidth;\nuniform float uTroikaStrokeOpacity;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of exponential encoding in webgl-sdf-generator\n  \n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\n  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\n  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetAADist() {\n  \n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  return vTroikaGlyphDimensions.x / 64.0;\n  #endif\n}\n\nfloat troikaGetFragDistValue() {\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n \n  // Extrapolate distance when outside bounds:\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  \n\n  return distance;\n}\n\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(-distanceOffset, -distance);\n  #else\n\n  float alpha = smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n\n  return alpha;\n}\n",fragmentColorTransform:"\nfloat aaDist = troikaGetAADist();\nfloat fragDistance = troikaGetFragDistValue();\nfloat edgeAlpha = uTroikaSDFDebug ?\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));\n\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\nvec4 fillRGBA = gl_FragColor;\nfillRGBA.a *= uTroikaFillOpacity;\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\n  -uTroikaStrokeWidth - aaDist,\n  -uTroikaStrokeWidth + aaDist,\n  fragDistance\n));\ngl_FragColor.a *= edgeAlpha;\n#endif\n\nif (edgeAlpha == 0.0) {\n  discard;\n}\n",customRewriter({vertexShader:e,fragmentShader:t}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(t)&&(t=t.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(e)||(e=e.replace(F,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:e,fragmentShader:t}}});return t.transparent=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),t}(r),r.addEventListener("dispose",(function e(){r.removeEventListener("dispose",e),t.dispose()}))),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let e=t._outlineMtl;return e||(e=t._outlineMtl=Object.create(t,{id:{value:t.id+.1}}),e.isTextOutlineMaterial=!0,e.depthWrite=!1,e.map=null,t.addEventListener("dispose",(function r(){t.removeEventListener("dispose",r),e.dispose()}))),[e,t]}return t}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return c(this.material).getDepthMaterial()}get customDistanceMaterial(){return c(this.material).getDistanceMaterial()}_prepareForRender(e){const i=e.isTextOutlineMaterial,c=e.uniforms,u=this.textRenderInfo;if(u){const{sdfTexture:e,blockBounds:r}=u;c.uTroikaSDFTexture.value=e,c.uTroikaSDFTextureSize.value.set(e.image.width,e.image.height),c.uTroikaSDFGlyphSize.value=u.sdfGlyphSize,c.uTroikaSDFExponent.value=u.sdfExponent,c.uTroikaTotalBounds.value.fromArray(r),c.uTroikaUseGlyphColors.value=!i&&!!u.glyphColors;let n,a,o,s=0,l=0,d=0,f=0,h=0;if(i){let{outlineWidth:e,outlineOffsetX:t,outlineOffsetY:r,outlineBlur:a,outlineOpacity:o}=this;s=this._parsePercent(e)||0,l=Math.max(0,this._parsePercent(a)||0),n=o,f=this._parsePercent(t)||0,h=this._parsePercent(r)||0}else d=Math.max(0,this._parsePercent(this.strokeWidth)||0),d&&(o=this.strokeColor,c.uTroikaStrokeColor.value.set(null==o?t:o),a=this.strokeOpacity,null==a&&(a=1)),n=this.fillOpacity;c.uTroikaDistanceOffset.value=s,c.uTroikaPositionOffset.value.set(f,h),c.uTroikaBlurRadius.value=l,c.uTroikaStrokeWidth.value=d,c.uTroikaStrokeOpacity.value=a,c.uTroikaFillOpacity.value=null==n?1:n,c.uTroikaCurveRadius.value=this.curveRadius||0;let p=this.clipRect;if(p&&Array.isArray(p)&&4===p.length)c.uTroikaClipRect.value.fromArray(p);else{const e=100*(this.fontSize||.1);c.uTroikaClipRect.value.set(r[0]-e,r[1]-e,r[2]+e,r[3]+e)}this.geometry.applyClipRect(c.uTroikaClipRect.value)}c.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const d=i?this.outlineColor||0:this.color;if(null==d)delete e.color;else{const t=e.hasOwnProperty("color")?e.color:e.color=new o.Color;d===t._input&&"object"!==typeof d||t.set(t._input=d)}let f=this.orientation||l;if(f!==e._orientation){let t=c.uTroikaOrient.value;f=f.replace(/[^-+xyz]/g,"");let o=f!==l&&f.match(/^([-+])([xyz])([-+])([xyz])$/);if(o){let[,e,i,l,c]=o;n.set(0,0,0)[i]="-"===e?1:-1,a.set(0,0,0)[c]="-"===l?-1:1,r.lookAt(s,n.cross(a),a),t.setFromMatrix4(r)}else t.identity();e._orientation=f}}_parsePercent(e){if("string"===typeof e){let t=e.match(/^(-?[\d.]+)%$/),r=t?parseFloat(t[1]):NaN;e=(isNaN(r)?0:r/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new o.Vector2){t.copy(e);const r=this.curveRadius;return r&&(t.x=Math.atan2(e.x,Math.abs(r)-Math.abs(e.z))*Math.abs(r)),t}worldPositionToTextCoords(e,t=new o.Vector2){return n.copy(e),this.localPositionToTextCoords(this.worldToLocal(n),t)}raycast(e,t){const{textRenderInfo:r,curveRadius:n}=this;if(r){const a=r.blockBounds,o=n?d():u(),s=o.geometry,{position:l,uv:c}=s.attributes;for(let e=0;e<c.count;e++){let t=a[0]+c.getX(e)*(a[2]-a[0]);const r=a[1]+c.getY(e)*(a[3]-a[1]);let o=0;n&&(o=n-Math.cos(t/n)*n,t=Math.sin(t/n)*n),l.setXYZ(e,t,r,o)}s.boundingSphere=this.geometry.boundingSphere,s.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,i.length=0,o.raycast(e,i);for(let e=0;e<i.length;e++)i[e].object=this,t.push(i[e])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,A.forEach((t=>{this[t]=e[t]})),this}clone(){return(new this.constructor).copy(this)}}p.forEach((e=>{const t="_private_"+e;Object.defineProperty(B.prototype,e,{get(){return this[t]},set(e){e!==this[t]&&(this[t]=e,this._needsSync=!0)}})}));let m=!1;return Object.defineProperty(B.prototype,"anchor",{get(){return this._deprecated_anchor},set(e){this._deprecated_anchor=e,m||(console.warn("TextMesh: `anchor` has been deprecated; use `anchorX` and `anchorY` instead."),m=!0),Array.isArray(e)?(this.anchorX=100*(+e[0]||0)+"%",this.anchorY=100*(+e[1]||0)+"%"):this.anchorX=this.anchorY=0}}),B})();new WeakMap;new WeakMap;var ne=r(88057),ae=r(94881);const oe=a.forwardRef((({anchorX:e="center",anchorY:t="middle",font:r,children:o,characters:i,onSync:s,...l},c)=>{const u=(0,ne.w)((({invalidate:e})=>e)),[d]=a.useState((()=>new re)),[f,h]=a.useMemo((()=>{const e=[];let t="";return a.Children.forEach(o,(r=>{"string"===typeof r||"number"===typeof r?t+=r:e.push(r)})),[e,t]}),[o]);return(0,ae.Rq)((()=>new Promise((e=>function({font:e,characters:t,sdfGlyphSize:r},n){Y({font:e,sdfGlyphSize:r,text:Array.isArray(t)?t.join("\n"):""+t},n)}({font:r,characters:i},e)))),["troika-text",r,i]),a.useLayoutEffect((()=>{d.sync((()=>{u(),s&&s(d)}))})),a.useEffect((()=>()=>d.dispose()),[d]),a.createElement("primitive",(0,n.Z)({object:d,ref:c,font:r,text:h,anchorX:e,anchorY:t},l),f)}))},18626:function(e,t,r){"use strict";r.d(t,{L:function(){return de}});var n=r(26173);const a=new WeakMap;class o extends n.Loader{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,a){const o=new n.FileLoader(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(e=>{const r={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,r).then(t).catch(a)}),r,a)}decodeDracoFile(e,t,r,n){const a={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:n||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,a).then(t)}decodeGeometry(e,t){for(const a in t.attributeTypes){const e=t.attributeTypes[a];void 0!==e.BYTES_PER_ELEMENT&&(t.attributeTypes[a]=e.name)}const r=JSON.stringify(t);if(a.has(e)){const t=a.get(e);if(t.key===r)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let n;const o=this.workerNextTaskID++,i=e.byteLength,s=this._getWorker(o,i).then((r=>(n=r,new Promise(((r,a)=>{n._callbacks[o]={resolve:r,reject:a},n.postMessage({type:"decode",id:o,taskConfig:t,buffer:e},[e])}))))).then((e=>this._createGeometry(e.geometry)));return s.catch((()=>!0)).then((()=>{n&&o&&this._releaseTask(n,o)})),a.set(e,{key:r,promise:s}),s}_createGeometry(e){const t=new n.BufferGeometry;e.index&&t.setIndex(new n.BufferAttribute(e.index.array,1));for(let r=0;r<e.attributes.length;r++){const a=e.attributes[r],o=a.name,i=a.array,s=a.itemSize;t.setAttribute(o,new n.BufferAttribute(i,s))}return t}_loadLibrary(e,t){const r=new n.FileLoader(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise(((t,n)=>{r.load(e,t,void 0,n)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then((t=>{const r=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const n=i.toString(),a=["/* draco decoder */",r,"","/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([a]))})),this.decoderPending}_getWorker(e,t){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){const r=t.data;switch(r.type){case"decode":e._callbacks[r.id].resolve(r);break;case"error":e._callbacks[r.id].reject(r);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+r.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));const r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r}))}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map((e=>e._taskLoad)))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function i(){let e,t;function r(e,t,r,n,a,o){const i=o.num_components(),s=r.num_points()*i,l=s*a.BYTES_PER_ELEMENT,c=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,a),u=e._malloc(l);t.GetAttributeDataArrayForAllPoints(r,o,c,l,u);const d=new a(e.HEAPF32.buffer,u,s).slice();return e._free(u),{name:n,array:d,itemSize:i}}onmessage=function(n){const a=n.data;switch(a.type){case"init":e=a.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":const n=a.buffer,o=a.taskConfig;t.then((e=>{const t=e.draco,i=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(n),n.byteLength);try{const e=function(e,t,n,a){const o=a.attributeIDs,i=a.attributeTypes;let s,l;const c=t.GetEncodedGeometryType(n);if(c===e.TRIANGULAR_MESH)s=new e.Mesh,l=t.DecodeBufferToMesh(n,s);else{if(c!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");s=new e.PointCloud,l=t.DecodeBufferToPointCloud(n,s)}if(!l.ok()||0===s.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+l.error_msg());const u={index:null,attributes:[]};for(const d in o){const n=self[i[d]];let l,c;if(a.useUniqueIDs)c=o[d],l=t.GetAttributeByUniqueId(s,c);else{if(c=t.GetAttributeId(s,e[o[d]]),-1===c)continue;l=t.GetAttribute(s,c)}u.attributes.push(r(e,t,s,d,n,l))}c===e.TRIANGULAR_MESH&&(u.index=function(e,t,r){const n=3*r.num_faces(),a=4*n,o=e._malloc(a);t.GetTrianglesUInt32Array(r,a,o);const i=new Uint32Array(e.HEAPF32.buffer,o,n).slice();return e._free(o),{array:i,itemSize:1}}(e,t,s));return e.destroy(s),u}(t,i,s,o),n=e.attributes.map((e=>e.array.buffer));e.index&&n.push(e.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:e},n)}catch(l){console.error(l),self.postMessage({type:"error",id:a.id,error:l.message})}finally{t.destroy(s),t.destroy(i)}}))}}}let s;const l=()=>{if(s)return s;const e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!==typeof WebAssembly)return{supported:!1};let r,n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB";WebAssembly.validate(e)&&(n="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");const a=WebAssembly.instantiate(function(e){const r=new Uint8Array(e.length);for(let t=0;t<e.length;++t){const n=e.charCodeAt(t);r[t]=n>96?n-71:n>64?n-65:n>47?n+4:n>46?63:62}let n=0;for(let a=0;a<e.length;++a)r[n++]=r[a]<60?t[r[a]]:64*(r[a]-60)+r[++a];return r.buffer.slice(0,n)}(n),{}).then((e=>{r=e.instance,r.exports.__wasm_call_ctors()}));function o(e,t,n,a,o,i){const s=r.exports.sbrk,l=n+3&-4,c=s(l*a),u=s(o.length),d=new Uint8Array(r.exports.memory.buffer);d.set(o,u);const f=e(c,n,a,u,o.length);if(0===f&&i&&i(c,l,a),t.set(d.subarray(c,c+n*a)),s(c-s(0)),0!==f)throw new Error(`Malformed buffer data: ${f}`)}const i={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},l={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return s={ready:a,supported:!0,decodeVertexBuffer(e,t,n,a,s){o(r.exports.meshopt_decodeVertexBuffer,e,t,n,a,r.exports[i[s]])},decodeIndexBuffer(e,t,n,a){o(r.exports.meshopt_decodeIndexBuffer,e,t,n,a)},decodeIndexSequence(e,t,n,a){o(r.exports.meshopt_decodeIndexSequence,e,t,n,a)},decodeGltfBuffer(e,t,n,a,s,c){o(r.exports[l[s]],e,t,n,a,r.exports[i[c]])}},s};class c extends n.Loader{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new p(e)})),this.register((function(e){return new C(e)})),this.register((function(e){return new b(e)})),this.register((function(e){return new A(e)})),this.register((function(e){return new B(e)})),this.register((function(e){return new m(e)})),this.register((function(e){return new g(e)})),this.register((function(e){return new v(e)})),this.register((function(e){return new f(e)})),this.register((function(e){return new y(e)}))}load(e,t,r,a){const o=this;let i;i=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:n.LoaderUtils.extractUrlBase(e),this.manager.itemStart(e);const s=function(t){a?a(t):console.error(t),o.manager.itemError(e),o.manager.itemEnd(e)},l=new n.FileLoader(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,(function(r){try{o.parse(r,i,(function(r){t(r),o.manager.itemEnd(e)}),s)}catch(n){s(n)}}),r,s)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,r,a){let o;const i={},s={};if("string"===typeof e)o=e;else{if(n.LoaderUtils.decodeText(new Uint8Array(e,0,4))===F){try{i[d.KHR_BINARY_GLTF]=new T(e)}catch(u){return void(a&&a(u))}o=i[d.KHR_BINARY_GLTF].content}else o=n.LoaderUtils.decodeText(new Uint8Array(e))}const l=JSON.parse(o);if(void 0===l.asset||l.asset.version[0]<2)return void(a&&a(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new ae(l,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let n=0;n<this.pluginCallbacks.length;n++){const e=this.pluginCallbacks[n](c);s[e.name]=e,i[e.name]=!0}if(l.extensionsUsed)for(let n=0;n<l.extensionsUsed.length;++n){const e=l.extensionsUsed[n],t=l.extensionsRequired||[];switch(e){case d.KHR_MATERIALS_UNLIT:i[e]=new h;break;case d.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:i[e]=new D;break;case d.KHR_DRACO_MESH_COMPRESSION:i[e]=new x(l,this.dracoLoader);break;case d.KHR_TEXTURE_TRANSFORM:i[e]=new G;break;case d.KHR_MESH_QUANTIZATION:i[e]=new U;break;default:t.indexOf(e)>=0&&void 0===s[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}c.setExtensions(i),c.setPlugins(s),c.parse(r,a)}parseAsync(e,t){const r=this;return new Promise((function(n,a){r.parse(e,t,n,a)}))}}function u(){let e={};return{get:function(t){return e[t]},add:function(t,r){e[t]=r},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const d={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class f{constructor(e){this.parser=e,this.name=d.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let r=0,n=t.length;r<n;r++){const n=t[r];n.extensions&&n.extensions[this.name]&&void 0!==n.extensions[this.name].light&&e._addNodeRef(this.cache,n.extensions[this.name].light)}}_loadLight(e){const t=this.parser,r="light:"+e;let a=t.cache.get(r);if(a)return a;const o=t.json,i=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e];let s;const l=new n.Color(16777215);void 0!==i.color&&l.fromArray(i.color);const c=void 0!==i.range?i.range:0;switch(i.type){case"directional":s=new n.DirectionalLight(l),s.target.position.set(0,0,-1),s.add(s.target);break;case"point":s=new n.PointLight(l),s.distance=c;break;case"spot":s=new n.SpotLight(l),s.distance=c,i.spot=i.spot||{},i.spot.innerConeAngle=void 0!==i.spot.innerConeAngle?i.spot.innerConeAngle:0,i.spot.outerConeAngle=void 0!==i.spot.outerConeAngle?i.spot.outerConeAngle:Math.PI/4,s.angle=i.spot.outerConeAngle,s.penumbra=1-i.spot.innerConeAngle/i.spot.outerConeAngle,s.target.position.set(0,0,-1),s.add(s.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+i.type)}return s.position.set(0,0,0),s.decay=2,void 0!==i.intensity&&(s.intensity=i.intensity),s.name=t.createUniqueName(i.name||"light_"+e),a=Promise.resolve(s),t.cache.add(r,a),a}createNodeAttachment(e){const t=this,r=this.parser,n=r.json.nodes[e],a=(n.extensions&&n.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then((function(e){return r._getNodeRef(t.cache,a,e)}))}}class h{constructor(){this.name=d.KHR_MATERIALS_UNLIT}getMaterialType(){return n.MeshBasicMaterial}extendParams(e,t,r){const a=[];e.color=new n.Color(1,1,1),e.opacity=1;const o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const t=o.baseColorFactor;e.color.fromArray(t),e.opacity=t[3]}void 0!==o.baseColorTexture&&a.push(r.assignTexture(e,"map",o.baseColorTexture))}return Promise.all(a)}}class p{constructor(e){this.parser=e,this.name=d.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const r=this.parser,a=r.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const o=[],i=a.extensions[this.name];if(void 0!==i.clearcoatFactor&&(t.clearcoat=i.clearcoatFactor),void 0!==i.clearcoatTexture&&o.push(r.assignTexture(t,"clearcoatMap",i.clearcoatTexture)),void 0!==i.clearcoatRoughnessFactor&&(t.clearcoatRoughness=i.clearcoatRoughnessFactor),void 0!==i.clearcoatRoughnessTexture&&o.push(r.assignTexture(t,"clearcoatRoughnessMap",i.clearcoatRoughnessTexture)),void 0!==i.clearcoatNormalTexture&&(o.push(r.assignTexture(t,"clearcoatNormalMap",i.clearcoatNormalTexture)),void 0!==i.clearcoatNormalTexture.scale)){const e=i.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new n.Vector2(e,e)}return Promise.all(o)}}class A{constructor(e){this.parser=e,this.name=d.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const r=this.parser,a=r.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const o=[];t.sheenColor=new n.Color(0,0,0),t.sheenRoughness=0,t.sheen=1;const i=a.extensions[this.name];return void 0!==i.sheenColorFactor&&t.sheenColor.fromArray(i.sheenColorFactor),void 0!==i.sheenRoughnessFactor&&(t.sheenRoughness=i.sheenRoughnessFactor),void 0!==i.sheenColorTexture&&o.push(r.assignTexture(t,"sheenColorMap",i.sheenColorTexture)),void 0!==i.sheenRoughnessTexture&&o.push(r.assignTexture(t,"sheenRoughnessMap",i.sheenRoughnessTexture)),Promise.all(o)}}class B{constructor(e){this.parser=e,this.name=d.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const a=[],o=n.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&a.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(a)}}class m{constructor(e){this.parser=e,this.name=d.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const r=this.parser,a=r.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const o=[],i=a.extensions[this.name];t.thickness=void 0!==i.thicknessFactor?i.thicknessFactor:0,void 0!==i.thicknessTexture&&o.push(r.assignTexture(t,"thicknessMap",i.thicknessTexture)),t.attenuationDistance=i.attenuationDistance||0;const s=i.attenuationColor||[1,1,1];return t.attenuationColor=new n.Color(s[0],s[1],s[2]),Promise.all(o)}}class g{constructor(e){this.parser=e,this.name=d.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const n=r.extensions[this.name];return t.ior=void 0!==n.ior?n.ior:1.5,Promise.resolve()}}class v{constructor(e){this.parser=e,this.name=d.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const r=this.parser,a=r.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const o=[],i=a.extensions[this.name];t.specularIntensity=void 0!==i.specularFactor?i.specularFactor:1,void 0!==i.specularTexture&&o.push(r.assignTexture(t,"specularIntensityMap",i.specularTexture));const s=i.specularColorFactor||[1,1,1];return t.specularColor=new n.Color(s[0],s[1],s[2]),void 0!==i.specularColorTexture&&o.push(r.assignTexture(t,"specularColorMap",i.specularColorTexture).then((function(e){e.encoding=n.sRGBEncoding}))),Promise.all(o)}}class C{constructor(e){this.parser=e,this.name=d.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,r=t.json,n=r.textures[e];if(!n.extensions||!n.extensions[this.name])return null;const a=n.extensions[this.name],o=r.images[a.source],i=t.options.ktx2Loader;if(!i){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o,i)}}class b{constructor(e){this.parser=e,this.name=d.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,r=this.parser,n=r.json,a=n.textures[e];if(!a.extensions||!a.extensions[t])return null;const o=a.extensions[t],i=n.images[o.source];let s=r.textureLoader;if(i.uri){const e=r.options.manager.getHandler(i.uri);null!==e&&(s=e)}return this.detectSupport().then((function(a){if(a)return r.loadTextureImage(e,i,s);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class y{constructor(e){this.name=d.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){const e=r.extensions[this.name],n=this.parser.getDependency("buffer",e.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([n,a.ready]).then((function(t){const r=e.byteOffset||0,n=e.byteLength||0,o=e.count,i=e.byteStride,s=new ArrayBuffer(o*i),l=new Uint8Array(t[0],r,n);return a.decodeGltfBuffer(new Uint8Array(s),o,i,l,e.mode,e.filter),s}))}return null}}const F="glTF",M=1313821514,E=5130562;class T{constructor(e){this.name=d.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:n.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==F)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,a=new DataView(e,12);let o=0;for(;o<r;){const t=a.getUint32(o,!0);o+=4;const r=a.getUint32(o,!0);if(o+=4,r===M){const r=new Uint8Array(e,12+o,t);this.content=n.LoaderUtils.decodeText(r)}else if(r===E){const r=12+o;this.body=e.slice(r,r+t)}o+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class x{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=d.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const r=this.json,n=this.dracoLoader,a=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,i={},s={},l={};for(const c in o){const e=Q[c]||c.toLowerCase();i[e]=o[c]}for(const c in e.attributes){const t=Q[c]||c.toLowerCase();if(void 0!==o[c]){const n=r.accessors[e.attributes[c]],a=K[n.componentType];l[t]=a,s[t]=!0===n.normalized}}return t.getDependency("bufferView",a).then((function(e){return new Promise((function(t){n.decodeDracoFile(e,(function(e){for(const t in e.attributes){const r=e.attributes[t],n=s[t];void 0!==n&&(r.normalized=n)}t(e)}),i,l)}))}))}}class G{constructor(){this.name=d.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class S extends n.MeshStandardMaterial{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),r=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),a=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),o=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),i=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),s={specular:{value:(new n.Color).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=s,this.onBeforeCompile=function(e){for(const t in s)e.uniforms[t]=s[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",r).replace("#include <roughnessmap_fragment>",a).replace("#include <metalnessmap_fragment>",o).replace("#include <lights_physical_fragment>",i)},Object.defineProperties(this,{specular:{get:function(){return s.specular.value},set:function(e){s.specular.value=e}},specularMap:{get:function(){return s.specularMap.value},set:function(e){s.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return s.glossiness.value},set:function(e){s.glossiness.value=e}},glossinessMap:{get:function(){return s.glossinessMap.value},set:function(e){s.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class D{constructor(){this.name=d.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return S}extendParams(e,t,r){const a=t.extensions[this.name];e.color=new n.Color(1,1,1),e.opacity=1;const o=[];if(Array.isArray(a.diffuseFactor)){const t=a.diffuseFactor;e.color.fromArray(t),e.opacity=t[3]}if(void 0!==a.diffuseTexture&&o.push(r.assignTexture(e,"map",a.diffuseTexture)),e.emissive=new n.Color(0,0,0),e.glossiness=void 0!==a.glossinessFactor?a.glossinessFactor:1,e.specular=new n.Color(1,1,1),Array.isArray(a.specularFactor)&&e.specular.fromArray(a.specularFactor),void 0!==a.specularGlossinessTexture){const t=a.specularGlossinessTexture;o.push(r.assignTexture(e,"glossinessMap",t)),o.push(r.assignTexture(e,"specularMap",t))}return Promise.all(o)}createMaterial(e){const t=new S(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=n.TangentSpaceNormalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class U{constructor(){this.name=d.KHR_MESH_QUANTIZATION}}class I extends n.Interpolant{constructor(e,t,r,n){super(e,t,r,n)}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,a=e*n*3+n;for(let o=0;o!==n;o++)t[o]=r[a+o];return t}}I.prototype.beforeStart_=I.prototype.copySampleValue_,I.prototype.afterEnd_=I.prototype.copySampleValue_,I.prototype.interpolate_=function(e,t,r,n){const a=this.resultBuffer,o=this.sampleValues,i=this.valueSize,s=2*i,l=3*i,c=n-t,u=(r-t)/c,d=u*u,f=d*u,h=e*l,p=h-l,A=-2*f+3*d,B=f-d,m=1-A,g=B-d+u;for(let v=0;v!==i;v++){const e=o[p+v+i],t=o[p+v+s]*c,r=o[h+v+i],n=o[h+v]*c;a[v]=m*e+g*t+A*r+B*n}return a};const R=new n.Quaternion;class w extends I{interpolate_(e,t,r,n){const a=super.interpolate_(e,t,r,n);return R.fromArray(a).normalize().toArray(a),a}}const k=0,_=1,L=2,H=3,O=4,P=5,J=6,K={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},N={9728:n.NearestFilter,9729:n.LinearFilter,9984:n.NearestMipmapNearestFilter,9985:n.LinearMipmapNearestFilter,9986:n.NearestMipmapLinearFilter,9987:n.LinearMipmapLinearFilter},j={33071:n.ClampToEdgeWrapping,33648:n.MirroredRepeatWrapping,10497:n.RepeatWrapping},X={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Q={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},W={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Y={CUBICSPLINE:void 0,LINEAR:n.InterpolateLinear,STEP:n.InterpolateDiscrete},V="OPAQUE",Z="MASK",z="BLEND";function q(e,t,r){for(const n in r.extensions)void 0===e[n]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=r.extensions[n])}function $(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function ee(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let r=0,n=t.weights.length;r<n;r++)e.morphTargetInfluences[r]=t.weights[r];if(t.extras&&Array.isArray(t.extras.targetNames)){const r=t.extras.targetNames;if(e.morphTargetInfluences.length===r.length){e.morphTargetDictionary={};for(let t=0,n=r.length;t<n;t++)e.morphTargetDictionary[r[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function te(e){const t=e.extensions&&e.extensions[d.KHR_DRACO_MESH_COMPRESSION];let r;return r=t?"draco:"+t.bufferView+":"+t.indices+":"+re(t.attributes):e.indices+":"+re(e.attributes)+":"+e.mode,r}function re(e){let t="";const r=Object.keys(e).sort();for(let n=0,a=r.length;n<a;n++)t+=r[n]+":"+e[r[n]]+";";return t}function ne(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class ae{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new u,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},"undefined"!==typeof createImageBitmap&&!1===/Firefox|^((?!chrome|android).)*safari/i.test(navigator.userAgent)?this.textureLoader=new n.ImageBitmapLoader(this.options.manager):this.textureLoader=new n.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new n.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const r=this,n=this.json,a=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([r.getDependencies("scene"),r.getDependencies("animation"),r.getDependencies("camera")])})).then((function(t){const o={scene:t[0][n.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:n.asset,parser:r,userData:{}};q(a,o,n),$(o,n),Promise.all(r._invokeAll((function(e){return e.afterRoot&&e.afterRoot(o)}))).then((function(){e(o)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[];for(let n=0,a=t.length;n<a;n++){const r=t[n].joints;for(let t=0,n=r.length;t<n;t++)e[r[t]].isBone=!0}for(let n=0,a=e.length;n<a;n++){const t=e[n];void 0!==t.mesh&&(this._addNodeRef(this.meshCache,t.mesh),void 0!==t.skin&&(r[t.mesh].isSkinnedMesh=!0)),void 0!==t.camera&&this._addNodeRef(this.cameraCache,t.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,r){if(e.refs[t]<=1)return r;const n=r.clone(),a=(e,t)=>{const r=this.associations.get(e);null!=r&&this.associations.set(t,r);for(const[n,o]of e.children.entries())a(o,t.children[n])};return a(r,n),n.name+="_instance_"+e.uses[t]++,n}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let r=0;r<t.length;r++){const n=e(t[r]);if(n)return n}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const r=[];for(let n=0;n<t.length;n++){const a=e(t[n]);a&&r.push(a)}return r}getDependency(e,t){const r=e+":"+t;let n=this.cache.get(r);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this.loadNode(t);break;case"mesh":n=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":n=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":n=this.loadSkin(t);break;case"animation":n=this.loadAnimation(t);break;case"camera":n=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(r,n)}return n}getDependencies(e){let t=this.cache.get(e);if(!t){const r=this,n=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(n.map((function(t,n){return r.getDependency(e,n)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],r=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[d.KHR_BINARY_GLTF].body);const a=this.options;return new Promise((function(e,o){r.load(n.LoaderUtils.resolveURL(t.uri,a.path),e,void 0,(function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const r=t.byteLength||0,n=t.byteOffset||0;return e.slice(n,n+r)}))}loadAccessor(e){const t=this,r=this.json,a=this.json.accessors[e];if(void 0===a.bufferView&&void 0===a.sparse)return Promise.resolve(null);const o=[];return void 0!==a.bufferView?o.push(this.getDependency("bufferView",a.bufferView)):o.push(null),void 0!==a.sparse&&(o.push(this.getDependency("bufferView",a.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",a.sparse.values.bufferView))),Promise.all(o).then((function(e){const o=e[0],i=X[a.type],s=K[a.componentType],l=s.BYTES_PER_ELEMENT,c=l*i,u=a.byteOffset||0,d=void 0!==a.bufferView?r.bufferViews[a.bufferView].byteStride:void 0,f=!0===a.normalized;let h,p;if(d&&d!==c){const e=Math.floor(u/d),r="InterleavedBuffer:"+a.bufferView+":"+a.componentType+":"+e+":"+a.count;let c=t.cache.get(r);c||(h=new s(o,e*d,a.count*d/l),c=new n.InterleavedBuffer(h,d/l),t.cache.add(r,c)),p=new n.InterleavedBufferAttribute(c,i,u%d/l,f)}else h=null===o?new s(a.count*i):new s(o,u,a.count*i),p=new n.BufferAttribute(h,i,f);if(void 0!==a.sparse){const t=X.SCALAR,r=K[a.sparse.indices.componentType],l=a.sparse.indices.byteOffset||0,c=a.sparse.values.byteOffset||0,u=new r(e[1],l,a.sparse.count*t),d=new s(e[2],c,a.sparse.count*i);null!==o&&(p=new n.BufferAttribute(p.array.slice(),p.itemSize,p.normalized));for(let e=0,n=u.length;e<n;e++){const t=u[e];if(p.setX(t,d[e*i]),i>=2&&p.setY(t,d[e*i+1]),i>=3&&p.setZ(t,d[e*i+2]),i>=4&&p.setW(t,d[e*i+3]),i>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p}))}loadTexture(e){const t=this.json,r=this.options,n=t.textures[e],a=t.images[n.source];let o=this.textureLoader;if(a.uri){const e=r.manager.getHandler(a.uri);null!==e&&(o=e)}return this.loadTextureImage(e,a,o)}loadTextureImage(e,t,r){const a=this,o=this.json,i=this.options,s=o.textures[e],l=(t.uri||t.bufferView)+":"+s.sampler;if(this.textureCache[l])return this.textureCache[l];const c=self.URL||self.webkitURL;let u=t.uri||"",d=!1;if(void 0!==t.bufferView)u=a.getDependency("bufferView",t.bufferView).then((function(e){d=!0;const r=new Blob([e],{type:t.mimeType});return u=c.createObjectURL(r),u}));else if(void 0===t.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const f=Promise.resolve(u).then((function(e){return new Promise((function(t,a){let o=t;!0===r.isImageBitmapLoader&&(o=function(e){const r=new n.Texture(e);r.needsUpdate=!0,t(r)}),r.load(n.LoaderUtils.resolveURL(e,i.path),o,void 0,a)}))})).then((function(t){!0===d&&c.revokeObjectURL(u),t.flipY=!1,s.name&&(t.name=s.name);const r=(o.samplers||{})[s.sampler]||{};return t.magFilter=N[r.magFilter]||n.LinearFilter,t.minFilter=N[r.minFilter]||n.LinearMipmapLinearFilter,t.wrapS=j[r.wrapS]||n.RepeatWrapping,t.wrapT=j[r.wrapT]||n.RepeatWrapping,a.associations.set(t,{textures:e}),t})).catch((function(){return console.error("THREE.GLTFLoader: Couldn't load texture",u),null}));return this.textureCache[l]=f,f}assignTexture(e,t,r){const n=this;return this.getDependency("texture",r.index).then((function(a){if(void 0===r.texCoord||0==r.texCoord||"aoMap"===t&&1==r.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+t+" not yet supported."),n.extensions[d.KHR_TEXTURE_TRANSFORM]){const e=void 0!==r.extensions?r.extensions[d.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=n.associations.get(a);a=n.extensions[d.KHR_TEXTURE_TRANSFORM].extendTexture(a,e),n.associations.set(a,t)}}return e[t]=a,a}))}assignFinalMaterial(e){const t=e.geometry;let r=e.material;const a=void 0===t.attributes.tangent,o=void 0!==t.attributes.color,i=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+r.uuid;let t=this.cache.get(e);t||(t=new n.PointsMaterial,n.Material.prototype.copy.call(t,r),t.color.copy(r.color),t.map=r.map,t.sizeAttenuation=!1,this.cache.add(e,t)),r=t}else if(e.isLine){const e="LineBasicMaterial:"+r.uuid;let t=this.cache.get(e);t||(t=new n.LineBasicMaterial,n.Material.prototype.copy.call(t,r),t.color.copy(r.color),this.cache.add(e,t)),r=t}if(a||o||i){let e="ClonedMaterial:"+r.uuid+":";r.isGLTFSpecularGlossinessMaterial&&(e+="specular-glossiness:"),a&&(e+="derivative-tangents:"),o&&(e+="vertex-colors:"),i&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=r.clone(),o&&(t.vertexColors=!0),i&&(t.flatShading=!0),a&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(r))),r=t}r.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=r}getMaterialType(){return n.MeshStandardMaterial}loadMaterial(e){const t=this,r=this.json,a=this.extensions,o=r.materials[e];let i;const s={},l=o.extensions||{},c=[];if(l[d.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const e=a[d.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];i=e.getMaterialType(),c.push(e.extendParams(s,o,t))}else if(l[d.KHR_MATERIALS_UNLIT]){const e=a[d.KHR_MATERIALS_UNLIT];i=e.getMaterialType(),c.push(e.extendParams(s,o,t))}else{const r=o.pbrMetallicRoughness||{};if(s.color=new n.Color(1,1,1),s.opacity=1,Array.isArray(r.baseColorFactor)){const e=r.baseColorFactor;s.color.fromArray(e),s.opacity=e[3]}void 0!==r.baseColorTexture&&c.push(t.assignTexture(s,"map",r.baseColorTexture)),s.metalness=void 0!==r.metallicFactor?r.metallicFactor:1,s.roughness=void 0!==r.roughnessFactor?r.roughnessFactor:1,void 0!==r.metallicRoughnessTexture&&(c.push(t.assignTexture(s,"metalnessMap",r.metallicRoughnessTexture)),c.push(t.assignTexture(s,"roughnessMap",r.metallicRoughnessTexture))),i=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),c.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,s)}))))}!0===o.doubleSided&&(s.side=n.DoubleSide);const u=o.alphaMode||V;if(u===z?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,u===Z&&(s.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&i!==n.MeshBasicMaterial&&(c.push(t.assignTexture(s,"normalMap",o.normalTexture)),s.normalScale=new n.Vector2(1,1),void 0!==o.normalTexture.scale)){const e=o.normalTexture.scale;s.normalScale.set(e,e)}return void 0!==o.occlusionTexture&&i!==n.MeshBasicMaterial&&(c.push(t.assignTexture(s,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength&&(s.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&i!==n.MeshBasicMaterial&&(s.emissive=(new n.Color).fromArray(o.emissiveFactor)),void 0!==o.emissiveTexture&&i!==n.MeshBasicMaterial&&c.push(t.assignTexture(s,"emissiveMap",o.emissiveTexture)),Promise.all(c).then((function(){let r;return r=i===S?a[d.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s):new i(s),o.name&&(r.name=o.name),r.map&&(r.map.encoding=n.sRGBEncoding),r.emissiveMap&&(r.emissiveMap.encoding=n.sRGBEncoding),$(r,o),t.associations.set(r,{materials:e}),o.extensions&&q(a,r,o),r}))}createUniqueName(e){const t=n.PropertyBinding.sanitizeNodeName(e||"");let r=t;for(let n=1;this.nodeNamesUsed[r];++n)r=t+"_"+n;return this.nodeNamesUsed[r]=!0,r}loadGeometries(e){const t=this,r=this.extensions,a=this.primitiveCache;function o(e){return r[d.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(r){return ie(r,e,t)}))}const i=[];for(let s=0,l=e.length;s<l;s++){const r=e[s],l=te(r),c=a[l];if(c)i.push(c.promise);else{let e;e=r.extensions&&r.extensions[d.KHR_DRACO_MESH_COMPRESSION]?o(r):ie(new n.BufferGeometry,r,t),a[l]={primitive:r,promise:e},i.push(e)}}return Promise.all(i)}loadMesh(e){const t=this,r=this.json,a=this.extensions,o=r.meshes[e],i=o.primitives,s=[];for(let c=0,u=i.length;c<u;c++){const e=void 0===i[c].material?(void 0===(l=this.cache).DefaultMaterial&&(l.DefaultMaterial=new n.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:n.FrontSide})),l.DefaultMaterial):this.getDependency("material",i[c].material);s.push(e)}var l;return s.push(t.loadGeometries(i)),Promise.all(s).then((function(r){const s=r.slice(0,r.length-1),l=r[r.length-1],c=[];for(let d=0,f=l.length;d<f;d++){const r=l[d],u=i[d];let f;const h=s[d];if(u.mode===O||u.mode===P||u.mode===J||void 0===u.mode)f=!0===o.isSkinnedMesh?new n.SkinnedMesh(r,h):new n.Mesh(r,h),!0!==f.isSkinnedMesh||f.geometry.attributes.skinWeight.normalized||f.normalizeSkinWeights(),u.mode===P?f.geometry=se(f.geometry,n.TriangleStripDrawMode):u.mode===J&&(f.geometry=se(f.geometry,n.TriangleFanDrawMode));else if(u.mode===_)f=new n.LineSegments(r,h);else if(u.mode===H)f=new n.Line(r,h);else if(u.mode===L)f=new n.LineLoop(r,h);else{if(u.mode!==k)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+u.mode);f=new n.Points(r,h)}Object.keys(f.geometry.morphAttributes).length>0&&ee(f,o),f.name=t.createUniqueName(o.name||"mesh_"+e),$(f,o),u.extensions&&q(a,f,u),t.assignFinalMaterial(f),c.push(f)}for(let n=0,a=c.length;n<a;n++)t.associations.set(c[n],{meshes:e,primitives:n});if(1===c.length)return c[0];const u=new n.Group;t.associations.set(u,{meshes:e});for(let e=0,t=c.length;e<t;e++)u.add(c[e]);return u}))}loadCamera(e){let t;const r=this.json.cameras[e],a=r[r.type];if(a)return"perspective"===r.type?t=new n.PerspectiveCamera(n.MathUtils.radToDeg(a.yfov),a.aspectRatio||1,a.znear||1,a.zfar||2e6):"orthographic"===r.type&&(t=new n.OrthographicCamera(-a.xmag,a.xmag,a.ymag,-a.ymag,a.znear,a.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),$(t,r),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],r={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(r):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return r.inverseBindMatrices=e,r}))}loadAnimation(e){const t=this.json.animations[e],r=[],a=[],o=[],i=[],s=[];for(let n=0,l=t.channels.length;n<l;n++){const e=t.channels[n],l=t.samplers[e.sampler],c=e.target,u=void 0!==c.node?c.node:c.id,d=void 0!==t.parameters?t.parameters[l.input]:l.input,f=void 0!==t.parameters?t.parameters[l.output]:l.output;r.push(this.getDependency("node",u)),a.push(this.getDependency("accessor",d)),o.push(this.getDependency("accessor",f)),i.push(l),s.push(c)}return Promise.all([Promise.all(r),Promise.all(a),Promise.all(o),Promise.all(i),Promise.all(s)]).then((function(r){const a=r[0],o=r[1],i=r[2],s=r[3],l=r[4],c=[];for(let e=0,t=a.length;e<t;e++){const t=a[e],r=o[e],u=i[e],d=s[e],f=l[e];if(void 0===t)continue;let h;switch(t.updateMatrix(),t.matrixAutoUpdate=!0,W[f.path]){case W.weights:h=n.NumberKeyframeTrack;break;case W.rotation:h=n.QuaternionKeyframeTrack;break;default:h=n.VectorKeyframeTrack}const p=t.name?t.name:t.uuid,A=void 0!==d.interpolation?Y[d.interpolation]:n.InterpolateLinear,B=[];W[f.path]===W.weights?t.traverse((function(e){e.morphTargetInfluences&&B.push(e.name?e.name:e.uuid)})):B.push(p);let m=u.array;if(u.normalized){const e=ne(m.constructor),t=new Float32Array(m.length);for(let r=0,n=m.length;r<n;r++)t[r]=m[r]*e;m=t}for(let e=0,a=B.length;e<a;e++){const t=new h(B[e]+"."+W[f.path],r.array,m,A);"CUBICSPLINE"===d.interpolation&&(t.createInterpolant=function(e){return new(this instanceof n.QuaternionKeyframeTrack?w:I)(this.times,this.values,this.getValueSize()/3,e)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),c.push(t)}}const u=t.name?t.name:"animation_"+e;return new n.AnimationClip(u,void 0,c)}))}createNodeMesh(e){const t=this.json,r=this,n=t.nodes[e];return void 0===n.mesh?null:r.getDependency("mesh",n.mesh).then((function(e){const t=r._getNodeRef(r.meshCache,n.mesh,e);return void 0!==n.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,r=n.weights.length;t<r;t++)e.morphTargetInfluences[t]=n.weights[t]})),t}))}loadNode(e){const t=this.json,r=this.extensions,a=this,o=t.nodes[e],i=o.name?a.createUniqueName(o.name):"";return function(){const t=[],r=a._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return r&&t.push(r),void 0!==o.camera&&t.push(a.getDependency("camera",o.camera).then((function(e){return a._getNodeRef(a.cameraCache,o.camera,e)}))),a._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){let s;if(s=!0===o.isBone?new n.Bone:t.length>1?new n.Group:1===t.length?t[0]:new n.Object3D,s!==t[0])for(let e=0,r=t.length;e<r;e++)s.add(t[e]);if(o.name&&(s.userData.name=o.name,s.name=i),$(s,o),o.extensions&&q(r,s,o),void 0!==o.matrix){const e=new n.Matrix4;e.fromArray(o.matrix),s.applyMatrix4(e)}else void 0!==o.translation&&s.position.fromArray(o.translation),void 0!==o.rotation&&s.quaternion.fromArray(o.rotation),void 0!==o.scale&&s.scale.fromArray(o.scale);return a.associations.has(s)||a.associations.set(s,{}),a.associations.get(s).nodes=e,s}))}loadScene(e){const t=this.json,r=this.extensions,a=this.json.scenes[e],o=this,i=new n.Group;a.name&&(i.name=o.createUniqueName(a.name)),$(i,a),a.extensions&&q(r,i,a);const s=a.nodes||[],l=[];for(let n=0,c=s.length;n<c;n++)l.push(oe(s[n],i,t,o));return Promise.all(l).then((function(){return o.associations=(e=>{const t=new Map;for(const[r,a]of o.associations)(r instanceof n.Material||r instanceof n.Texture)&&t.set(r,a);return e.traverse((e=>{const r=o.associations.get(e);null!=r&&t.set(e,r)})),t})(i),i}))}}function oe(e,t,r,a){const o=r.nodes[e];return a.getDependency("node",e).then((function(e){if(void 0===o.skin)return e;let t;return a.getDependency("skin",o.skin).then((function(e){t=e;const r=[];for(let n=0,o=t.joints.length;n<o;n++)r.push(a.getDependency("node",t.joints[n]));return Promise.all(r)})).then((function(r){return e.traverse((function(e){if(!e.isMesh)return;const a=[],o=[];for(let i=0,s=r.length;i<s;i++){const e=r[i];if(e){a.push(e);const r=new n.Matrix4;void 0!==t.inverseBindMatrices&&r.fromArray(t.inverseBindMatrices.array,16*i),o.push(r)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[i])}e.bind(new n.Skeleton(a,o),e.matrixWorld)})),e}))})).then((function(e){t.add(e);const n=[];if(o.children){const t=o.children;for(let o=0,i=t.length;o<i;o++){const i=t[o];n.push(oe(i,e,r,a))}}return Promise.all(n)}))}function ie(e,t,r){const a=t.attributes,o=[];function i(t,n){return r.getDependency("accessor",t).then((function(t){e.setAttribute(n,t)}))}for(const n in a){const t=Q[n]||n.toLowerCase();t in e.attributes||o.push(i(a[n],t))}if(void 0!==t.indices&&!e.index){const n=r.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));o.push(n)}return $(e,t),function(e,t,r){const a=t.attributes,o=new n.Box3;if(void 0===a.POSITION)return;{const e=r.json.accessors[a.POSITION],t=e.min,i=e.max;if(void 0===t||void 0===i)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(o.set(new n.Vector3(t[0],t[1],t[2]),new n.Vector3(i[0],i[1],i[2])),e.normalized){const t=ne(K[e.componentType]);o.min.multiplyScalar(t),o.max.multiplyScalar(t)}}const i=t.targets;if(void 0!==i){const e=new n.Vector3,t=new n.Vector3;for(let n=0,a=i.length;n<a;n++){const a=i[n];if(void 0!==a.POSITION){const n=r.json.accessors[a.POSITION],o=n.min,i=n.max;if(void 0!==o&&void 0!==i){if(t.setX(Math.max(Math.abs(o[0]),Math.abs(i[0]))),t.setY(Math.max(Math.abs(o[1]),Math.abs(i[1]))),t.setZ(Math.max(Math.abs(o[2]),Math.abs(i[2]))),n.normalized){const e=ne(K[n.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(e)}e.boundingBox=o;const s=new n.Sphere;o.getCenter(s.center),s.radius=o.min.distanceTo(o.max)/2,e.boundingSphere=s}(e,t,r),Promise.all(o).then((function(){return void 0!==t.targets?function(e,t,r){let n=!1,a=!1;for(let s=0,l=t.length;s<l;s++){const e=t[s];if(void 0!==e.POSITION&&(n=!0),void 0!==e.NORMAL&&(a=!0),n&&a)break}if(!n&&!a)return Promise.resolve(e);const o=[],i=[];for(let s=0,l=t.length;s<l;s++){const l=t[s];if(n){const t=void 0!==l.POSITION?r.getDependency("accessor",l.POSITION):e.attributes.position;o.push(t)}if(a){const t=void 0!==l.NORMAL?r.getDependency("accessor",l.NORMAL):e.attributes.normal;i.push(t)}}return Promise.all([Promise.all(o),Promise.all(i)]).then((function(t){const r=t[0],o=t[1];return n&&(e.morphAttributes.position=r),a&&(e.morphAttributes.normal=o),e.morphTargetsRelative=!0,e}))}(e,t.targets,r):e}))}function se(e,t){let r=e.getIndex();if(null===r){const t=[],n=e.getAttribute("position");if(void 0===n)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<n.count;e++)t.push(e);e.setIndex(t),r=e.getIndex()}const a=r.count-2,o=[];if(t===n.TriangleFanDrawMode)for(let n=1;n<=a;n++)o.push(r.getX(0)),o.push(r.getX(n)),o.push(r.getX(n+1));else for(let n=0;n<a;n++)n%2===0?(o.push(r.getX(n)),o.push(r.getX(n+1)),o.push(r.getX(n+2))):(o.push(r.getX(n+2)),o.push(r.getX(n+1)),o.push(r.getX(n)));o.length/3!==a&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const i=e.clone();return i.setIndex(o),i}var le=r(88057);let ce=null;function ue(e,t,r){return n=>{r&&r(n),e&&(ce||(ce=new o),ce.setDecoderPath("string"===typeof e?e:"https://www.gstatic.com/draco/versioned/decoders/1.4.3/"),n.setDRACOLoader(ce)),t&&n.setMeshoptDecoder(l())}}function de(e,t=!0,r=!0,n){return(0,le.z)(c,e,ue(t,r,n))}de.preload=(e,t=!0,r=!0,n)=>le.z.preload(c,e,ue(t,r,n)),de.clear=e=>le.z.clear(c,e)},25030:function(e,t,r){var n=9007199254740991,a="[object Arguments]",o="[object Function]",i="[object GeneratorFunction]",s="[object Symbol]",l="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,c="object"==typeof self&&self&&self.Object===Object&&self,u=l||c||Function("return this")();function d(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function f(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var h=Object.prototype,p=h.hasOwnProperty,A=h.toString,B=u.Symbol,m=h.propertyIsEnumerable,g=B?B.isConcatSpreadable:void 0,v=Math.max;function C(e,t,r,n,a){var o=-1,i=e.length;for(r||(r=b),a||(a=[]);++o<i;){var s=e[o];t>0&&r(s)?t>1?C(s,t-1,r,n,a):f(a,s):n||(a[a.length]=s)}return a}function b(e){return F(e)||function(e){return function(e){return M(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?A.call(e):"";return t==o||t==i}(e)}(e)}(e)&&p.call(e,"callee")&&(!m.call(e,"callee")||A.call(e)==a)}(e)||!!(g&&e&&e[g])}function y(e){if("string"==typeof e||function(e){return"symbol"==typeof e||M(e)&&A.call(e)==s}(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}var F=Array.isArray;function M(e){return!!e&&"object"==typeof e}var E,T,x=(E=function(e,t){return null==e?{}:function(e,t){return function(e,t,r){for(var n=-1,a=t.length,o={};++n<a;){var i=t[n],s=e[i];r(s,i)&&(o[i]=s)}return o}(e=Object(e),t,(function(t,r){return r in e}))}(e,function(e,t){for(var r=-1,n=e?e.length:0,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}(C(t,1),y))},T=v(void 0===T?E.length-1:T,0),function(){for(var e=arguments,t=-1,r=v(e.length-T,0),n=Array(r);++t<r;)n[t]=e[T+t];t=-1;for(var a=Array(T+1);++t<T;)a[t]=e[t];return a[T]=n,d(E,this,a)});e.exports=x},83454:function(e,t,r){"use strict";var n,a;e.exports=(null===(n=r.g.process)||void 0===n?void 0:n.env)&&"object"===typeof(null===(a=r.g.process)||void 0===a?void 0:a.env)?r.g.process:r(77663)},77663:function(e){!function(){var t={162:function(e){var t,r,n=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"===typeof setTimeout?setTimeout:a}catch(e){t=a}try{r="function"===typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var s,l=[],c=!1,u=-1;function d(){c&&s&&(c=!1,s.length?l=s.concat(l):u=-1,l.length&&f())}function f(){if(!c){var e=i(d);c=!0;for(var t=l.length;t;){for(s=l,l=[];++u<t;)s&&s[u].run();u=-1,t=l.length}s=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new h(e,t)),1!==l.length||c||i(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var o=r[e]={exports:{}},i=!0;try{t[e](o,o.exports,n),i=!1}finally{i&&delete r[e]}return o.exports}n.ab="//";var a=n(162);e.exports=a}()},82359:function(e,t,r){"use strict";r.d(t,{b:function(){return a}});var n=r(26173),a={retarget:function(){var e=new n.Vector3,t=new n.Quaternion,r=new n.Vector3,a=new n.Matrix4,o=new n.Matrix4,i=new n.Matrix4;return function(n,s,l){(l=l||{}).preserveMatrix=void 0===l.preserveMatrix||l.preserveMatrix,l.preservePosition=void 0===l.preservePosition||l.preservePosition,l.preserveHipPosition=void 0!==l.preserveHipPosition&&l.preserveHipPosition,l.useTargetMatrix=void 0!==l.useTargetMatrix&&l.useTargetMatrix,l.hip=void 0!==l.hip?l.hip:"hip",l.names=l.names||{};var c,u,d,f,h,p,A=s.isObject3D?s.skeleton.bones:this.getBones(s),B=n.isObject3D?n.skeleton.bones:this.getBones(n);if(n.isObject3D?n.skeleton.pose():(l.useTargetMatrix=!0,l.preserveMatrix=!1),l.preservePosition)for(h=[],p=0;p<B.length;p++)h.push(B[p].position.clone());if(l.preserveMatrix)for(n.updateMatrixWorld(),n.matrixWorld.identity(),p=0;p<n.children.length;++p)n.children[p].updateMatrixWorld(!0);if(l.offsets)for(c=[],p=0;p<B.length;++p)u=B[p],d=l.names[u.name]||u.name,l.offsets&&l.offsets[d]&&(u.matrix.multiply(l.offsets[d]),u.matrix.decompose(u.position,u.quaternion,u.scale),u.updateMatrixWorld()),c.push(u.matrixWorld.clone());for(p=0;p<B.length;++p){if(u=B[p],d=l.names[u.name]||u.name,f=this.getBoneByName(d,A),i.copy(u.matrixWorld),f){if(f.updateMatrixWorld(),l.useTargetMatrix?o.copy(f.matrixWorld):(o.copy(n.matrixWorld).invert(),o.multiply(f.matrixWorld)),r.setFromMatrixScale(o),o.scale(r.set(1/r.x,1/r.y,1/r.z)),i.makeRotationFromQuaternion(t.setFromRotationMatrix(o)),n.isObject3D){var m=B.indexOf(u),g=c?c[m]:a.copy(n.skeleton.boneInverses[m]).invert();i.multiply(g)}i.copyPosition(o)}u.parent&&u.parent.isBone?(u.matrix.copy(u.parent.matrixWorld).invert(),u.matrix.multiply(i)):u.matrix.copy(i),l.preserveHipPosition&&d===l.hip&&u.matrix.setPosition(e.set(0,u.position.y,0)),u.matrix.decompose(u.position,u.quaternion,u.scale),u.updateMatrixWorld()}if(l.preservePosition)for(p=0;p<B.length;++p)u=B[p],(d=l.names[u.name]||u.name)!==l.hip&&u.position.copy(h[p]);l.preserveMatrix&&n.updateMatrixWorld(!0)}}(),retargetClip:function(e,t,r,a){(a=a||{}).useFirstFramePosition=void 0!==a.useFirstFramePosition&&a.useFirstFramePosition,a.fps=void 0!==a.fps?a.fps:30,a.names=a.names||[],t.isObject3D||(t=this.getHelperFromSkeleton(t));var o,i,s,l,c,u,d=Math.round(r.duration*(a.fps/1e3)*1e3),f=1/a.fps,h=[],p=new n.AnimationMixer(t),A=this.getBones(e.skeleton),B=[];for(p.clipAction(r).play(),p.update(0),t.updateMatrixWorld(),c=0;c<d;++c){var m=c*f;for(this.retarget(e,t,a),u=0;u<A.length;++u)l=a.names[A[u].name]||A[u].name,this.getBoneByName(l,t.skeleton)&&(i=A[u],s=B[u]=B[u]||{bone:i},a.hip===l&&(s.pos||(s.pos={times:new Float32Array(d),values:new Float32Array(3*d)}),a.useFirstFramePosition&&(0===c&&(o=i.position.clone()),i.position.sub(o)),s.pos.times[c]=m,i.position.toArray(s.pos.values,3*c)),s.quat||(s.quat={times:new Float32Array(d),values:new Float32Array(4*d)}),s.quat.times[c]=m,i.quaternion.toArray(s.quat.values,4*c));p.update(f),t.updateMatrixWorld()}for(c=0;c<B.length;++c)(s=B[c])&&(s.pos&&h.push(new n.VectorKeyframeTrack(".bones["+s.bone.name+"].position",s.pos.times,s.pos.values)),h.push(new n.QuaternionKeyframeTrack(".bones["+s.bone.name+"].quaternion",s.quat.times,s.quat.values)));return p.uncacheAction(r),new n.AnimationClip(r.name,-1,h)},getHelperFromSkeleton:function(e){var t=new n.SkeletonHelper(e.bones[0]);return t.skeleton=e,t},getSkeletonOffsets:function(){var e=new n.Vector3,t=new n.Vector3,r=new n.Vector3,a=new n.Vector3,o=new n.Vector2,i=new n.Vector2;return function(s,l,c){(c=c||{}).hip=void 0!==c.hip?c.hip:"hip",c.names=c.names||{},l.isObject3D||(l=this.getHelperFromSkeleton(l));var u,d,f,h,p=Object.keys(c.names),A=Object.values(c.names),B=l.isObject3D?l.skeleton.bones:this.getBones(l),m=s.isObject3D?s.skeleton.bones:this.getBones(s),g=[];for(s.skeleton.pose(),h=0;h<m.length;++h)if(u=m[h],f=c.names[u.name]||u.name,(d=this.getBoneByName(f,B))&&f!==c.hip){var v=this.getNearestBone(u.parent,p),C=this.getNearestBone(d.parent,A);v.updateMatrixWorld(),C.updateMatrixWorld(),e.setFromMatrixPosition(v.matrixWorld),t.setFromMatrixPosition(u.matrixWorld),r.setFromMatrixPosition(C.matrixWorld),a.setFromMatrixPosition(d.matrixWorld),o.subVectors(new n.Vector2(t.x,t.y),new n.Vector2(e.x,e.y)).normalize(),i.subVectors(new n.Vector2(a.x,a.y),new n.Vector2(r.x,r.y)).normalize();var b=o.angle()-i.angle(),y=(new n.Matrix4).makeRotationFromEuler(new n.Euler(0,0,b));u.matrix.multiply(y),u.matrix.decompose(u.position,u.quaternion,u.scale),u.updateMatrixWorld(),g[f]=y}return g}}(),renameBones:function(e,t){var r=this.getBones(e);for(let a=0;a<r.length;++a){var n=r[a];t[n.name]&&(n.name=t[n.name])}return this},getBones:function(e){return Array.isArray(e)?e:e.bones},getBoneByName:function(e,t){for(let r=0,n=this.getBones(t);r<n.length;r++)if(e===n[r].name)return n[r]},getNearestBone:function(e,t){for(;e.isBone;){if(-1!==t.indexOf(e.name))return e;e=e.parent}},findBoneTrackData:function(e,t){var r=/\[(.*)\]\.(.*)/,n={name:e};for(let o=0;o<t.length;++o){var a=r.exec(t[o].name);a&&e===a[1]&&(n[a[2]]=o)}return n},getEqualsBonesNames:function(e,t){var r=this.getBones(e),n=this.getBones(t),a=[];e:for(let i=0;i<r.length;i++){var o=r[i].name;for(let e=0;e<n.length;e++)if(o===n[e].name){a.push(o);continue e}}return a},clone:function(e){var t=new Map,r=new Map,n=e.clone();return o(e,n,(function(e,n){t.set(n,e),r.set(e,n)})),n.traverse((function(e){if(e.isSkinnedMesh){var n=e,a=t.get(e),o=a.skeleton.bones;n.skeleton=a.skeleton.clone(),n.bindMatrix.copy(a.bindMatrix),n.skeleton.bones=o.map((function(e){return r.get(e)})),n.bind(n.skeleton,n.bindMatrix)}})),n}};function o(e,t,r){r(e,t);for(let n=0;n<e.children.length;n++)o(e.children[n],t.children[n],r)}},96976:function(e,t,r){"use strict";r.d(t,{z:function(){return s}});var n=r(26173);const a={type:"change"},o={type:"start"},i={type:"end"};class s extends n.EventDispatcher{constructor(e,t){super(),void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new n.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:n.MOUSE.ROTATE,MIDDLE:n.MOUSE.DOLLY,RIGHT:n.MOUSE.PAN},this.touches={ONE:n.TOUCH.ROTATE,TWO:n.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return u.phi},this.getAzimuthalAngle=function(){return u.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",W),this._domElementKeyEvents=e},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(a),r.update(),l=s.NONE},this.update=function(){const t=new n.Vector3,o=(new n.Quaternion).setFromUnitVectors(e.up,new n.Vector3(0,1,0)),i=o.clone().invert(),A=new n.Vector3,B=new n.Quaternion,m=2*Math.PI;return function(){const e=r.object.position;t.copy(e).sub(r.target),t.applyQuaternion(o),u.setFromVector3(t),r.autoRotate&&l===s.NONE&&x(2*Math.PI/60/60*r.autoRotateSpeed),r.enableDamping?(u.theta+=d.theta*r.dampingFactor,u.phi+=d.phi*r.dampingFactor):(u.theta+=d.theta,u.phi+=d.phi);let n=r.minAzimuthAngle,g=r.maxAzimuthAngle;return isFinite(n)&&isFinite(g)&&(n<-Math.PI?n+=m:n>Math.PI&&(n-=m),g<-Math.PI?g+=m:g>Math.PI&&(g-=m),u.theta=n<=g?Math.max(n,Math.min(g,u.theta)):u.theta>(n+g)/2?Math.max(n,u.theta):Math.min(g,u.theta)),u.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,u.phi)),u.makeSafe(),u.radius*=f,u.radius=Math.max(r.minDistance,Math.min(r.maxDistance,u.radius)),!0===r.enableDamping?r.target.addScaledVector(h,r.dampingFactor):r.target.add(h),t.setFromSpherical(u),t.applyQuaternion(i),e.copy(r.target).add(t),r.object.lookAt(r.target),!0===r.enableDamping?(d.theta*=1-r.dampingFactor,d.phi*=1-r.dampingFactor,h.multiplyScalar(1-r.dampingFactor)):(d.set(0,0,0),h.set(0,0,0)),f=1,!!(p||A.distanceToSquared(r.object.position)>c||8*(1-B.dot(r.object.quaternion))>c)&&(r.dispatchEvent(a),A.copy(r.object.position),B.copy(r.object.quaternion),p=!1,!0)}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",Y),r.domElement.removeEventListener("pointerdown",K),r.domElement.removeEventListener("pointercancel",X),r.domElement.removeEventListener("wheel",Q),r.domElement.removeEventListener("pointermove",N),r.domElement.removeEventListener("pointerup",j),null!==r._domElementKeyEvents&&r._domElementKeyEvents.removeEventListener("keydown",W)};const r=this,s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=s.NONE;const c=1e-6,u=new n.Spherical,d=new n.Spherical;let f=1;const h=new n.Vector3;let p=!1;const A=new n.Vector2,B=new n.Vector2,m=new n.Vector2,g=new n.Vector2,v=new n.Vector2,C=new n.Vector2,b=new n.Vector2,y=new n.Vector2,F=new n.Vector2,M=[],E={};function T(){return Math.pow(.95,r.zoomSpeed)}function x(e){d.theta-=e}function G(e){d.phi-=e}const S=function(){const e=new n.Vector3;return function(t,r){e.setFromMatrixColumn(r,0),e.multiplyScalar(-t),h.add(e)}}(),D=function(){const e=new n.Vector3;return function(t,n){!0===r.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(r.object.up,e)),e.multiplyScalar(t),h.add(e)}}(),U=function(){const e=new n.Vector3;return function(t,n){const a=r.domElement;if(r.object.isPerspectiveCamera){const o=r.object.position;e.copy(o).sub(r.target);let i=e.length();i*=Math.tan(r.object.fov/2*Math.PI/180),S(2*t*i/a.clientHeight,r.object.matrix),D(2*n*i/a.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(S(t*(r.object.right-r.object.left)/r.object.zoom/a.clientWidth,r.object.matrix),D(n*(r.object.top-r.object.bottom)/r.object.zoom/a.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function I(e){r.object.isPerspectiveCamera?f/=e:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*e)),r.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function R(e){r.object.isPerspectiveCamera?f*=e:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/e)),r.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function w(e){A.set(e.clientX,e.clientY)}function k(e){g.set(e.clientX,e.clientY)}function _(){if(1===M.length)A.set(M[0].pageX,M[0].pageY);else{const e=.5*(M[0].pageX+M[1].pageX),t=.5*(M[0].pageY+M[1].pageY);A.set(e,t)}}function L(){if(1===M.length)g.set(M[0].pageX,M[0].pageY);else{const e=.5*(M[0].pageX+M[1].pageX),t=.5*(M[0].pageY+M[1].pageY);g.set(e,t)}}function H(){const e=M[0].pageX-M[1].pageX,t=M[0].pageY-M[1].pageY,r=Math.sqrt(e*e+t*t);b.set(0,r)}function O(e){if(1==M.length)B.set(e.pageX,e.pageY);else{const t=z(e),r=.5*(e.pageX+t.x),n=.5*(e.pageY+t.y);B.set(r,n)}m.subVectors(B,A).multiplyScalar(r.rotateSpeed);const t=r.domElement;x(2*Math.PI*m.x/t.clientHeight),G(2*Math.PI*m.y/t.clientHeight),A.copy(B)}function P(e){if(1===M.length)v.set(e.pageX,e.pageY);else{const t=z(e),r=.5*(e.pageX+t.x),n=.5*(e.pageY+t.y);v.set(r,n)}C.subVectors(v,g).multiplyScalar(r.panSpeed),U(C.x,C.y),g.copy(v)}function J(e){const t=z(e),n=e.pageX-t.x,a=e.pageY-t.y,o=Math.sqrt(n*n+a*a);y.set(0,o),F.set(0,Math.pow(y.y/b.y,r.zoomSpeed)),I(F.y),b.copy(y)}function K(e){!1!==r.enabled&&(0===M.length&&(r.domElement.setPointerCapture(e.pointerId),r.domElement.addEventListener("pointermove",N),r.domElement.addEventListener("pointerup",j)),function(e){M.push(e)}(e),"touch"===e.pointerType?function(e){switch(Z(e),M.length){case 1:switch(r.touches.ONE){case n.TOUCH.ROTATE:if(!1===r.enableRotate)return;_(),l=s.TOUCH_ROTATE;break;case n.TOUCH.PAN:if(!1===r.enablePan)return;L(),l=s.TOUCH_PAN;break;default:l=s.NONE}break;case 2:switch(r.touches.TWO){case n.TOUCH.DOLLY_PAN:if(!1===r.enableZoom&&!1===r.enablePan)return;r.enableZoom&&H(),r.enablePan&&L(),l=s.TOUCH_DOLLY_PAN;break;case n.TOUCH.DOLLY_ROTATE:if(!1===r.enableZoom&&!1===r.enableRotate)return;r.enableZoom&&H(),r.enableRotate&&_(),l=s.TOUCH_DOLLY_ROTATE;break;default:l=s.NONE}break;default:l=s.NONE}l!==s.NONE&&r.dispatchEvent(o)}(e):function(e){let t;switch(e.button){case 0:t=r.mouseButtons.LEFT;break;case 1:t=r.mouseButtons.MIDDLE;break;case 2:t=r.mouseButtons.RIGHT;break;default:t=-1}switch(t){case n.MOUSE.DOLLY:if(!1===r.enableZoom)return;!function(e){b.set(e.clientX,e.clientY)}(e),l=s.DOLLY;break;case n.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===r.enablePan)return;k(e),l=s.PAN}else{if(!1===r.enableRotate)return;w(e),l=s.ROTATE}break;case n.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===r.enableRotate)return;w(e),l=s.ROTATE}else{if(!1===r.enablePan)return;k(e),l=s.PAN}break;default:l=s.NONE}l!==s.NONE&&r.dispatchEvent(o)}(e))}function N(e){!1!==r.enabled&&("touch"===e.pointerType?function(e){switch(Z(e),l){case s.TOUCH_ROTATE:if(!1===r.enableRotate)return;O(e),r.update();break;case s.TOUCH_PAN:if(!1===r.enablePan)return;P(e),r.update();break;case s.TOUCH_DOLLY_PAN:if(!1===r.enableZoom&&!1===r.enablePan)return;!function(e){r.enableZoom&&J(e),r.enablePan&&P(e)}(e),r.update();break;case s.TOUCH_DOLLY_ROTATE:if(!1===r.enableZoom&&!1===r.enableRotate)return;!function(e){r.enableZoom&&J(e),r.enableRotate&&O(e)}(e),r.update();break;default:l=s.NONE}}(e):function(e){if(!1===r.enabled)return;switch(l){case s.ROTATE:if(!1===r.enableRotate)return;!function(e){B.set(e.clientX,e.clientY),m.subVectors(B,A).multiplyScalar(r.rotateSpeed);const t=r.domElement;x(2*Math.PI*m.x/t.clientHeight),G(2*Math.PI*m.y/t.clientHeight),A.copy(B),r.update()}(e);break;case s.DOLLY:if(!1===r.enableZoom)return;!function(e){y.set(e.clientX,e.clientY),F.subVectors(y,b),F.y>0?I(T()):F.y<0&&R(T()),b.copy(y),r.update()}(e);break;case s.PAN:if(!1===r.enablePan)return;!function(e){v.set(e.clientX,e.clientY),C.subVectors(v,g).multiplyScalar(r.panSpeed),U(C.x,C.y),g.copy(v),r.update()}(e)}}(e))}function j(e){V(e),0===M.length&&(r.domElement.releasePointerCapture(e.pointerId),r.domElement.removeEventListener("pointermove",N),r.domElement.removeEventListener("pointerup",j)),r.dispatchEvent(i),l=s.NONE}function X(e){V(e)}function Q(e){!1!==r.enabled&&!1!==r.enableZoom&&l===s.NONE&&(e.preventDefault(),r.dispatchEvent(o),function(e){e.deltaY<0?R(T()):e.deltaY>0&&I(T()),r.update()}(e),r.dispatchEvent(i))}function W(e){!1!==r.enabled&&!1!==r.enablePan&&function(e){let t=!1;switch(e.code){case r.keys.UP:U(0,r.keyPanSpeed),t=!0;break;case r.keys.BOTTOM:U(0,-r.keyPanSpeed),t=!0;break;case r.keys.LEFT:U(r.keyPanSpeed,0),t=!0;break;case r.keys.RIGHT:U(-r.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),r.update())}(e)}function Y(e){!1!==r.enabled&&e.preventDefault()}function V(e){delete E[e.pointerId];for(let t=0;t<M.length;t++)if(M[t].pointerId==e.pointerId)return void M.splice(t,1)}function Z(e){let t=E[e.pointerId];void 0===t&&(t=new n.Vector2,E[e.pointerId]=t),t.set(e.pageX,e.pageY)}function z(e){const t=e.pointerId===M[0].pointerId?M[1]:M[0];return E[t.pointerId]}r.domElement.addEventListener("contextmenu",Y),r.domElement.addEventListener("pointerdown",K),r.domElement.addEventListener("pointercancel",X),r.domElement.addEventListener("wheel",Q,{passive:!1}),this.update()}}}}]);