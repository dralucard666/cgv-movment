(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{45301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(28821)}])},28821:function(e,t,n){"use strict";n.r(t),n.d(t,{Viewer:function(){return Mt},default:function(){return jt}});var r=n(85893),o=n(53359),i=n(712),a=n(26135),l=n(88057),s=n(55050),c=n(1815),u=n(9008),p=n(67294),m=n(40812),d=n(96976),f=n(16082),h=function(){var e=(0,l.w)(),t=e.camera,n=e.gl;return(0,p.useEffect)((function(){var e=new d.z(t,n.domElement);return f.L.getState().controls=e,t.rotateX(-Math.PI/10),t.position.set(3,100,222.5),t.rotateX(-Math.PI/10),e.update(),e.minDistance=3,e.maxDistance=2e3,function(){e.dispose()}}),[t,n]),null},y=n(26173),v=n(85769),g=n(18626),w=n(61385),x=n(27938);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e){var t=j((0,v.m)(["./textures/dirt/normal.jpg"]),1)[0],n=j((0,v.m)(["./textures/dirt/studentsreference.png"]),1)[0];n.rotation=Math.PI,n.encoding=y.sRGBEncoding,n.wrapS=y.RepeatWrapping,n.wrapT=y.RepeatWrapping,t.wrapS=y.RepeatWrapping,t.wrapT=y.RepeatWrapping;var o,i=e.world,a=null!==(o=i.rotation)&&void 0!==o?o:[0,0,0],l=(0,g.L)(i.image),s=(0,p.useRef)(null);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.o,{ref:s,rotation:a,object:l.scene,scale:i.scale,position:i.position}),(0,r.jsx)("ambientLight",{intensity:1}),(0,r.jsx)(x.qA,{preset:"sunset"})," "]})}g.L.preload("./models/bookstore.glb");var M=n(22899),P=n(73506),O=n(17518),E=n(21010),L=n(48827),Y=n(82513),I=n(77340),A=n(80598),_=n(66974),V=n(29426),T=n(21509),X=n(10811);function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){k(e,t,n[t])}))}return e}function N(e){return function(e){if(Array.isArray(e))return Q(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t,n,r,o,i){return e.subscribe({next:function(e){var r,o=e.raw;(C(o,y.Mesh)&&(n.add(o),n.updateMatrixWorld()),Array.isArray(o)&&o.length>0)&&(C(o[0],y.Mesh)&&((r=n).add.apply(r,N(o)),n.updateMatrixWorld()));if(C(o,X.rd)){var a=o.position[0].time,l=o.position[o.position.length-1].time,s=t+e.index.map((function(e){return"_"+e})).join(","),c=function(e,t,n){for(var r=[],o=t;o<=n;o++)r.push({time:o,position:null,direction:null});return e.map((function(e){var n=e.time,o=e.position,i=e.direction;r[n-t].position=[o.x,o.y,o.z],r[n-t].direction=[i.x,i.y,i.z]})),r}(o.position,a,l),u=o.grammarSteps.some((function(e){return"operation"===e.type&&"sample"===e.identifier})),p=t+e.index.slice(0,1).map((function(e){return"_"+e})).join(","),m=a*X.HG,d=l*X.HG;!function(e,t,n,r,o){var i,a=n.getState().treePath;a.some((function(t){return t.data.key==e}))||a.push({type:"moveData",data:{key:e,children:{}}});for(var l=null===(i=a.find((function(t){return t.data.key==e})))||void 0===i?void 0:i.data,s=0,c=0;c<r.grammarSteps.length;c++){var u=r.grammarSteps[c],p=u.path.slice(1).length>0?u.path.slice(1).toString():"1",m=o[c-s],d=void 0;if("operation"==u.type&&"sample"===(d={name:u.identifier,parameter:u.children}).name&&(s=1),p&&"sample"!==(null===d||void 0===d?void 0:d.name)){var f=l.children[p];f?l=f:(l.children=R({},l.children,k({},p,{key:p,children:{},path:u.path,operation:d,framePosition:R({},m,{type:r.type,name:t})})),l=l.children[p])}}n.getState().setTreePath(a)}(u?p:t,s,f.L,o,c),f.L.getState().maxTime<=d&&f.L.getState().setMaxTime(d+1),f.L.getState().minTime>m&&f.L.getState().setMinTime(m)}else if(C(o,X.WV)){var h=o.grammarSteps.some((function(e){return"operation"===e.type&&"sample"===e.identifier})),v=t+e.index.slice(0,1).map((function(e){return"_"+e})).join(","),g=f.L.getState().treePath;g.push({type:"nameSample",data:{key:h?v:t,primitive:o}}),f.L.getState().setTreePath(g)}else{var w=f.L.getState().treePath;w.push({type:"onlyName",data:{key:t,children:{}}}),f.L.getState().setTreePath(w)}i(!1)},error:function(e){o(e)}})}var z=n(20554);function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t,n){return G="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=F(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},G(e,t,n||e)}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}function U(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}function H(e,t){return!t||"object"!==q(t)&&"function"!==typeof t?Z(e):t}function W(e,t){return W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},W(e,t)}var q=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function $(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=F(e);if(t){var o=F(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return H(this,n)}}var J=function(e){U(n,e);var t=$(n);function n(e,r,o){var i,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];B(this,n),(i=t.call(this)).isTransformControls=!0,i.visible=!1,i.raycaster=new y.Raycaster,i.tempVector=new y.Vector3,i.tempVector2=new y.Vector3,i.tempQuaternion=new y.Quaternion,i.unit={X:new y.Vector3(1,0,0),Y:new y.Vector3(0,1,0),Z:new y.Vector3(0,0,1)},i.pointStart=new y.Vector3,i.pointEnd=new y.Vector3,i.offset=new y.Vector3,i.rotationAxis=new y.Vector3,i.startNorm=new y.Vector3,i.endNorm=new y.Vector3,i.rotationAngle=0,i.cameraPosition=new y.Vector3,i.cameraQuaternion=new y.Quaternion,i.cameraScale=new y.Vector3,i.parentPosition=new y.Vector3,i.parentQuaternion=new y.Quaternion,i.parentQuaternionInv=new y.Quaternion,i.parentScale=new y.Vector3,i.worldPositionStart=new y.Vector3,i.worldQuaternionStart=new y.Quaternion,i.worldScaleStart=new y.Vector3,i.worldPosition=new y.Vector3,i.worldQuaternion=new y.Quaternion,i.worldQuaternionInv=new y.Quaternion,i.worldScale=new y.Vector3,i.eye=new y.Vector3,i.positionStart=new y.Vector3,i.quaternionStart=new y.Quaternion,i.scaleStart=new y.Vector3,i.enabled=!0,i.axis=null,i.mode="translate",i.translationSnap=null,i.rotationSnap=null,i.scaleSnap=null,i.space="world",i.size=1,i.dragging=!1,i.showX=!0,i.showY=!0,i.showZ=!0,i.changeEvent={type:"change"},i.mouseDownEvent={type:"mouseDown",mode:i.mode},i.mouseUpEvent={type:"mouseUp",mode:i.mode},i.objectChangeEvent={type:"objectChange"},i.intersectObjectWithRay=function(e,t,n){for(var r=t.intersectObject(e,!0),o=0;o<r.length;o++)if(r[o].object.visible||n)return r[o];return!1},i.attach=function(e){return i.object=e,i.visible=!0,Z(i)},i.detach=function(){return i.object=void 0,i.visible=!1,i.axis=null,Z(i)},i.reset=function(){return i.enabled?(i.dragging&&void 0!==i.object&&(i.object.position.copy(i.positionStart),i.object.quaternion.copy(i.quaternionStart),i.object.scale.copy(i.scaleStart),i.dispatchEvent(i.changeEvent),i.dispatchEvent(i.objectChangeEvent),i.pointStart.copy(i.pointEnd)),Z(i)):Z(i)},i.updateMatrixWorld=function(){void 0!==i.object&&(i.object.updateMatrixWorld(),null===i.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):i.object.parent.matrixWorld.decompose(i.parentPosition,i.parentQuaternion,i.parentScale),i.object.matrixWorld.decompose(i.worldPosition,i.worldQuaternion,i.worldScale),i.parentQuaternionInv.copy(i.parentQuaternion).invert(),i.worldQuaternionInv.copy(i.worldQuaternion).invert()),i.camera.updateMatrixWorld(),i.camera.matrixWorld.decompose(i.cameraPosition,i.cameraQuaternion,i.cameraScale),i.eye.copy(i.cameraPosition).sub(i.worldPosition).normalize(),G((Z(i),F(n.prototype)),"updateMatrixWorld",i).call(i)},i.pointerHover=function(e){if(void 0!==i.object&&!0!==i.dragging){i.raycaster.setFromCamera(e,i.camera);var t=i.intersectObjectWithRay(i.gizmo.picker[i.mode],i.raycaster);i.axis=t?t.object.name:null}},i.pointerDown=function(e){if(void 0!==i.object&&!0!==i.dragging&&0===e.button&&null!==i.axis){i.raycaster.setFromCamera(e,i.camera);var t=i.intersectObjectWithRay(i.plane,i.raycaster,!0);if(t){var n=i.space;if("scale"===i.mode?n="local":"E"!==i.axis&&"XYZE"!==i.axis&&"XYZ"!==i.axis||(n="world"),"local"===n&&"rotate"===i.mode){var r=i.rotationSnap;"X"===i.axis&&r&&(i.object.rotation.x=Math.round(i.object.rotation.x/r)*r),"Y"===i.axis&&r&&(i.object.rotation.y=Math.round(i.object.rotation.y/r)*r),"Z"===i.axis&&r&&(i.object.rotation.z=Math.round(i.object.rotation.z/r)*r)}i.object.updateMatrixWorld(),i.object.parent&&i.object.parent.updateMatrixWorld(),i.positionStart.copy(i.object.position),i.quaternionStart.copy(i.object.quaternion),i.scaleStart.copy(i.object.scale),i.object.matrixWorld.decompose(i.worldPositionStart,i.worldQuaternionStart,i.worldScaleStart),i.pointStart.copy(t.point).sub(i.worldPositionStart)}i.dragging=!0,i.mouseDownEvent.mode=i.mode,i.dispatchEvent(i.mouseDownEvent)}},i.pointerMove=function(e){var t=i.axis,n=i.mode,r=i.object,o=i.space;if("scale"===n?o="local":"E"!==t&&"XYZE"!==t&&"XYZ"!==t||(o="world"),void 0!==r&&null!==t&&!1!==i.dragging&&-1===e.button){i.raycaster.setFromCamera(e,i.camera);var a=i.intersectObjectWithRay(i.plane,i.raycaster,!0);if(a){if(i.pointEnd.copy(a.point).sub(i.worldPositionStart),"translate"===n)i.offset.copy(i.pointEnd).sub(i.pointStart),"local"===o&&"XYZ"!==t&&i.offset.applyQuaternion(i.worldQuaternionInv),-1===t.indexOf("X")&&(i.offset.x=0),-1===t.indexOf("Y")&&(i.offset.y=0),-1===t.indexOf("Z")&&(i.offset.z=0),"local"===o&&"XYZ"!==t?i.offset.applyQuaternion(i.quaternionStart).divide(i.parentScale):i.offset.applyQuaternion(i.parentQuaternionInv).divide(i.parentScale),r.position.copy(i.offset).add(i.positionStart),i.translationSnap&&("local"===o&&(r.position.applyQuaternion(i.tempQuaternion.copy(i.quaternionStart).invert()),-1!==t.search("X")&&(r.position.x=Math.round(r.position.x/i.translationSnap)*i.translationSnap),-1!==t.search("Y")&&(r.position.y=Math.round(r.position.y/i.translationSnap)*i.translationSnap),-1!==t.search("Z")&&(r.position.z=Math.round(r.position.z/i.translationSnap)*i.translationSnap),r.position.applyQuaternion(i.quaternionStart)),"world"===o&&(r.parent&&r.position.add(i.tempVector.setFromMatrixPosition(r.parent.matrixWorld)),-1!==t.search("X")&&(r.position.x=Math.round(r.position.x/i.translationSnap)*i.translationSnap),-1!==t.search("Y")&&(r.position.y=Math.round(r.position.y/i.translationSnap)*i.translationSnap),-1!==t.search("Z")&&(r.position.z=Math.round(r.position.z/i.translationSnap)*i.translationSnap),r.parent&&r.position.sub(i.tempVector.setFromMatrixPosition(r.parent.matrixWorld))));else if("scale"===n){if(-1!==t.search("XYZ")){var l=i.pointEnd.length()/i.pointStart.length();i.pointEnd.dot(i.pointStart)<0&&(l*=-1),i.tempVector2.set(l,l,l)}else i.tempVector.copy(i.pointStart),i.tempVector2.copy(i.pointEnd),i.tempVector.applyQuaternion(i.worldQuaternionInv),i.tempVector2.applyQuaternion(i.worldQuaternionInv),i.tempVector2.divide(i.tempVector),-1===t.search("X")&&(i.tempVector2.x=1),-1===t.search("Y")&&(i.tempVector2.y=1),-1===t.search("Z")&&(i.tempVector2.z=1);r.scale.copy(i.scaleStart).multiply(i.tempVector2),i.scaleSnap&&i.object&&(-1!==t.search("X")&&(i.object.scale.x=Math.round(r.scale.x/i.scaleSnap)*i.scaleSnap||i.scaleSnap),-1!==t.search("Y")&&(r.scale.y=Math.round(r.scale.y/i.scaleSnap)*i.scaleSnap||i.scaleSnap),-1!==t.search("Z")&&(r.scale.z=Math.round(r.scale.z/i.scaleSnap)*i.scaleSnap||i.scaleSnap))}else if("rotate"===n){i.offset.copy(i.pointEnd).sub(i.pointStart);var s=20/i.worldPosition.distanceTo(i.tempVector.setFromMatrixPosition(i.camera.matrixWorld));"E"===t?(i.rotationAxis.copy(i.eye),i.rotationAngle=i.pointEnd.angleTo(i.pointStart),i.startNorm.copy(i.pointStart).normalize(),i.endNorm.copy(i.pointEnd).normalize(),i.rotationAngle*=i.endNorm.cross(i.startNorm).dot(i.eye)<0?1:-1):"XYZE"===t?(i.rotationAxis.copy(i.offset).cross(i.eye).normalize(),i.rotationAngle=i.offset.dot(i.tempVector.copy(i.rotationAxis).cross(i.eye))*s):"X"!==t&&"Y"!==t&&"Z"!==t||(i.rotationAxis.copy(i.unit[t]),i.tempVector.copy(i.unit[t]),"local"===o&&i.tempVector.applyQuaternion(i.worldQuaternion),i.rotationAngle=i.offset.dot(i.tempVector.cross(i.eye).normalize())*s),i.rotationSnap&&(i.rotationAngle=Math.round(i.rotationAngle/i.rotationSnap)*i.rotationSnap),"local"===o&&"E"!==t&&"XYZE"!==t?(r.quaternion.copy(i.quaternionStart),r.quaternion.multiply(i.tempQuaternion.setFromAxisAngle(i.rotationAxis,i.rotationAngle)).normalize()):(i.rotationAxis.applyQuaternion(i.parentQuaternionInv),r.quaternion.copy(i.tempQuaternion.setFromAxisAngle(i.rotationAxis,i.rotationAngle)),r.quaternion.multiply(i.quaternionStart).normalize())}i.dispatchEvent(i.changeEvent),i.dispatchEvent(i.objectChangeEvent)}}},i.pointerUp=function(e){0===e.button&&(i.dragging&&null!==i.axis&&(i.mouseUpEvent.mode=i.mode,i.dispatchEvent(i.mouseUpEvent)),i.dragging=!1,i.axis=null)},i.getPointer=function(e){var t;if(i.domElement&&(null===(t=i.domElement.ownerDocument)||void 0===t?void 0:t.pointerLockElement))return{x:0,y:0,button:e.button};var n,r=e.changedTouches?e.changedTouches[0]:e,o=null===(n=i.domElement)||void 0===n?void 0:n.getBoundingClientRect();return{x:(r.clientX-o.left)/o.width*2-1,y:-(r.clientY-o.top)/o.height*2+1,button:e.button}},i.onPointerHover=function(e){if(i.enabled)switch(e.pointerType){case"mouse":case"pen":i.pointerHover(i.getPointer(e))}},i.onPointerDown=function(e){i.enabled&&i.domElement&&(i.domElement.style.touchAction="none",i.domElement.ownerDocument.addEventListener("pointermove",i.onPointerMove),i.pointerHover(i.getPointer(e)),i.pointerDown(i.getPointer(e)))},i.onPointerMove=function(e){i.enabled&&i.pointerMove(i.getPointer(e))},i.onPointerUp=function(e){i.enabled&&i.domElement&&(i.domElement.style.touchAction="",i.domElement.ownerDocument.removeEventListener("pointermove",i.onPointerMove),i.pointerUp(i.getPointer(e)))},i.getMode=function(){return i.mode},i.setMode=function(e){i.mode=e},i.setTranslationSnap=function(e){i.translationSnap=e},i.setRotationSnap=function(e){i.rotationSnap=e},i.setScaleSnap=function(e){i.scaleSnap=e},i.setSize=function(e){i.size=e},i.setSpace=function(e){i.space=e},i.update=function(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")},i.connect=function(e){e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.domElement=e,i.domElement.addEventListener("pointerdown",i.onPointerDown),i.domElement.addEventListener("pointermove",i.onPointerHover),i.domElement.ownerDocument.addEventListener("pointerup",i.onPointerUp)},i.dispose=function(){var e,t,n,r,o,a;null===(e=i.domElement)||void 0===e||e.removeEventListener("pointerdown",i.onPointerDown),null===(t=i.domElement)||void 0===t||t.removeEventListener("pointermove",i.onPointerHover),null===(n=i.domElement)||void 0===n||null===(r=n.ownerDocument)||void 0===r||r.removeEventListener("pointermove",i.onPointerMove),null===(o=i.domElement)||void 0===o||null===(a=o.ownerDocument)||void 0===a||a.removeEventListener("pointerup",i.onPointerUp),i.traverse((function(e){var t=e;t.geometry&&t.geometry.dispose(),t.material&&t.material.dispose()}))},i.domElement=o,i.camera=r,i.gizmo=new K(e,a),i.add(i.gizmo),i.plane=new ee,i.add(i.plane);var l=function(e,t){var n=t;Object.defineProperty(Z(i),e,{get:function(){return void 0!==n?n:t},set:function(t){n!==t&&(n=t,this.plane[e]=t,this.gizmo[e]=t,this.dispatchEvent({type:e+"-changed",value:t}),this.dispatchEvent(this.changeEvent))}}),i[e]=t,i.plane[e]=t,i.gizmo[e]=t};return l("camera",i.camera),l("object",i.object),l("enabled",i.enabled),l("axis",i.axis),l("mode",i.mode),l("translationSnap",i.translationSnap),l("rotationSnap",i.rotationSnap),l("scaleSnap",i.scaleSnap),l("space",i.space),l("size",i.size),l("dragging",i.dragging),l("showX",i.showX),l("showY",i.showY),l("showZ",i.showZ),l("worldPosition",i.worldPosition),l("worldPositionStart",i.worldPositionStart),l("worldQuaternion",i.worldQuaternion),l("worldQuaternionStart",i.worldQuaternionStart),l("cameraPosition",i.cameraPosition),l("cameraQuaternion",i.cameraQuaternion),l("pointStart",i.pointStart),l("pointEnd",i.pointEnd),l("rotationAxis",i.rotationAxis),l("rotationAngle",i.rotationAngle),l("eye",i.eye),void 0!==o&&i.connect(o),i}return n}(y.Object3D),K=function(e){U(n,e);var t=$(n);function n(e,r){var o;B(this,n),(o=t.call(this)).isTransformControlsGizmo=!0,o.type="TransformControlsGizmo",o.tempVector=new y.Vector3(0,0,0),o.tempEuler=new y.Euler,o.alignVector=new y.Vector3(0,1,0),o.zeroVector=new y.Vector3(0,0,0),o.lookAtMatrix=new y.Matrix4,o.tempQuaternion=new y.Quaternion,o.tempQuaternion2=new y.Quaternion,o.identityQuaternion=new y.Quaternion,o.unitX=new y.Vector3(1,0,0),o.unitY=new y.Vector3(0,1,0),o.unitZ=new y.Vector3(0,0,1),o.rotationAxis=new y.Vector3,o.cameraPosition=new y.Vector3,o.worldPositionStart=new y.Vector3,o.worldQuaternionStart=new y.Quaternion,o.worldPosition=new y.Vector3,o.worldQuaternion=new y.Quaternion,o.eye=new y.Vector3,o.camera=null,o.enabled=!0,o.axis=null,o.mode="translate",o.space="world",o.size=1,o.dragging=!1,o.showX=!0,o.showY=!0,o.showZ=!0,o.updateMatrixWorld=function(){var e=function(e){var t=i[e];t.visible=!0,t.rotation.set(0,0,0),t.position.copy(o.worldPosition);var n=void 0;if(n=o.camera.isOrthographicCamera?(o.camera.top-o.camera.bottom)/o.camera.zoom:o.worldPosition.distanceTo(o.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*o.camera.fov/360)/o.camera.zoom,7),t.scale.set(1,1,1).multiplyScalar(n*o.size/7),"helper"===t.tag)return t.visible=!1,"AXIS"===t.name?(t.position.copy(o.worldPositionStart),t.visible=!!o.axis,"X"===o.axis&&(o.tempQuaternion.setFromEuler(o.tempEuler.set(0,0,0)),t.quaternion.copy(r).multiply(o.tempQuaternion),Math.abs(o.alignVector.copy(o.unitX).applyQuaternion(r).dot(o.eye))>.9&&(t.visible=!1)),"Y"===o.axis&&(o.tempQuaternion.setFromEuler(o.tempEuler.set(0,0,Math.PI/2)),t.quaternion.copy(r).multiply(o.tempQuaternion),Math.abs(o.alignVector.copy(o.unitY).applyQuaternion(r).dot(o.eye))>.9&&(t.visible=!1)),"Z"===o.axis&&(o.tempQuaternion.setFromEuler(o.tempEuler.set(0,Math.PI/2,0)),t.quaternion.copy(r).multiply(o.tempQuaternion),Math.abs(o.alignVector.copy(o.unitZ).applyQuaternion(r).dot(o.eye))>.9&&(t.visible=!1)),"XYZE"===o.axis&&(o.tempQuaternion.setFromEuler(o.tempEuler.set(0,Math.PI/2,0)),o.alignVector.copy(o.rotationAxis),t.quaternion.setFromRotationMatrix(o.lookAtMatrix.lookAt(o.zeroVector,o.alignVector,o.unitY)),t.quaternion.multiply(o.tempQuaternion),t.visible=o.dragging),"E"===o.axis&&(t.visible=!1)):"START"===t.name?(t.position.copy(o.worldPositionStart),t.visible=o.dragging):"END"===t.name?(t.position.copy(o.worldPosition),t.visible=o.dragging):"DELTA"===t.name?(t.position.copy(o.worldPositionStart),t.quaternion.copy(o.worldQuaternionStart),o.tempVector.set(1e-10,1e-10,1e-10).add(o.worldPositionStart).sub(o.worldPosition).multiplyScalar(-1),o.tempVector.applyQuaternion(o.worldQuaternionStart.clone().invert()),t.scale.copy(o.tempVector),t.visible=o.dragging):(t.quaternion.copy(r),o.dragging?t.position.copy(o.worldPositionStart):t.position.copy(o.worldPosition),o.axis&&(t.visible=-1!==o.axis.search(t.name))),"continue";if(t.quaternion.copy(r),"translate"===o.mode||"scale"===o.mode){var a=.99;"X"!==t.name&&"XYZX"!==t.name||Math.abs(o.alignVector.copy(o.unitX).applyQuaternion(r).dot(o.eye))>a&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),"Y"!==t.name&&"XYZY"!==t.name||Math.abs(o.alignVector.copy(o.unitY).applyQuaternion(r).dot(o.eye))>a&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),"Z"!==t.name&&"XYZZ"!==t.name||Math.abs(o.alignVector.copy(o.unitZ).applyQuaternion(r).dot(o.eye))>a&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),"XY"===t.name&&Math.abs(o.alignVector.copy(o.unitZ).applyQuaternion(r).dot(o.eye))<.2&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),"YZ"===t.name&&Math.abs(o.alignVector.copy(o.unitX).applyQuaternion(r).dot(o.eye))<.2&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),"XZ"===t.name&&Math.abs(o.alignVector.copy(o.unitY).applyQuaternion(r).dot(o.eye))<.2&&(t.scale.set(1e-10,1e-10,1e-10),t.visible=!1),-1!==t.name.search("X")&&(o.alignVector.copy(o.unitX).applyQuaternion(r).dot(o.eye)<0?"fwd"===t.tag?t.visible=!1:t.scale.x*=-1:"bwd"===t.tag&&(t.visible=!1)),-1!==t.name.search("Y")&&(o.alignVector.copy(o.unitY).applyQuaternion(r).dot(o.eye)<0?"fwd"===t.tag?t.visible=!1:t.scale.y*=-1:"bwd"===t.tag&&(t.visible=!1)),-1!==t.name.search("Z")&&(o.alignVector.copy(o.unitZ).applyQuaternion(r).dot(o.eye)<0?"fwd"===t.tag?t.visible=!1:t.scale.z*=-1:"bwd"===t.tag&&(t.visible=!1))}else"rotate"===o.mode&&(o.tempQuaternion2.copy(r),o.alignVector.copy(o.eye).applyQuaternion(o.tempQuaternion.copy(r).invert()),-1!==t.name.search("E")&&t.quaternion.setFromRotationMatrix(o.lookAtMatrix.lookAt(o.eye,o.zeroVector,o.unitY)),"X"===t.name&&(o.tempQuaternion.setFromAxisAngle(o.unitX,Math.atan2(-o.alignVector.y,o.alignVector.z)),o.tempQuaternion.multiplyQuaternions(o.tempQuaternion2,o.tempQuaternion),t.quaternion.copy(o.tempQuaternion)),"Y"===t.name&&(o.tempQuaternion.setFromAxisAngle(o.unitY,Math.atan2(o.alignVector.x,o.alignVector.z)),o.tempQuaternion.multiplyQuaternions(o.tempQuaternion2,o.tempQuaternion),t.quaternion.copy(o.tempQuaternion)),"Z"===t.name&&(o.tempQuaternion.setFromAxisAngle(o.unitZ,Math.atan2(o.alignVector.y,o.alignVector.x)),o.tempQuaternion.multiplyQuaternions(o.tempQuaternion2,o.tempQuaternion),t.quaternion.copy(o.tempQuaternion)));t.visible=t.visible&&(-1===t.name.indexOf("X")||o.showX),t.visible=t.visible&&(-1===t.name.indexOf("Y")||o.showY),t.visible=t.visible&&(-1===t.name.indexOf("Z")||o.showZ),t.visible=t.visible&&(-1===t.name.indexOf("E")||o.showX&&o.showY&&o.showZ),t.material.tempOpacity=t.material.tempOpacity||t.material.opacity,t.material.tempColor=t.material.tempColor||t.material.color.clone(),t.material.color.copy(t.material.tempColor),t.material.opacity=t.material.tempOpacity,o.enabled?o.axis&&(t.name===o.axis||o.axis.split("").some((function(e){return t.name===e}))?(t.material.opacity=1,t.material.color.lerp(new y.Color(1,1,1),.5)):(t.material.opacity*=.25,t.material.color.lerp(new y.Color(1,1,1),.5))):(t.material.opacity*=.5,t.material.color.lerp(new y.Color(1,1,1),.5))},t=o.space;"scale"===o.mode&&(t="local");var r="local"===t?o.worldQuaternion:o.identityQuaternion;o.gizmo.translate.visible="translate"===o.mode,o.gizmo.rotate.visible="rotate"===o.mode,o.gizmo.scale.visible="scale"===o.mode,o.helper.translate.visible="translate"===o.mode,o.helper.rotate.visible="rotate"===o.mode,o.helper.scale.visible="scale"===o.mode;var i=[];i=(i=(i=i.concat(o.picker[o.mode].children)).concat(o.gizmo[o.mode].children)).concat(o.helper[o.mode].children);for(var a=0;a<i.length;a++)e(a);G((Z(o),F(n.prototype)),"updateMatrixWorld",o).call(o)};var i=new y.MeshBasicMaterial({depthTest:r,depthWrite:r,transparent:!0,side:y.DoubleSide,fog:!1,toneMapped:!1}),a=new y.LineBasicMaterial({depthTest:r,depthWrite:r,transparent:!0,linewidth:1,fog:!1,toneMapped:!1}),l=i.clone();l.opacity=.15;var s=i.clone();s.opacity=.33;var c=i.clone();c.color.set(16711680);var u=i.clone();u.color.set(65280);var p=i.clone();p.color.set(255);var m=i.clone();m.opacity=.25;var d=m.clone();d.color.set(16776960);var f=m.clone();f.color.set(65535);var h=m.clone();h.color.set(16711935),i.clone().color.set(16776960);var v=a.clone();v.color.set(16711680);var g=a.clone();g.color.set(65280);var w=a.clone();w.color.set(255);var x=a.clone();x.color.set(65535);var b=a.clone();b.color.set(16711935);var j=a.clone();j.color.set(16776960);var S=a.clone();S.color.set(7895160);var M=j.clone();M.opacity=.25;var P=new y.CylinderGeometry(0,.05,.2,12,1,!1),O=new y.SphereGeometry(.035),E=new y.BoxGeometry(.125,.125,.125),L=new y.BufferGeometry;L.setAttribute("position",new y.Float32BufferAttribute([0,0,0,e,0,0],3));var Y=function(e,t){for(var n=new y.BufferGeometry,r=[],o=0;o<=64*t;++o)r.push(0,Math.cos(o/32*Math.PI)*e,Math.sin(o/32*Math.PI)*e);return n.setAttribute("position",new y.Float32BufferAttribute(r,3)),n},I={X:[[new y.Mesh(P,c),[e,0,0],[0,0,-Math.PI/2],null,"fwd"],[new y.Mesh(P,c),[e,0,0],[0,0,Math.PI/2],null,"bwd"],[new y.Line(L,v)],[new y.Mesh(O,c)]],Y:[[new y.Mesh(P,u),[0,e,0],null,null,"fwd"],[new y.Mesh(P,u),[0,e,0],[Math.PI,0,0],null,"bwd"],[new y.Line(L,g),null,[0,0,Math.PI/2]],[new y.Mesh(O,u)]],Z:[[new y.Mesh(P,p),[0,0,e],[Math.PI/2,0,0],null,"fwd"],[new y.Mesh(P,p),[0,0,e],[-Math.PI/2,0,0],null,"bwd"],[new y.Line(L,w),null,[0,-Math.PI/2,0]],[new y.Mesh(O,p)]],XYZ:[[new y.Mesh(new y.OctahedronGeometry(.1,0),m.clone()),[0,0,0],[0,0,0]]],XY:[[new y.Mesh(new y.PlaneGeometry(.295,.295),d.clone()),[.15,.15,0]],[new y.Line(L,j),[.18,.3,0],null,[.125,1,1]],[new y.Line(L,j),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new y.Mesh(new y.PlaneGeometry(.295,.295),f.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new y.Line(L,x),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new y.Line(L,x),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new y.Mesh(new y.PlaneGeometry(.295,.295),h.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new y.Line(L,b),[.18,0,.3],null,[.125,1,1]],[new y.Line(L,b),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},A={X:[[new y.Mesh(new y.CylinderGeometry(.1,0,e,4,1,!1),l),[.6*e,0,0],[0,0,-Math.PI/2]]],Y:[[new y.Mesh(new y.CylinderGeometry(.1,0,e,4,1,!1),l),[0,.6*e,0]]],Z:[[new y.Mesh(new y.CylinderGeometry(.1,0,e,4,1,!1),l),[0,0,.6*e],[Math.PI/2,0,0]]],XYZ:[[new y.Mesh(new y.OctahedronGeometry(.2,0),l)]],XY:[[new y.Mesh(new y.PlaneGeometry(.4,.4),l),[.2,.2,0]]],YZ:[[new y.Mesh(new y.PlaneGeometry(.4,.4),l),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new y.Mesh(new y.PlaneGeometry(.4,.4),l),[.2,0,.2],[-Math.PI/2,0,0]]]},_={START:[[new y.Mesh(new y.OctahedronGeometry(.01,2),s),null,null,null,"helper"]],END:[[new y.Mesh(new y.OctahedronGeometry(.01,2),s),null,null,null,"helper"]],DELTA:[[new y.Line(function(){var e=new y.BufferGeometry;return e.setAttribute("position",new y.Float32BufferAttribute([0,0,0,1,1,1],3)),e}(),s),null,null,null,"helper"]],X:[[new y.Line(L,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new y.Line(L,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new y.Line(L,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},V={X:[[new y.Line(Y(1,.5),v)],[new y.Mesh(new y.OctahedronGeometry(.04,0),c),[0,0,.99],null,[1,3,1]]],Y:[[new y.Line(Y(1,.5),g),null,[0,0,-Math.PI/2]],[new y.Mesh(new y.OctahedronGeometry(.04,0),u),[0,0,.99],null,[3,1,1]]],Z:[[new y.Line(Y(1,.5),w),null,[0,Math.PI/2,0]],[new y.Mesh(new y.OctahedronGeometry(.04,0),p),[.99,0,0],null,[1,3,1]]],E:[[new y.Line(Y(1.25,1),M),null,[0,Math.PI/2,0]],[new y.Mesh(new y.CylinderGeometry(.03,0,.15,4,1,!1),M),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new y.Mesh(new y.CylinderGeometry(.03,0,.15,4,1,!1),M),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new y.Mesh(new y.CylinderGeometry(.03,0,.15,4,1,!1),M),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new y.Mesh(new y.CylinderGeometry(.03,0,.15,4,1,!1),M),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new y.Line(Y(1,1),S),null,[0,Math.PI/2,0]]]},T={AXIS:[[new y.Line(L,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},X={X:[[new y.Mesh(new y.TorusGeometry(1,.1,4,24),l),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new y.Mesh(new y.TorusGeometry(1,.1,4,24),l),[0,0,0],[Math.PI/2,0,0]]],Z:[[new y.Mesh(new y.TorusGeometry(1,.1,4,24),l),[0,0,0],[0,0,-Math.PI/2]]],E:[[new y.Mesh(new y.TorusGeometry(1.25,.1,2,24),l)]],XYZE:[[new y.Mesh(new y.SphereGeometry(.7,10,8),l)]]},Q={X:[[new y.Mesh(E,c),[.8,0,0],[0,0,-Math.PI/2]],[new y.Line(L,v),null,null,[.8,1,1]]],Y:[[new y.Mesh(E,u),[0,.8,0]],[new y.Line(L,g),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new y.Mesh(E,p),[0,0,.8],[Math.PI/2,0,0]],[new y.Line(L,w),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new y.Mesh(E,d),[.85,.85,0],null,[2,2,.2]],[new y.Line(L,j),[.855,.98,0],null,[.125,1,1]],[new y.Line(L,j),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new y.Mesh(E,f),[0,.85,.85],null,[.2,2,2]],[new y.Line(L,x),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new y.Line(L,x),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new y.Mesh(E,h),[.85,0,.85],null,[2,.2,2]],[new y.Line(L,b),[.855,0,.98],null,[.125,1,1]],[new y.Line(L,b),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new y.Mesh(new y.BoxGeometry(.125,.125,.125),m.clone()),[1.1,0,0]]],XYZY:[[new y.Mesh(new y.BoxGeometry(.125,.125,.125),m.clone()),[0,1.1,0]]],XYZZ:[[new y.Mesh(new y.BoxGeometry(.125,.125,.125),m.clone()),[0,0,1.1]]]},k={X:[[new y.Mesh(new y.CylinderGeometry(.2,0,.8,4,1,!1),l),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new y.Mesh(new y.CylinderGeometry(.2,0,.8,4,1,!1),l),[0,.5,0]]],Z:[[new y.Mesh(new y.CylinderGeometry(.2,0,.8,4,1,!1),l),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new y.Mesh(E,l),[.85,.85,0],null,[3,3,.2]]],YZ:[[new y.Mesh(E,l),[0,.85,.85],null,[.2,3,3]]],XZ:[[new y.Mesh(E,l),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new y.Mesh(new y.BoxGeometry(.2,.2,.2),l),[1.1,0,0]]],XYZY:[[new y.Mesh(new y.BoxGeometry(.2,.2,.2),l),[0,1.1,0]]],XYZZ:[[new y.Mesh(new y.BoxGeometry(.2,.2,.2),l),[0,0,1.1]]]},C={X:[[new y.Line(L,s.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new y.Line(L,s.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new y.Line(L,s.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},R=function(e){var t=new y.Object3D;for(var n in e)for(var r=e[n].length;r--;){var o=e[n][r][0].clone(),i=e[n][r][1],a=e[n][r][2],l=e[n][r][3],s=e[n][r][4];o.name=n,o.tag=s,i&&o.position.set(i[0],i[1],i[2]),a&&o.rotation.set(a[0],a[1],a[2]),l&&o.scale.set(l[0],l[1],l[2]),o.updateMatrix();var c=o.geometry.clone();c.applyMatrix4(o.matrix),o.geometry=c,o.renderOrder=1/0,o.position.set(0,0,0),o.rotation.set(0,0,0),o.scale.set(1,1,1),t.add(o)}return t};return o.gizmo={},o.picker={},o.helper={},o.add(o.gizmo.translate=R(I)),o.add(o.gizmo.rotate=R(V)),o.add(o.gizmo.scale=R(Q)),o.add(o.picker.translate=R(A)),o.add(o.picker.rotate=R(X)),o.add(o.picker.scale=R(k)),o.add(o.helper.translate=R(_)),o.add(o.helper.rotate=R(T)),o.add(o.helper.scale=R(C)),o.picker.translate.visible=!1,o.picker.rotate.visible=!1,o.picker.scale.visible=!1,o}return n}(y.Object3D),ee=function(e){U(n,e);var t=$(n);function n(){var e;return B(this,n),(e=t.call(this,new y.PlaneGeometry(1e5,1e5,2,2),new y.MeshBasicMaterial({visible:!1,wireframe:!0,side:y.DoubleSide,transparent:!0,opacity:.1,toneMapped:!1}))).isTransformControlsPlane=!0,e.type="TransformControlsPlane",e.unitX=new y.Vector3(1,0,0),e.unitY=new y.Vector3(0,1,0),e.unitZ=new y.Vector3(0,0,1),e.tempVector=new y.Vector3,e.dirVector=new y.Vector3,e.alignVector=new y.Vector3,e.tempMatrix=new y.Matrix4,e.identityQuaternion=new y.Quaternion,e.cameraQuaternion=new y.Quaternion,e.worldPosition=new y.Vector3,e.worldQuaternion=new y.Quaternion,e.eye=new y.Vector3,e.axis=null,e.mode="translate",e.space="world",e.updateMatrixWorld=function(){var t=e.space;switch(e.position.copy(e.worldPosition),"scale"===e.mode&&(t="local"),e.unitX.set(1,0,0).applyQuaternion("local"===t?e.worldQuaternion:e.identityQuaternion),e.unitY.set(0,1,0).applyQuaternion("local"===t?e.worldQuaternion:e.identityQuaternion),e.unitZ.set(0,0,1).applyQuaternion("local"===t?e.worldQuaternion:e.identityQuaternion),e.alignVector.copy(e.unitY),e.mode){case"translate":case"scale":switch(e.axis){case"X":e.alignVector.copy(e.eye).cross(e.unitX),e.dirVector.copy(e.unitX).cross(e.alignVector);break;case"Y":e.alignVector.copy(e.eye).cross(e.unitY),e.dirVector.copy(e.unitY).cross(e.alignVector);break;case"Z":e.alignVector.copy(e.eye).cross(e.unitZ),e.dirVector.copy(e.unitZ).cross(e.alignVector);break;case"XY":e.dirVector.copy(e.unitZ);break;case"YZ":e.dirVector.copy(e.unitX);break;case"XZ":e.alignVector.copy(e.unitZ),e.dirVector.copy(e.unitY);break;case"XYZ":case"E":e.dirVector.set(0,0,0)}break;default:e.dirVector.set(0,0,0)}0===e.dirVector.length()?e.quaternion.copy(e.cameraQuaternion):(e.tempMatrix.lookAt(e.tempVector.set(0,0,0),e.dirVector,e.alignVector),e.quaternion.setFromRotationMatrix(e.tempMatrix)),G((Z(e),F(n.prototype)),"updateMatrixWorld",e).call(e)},e}return n}(y.Mesh);function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ne(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function re(e,t,n){return re=ne()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&oe(o,n.prototype),o},re.apply(null,arguments)}function oe(e,t){return oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},oe(e,t)}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||le(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||le(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){if(e){if("string"===typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?te(e,t):void 0}}function se(e){var t=e.mode,n=e.set,o=e.value,i=e.matrix,a=e.axis,s=e.child,c=e.length,u=e.depth,m=(0,l.w)((function(e){return[e.camera,e.gl.domElement]})),d=(0,p.useState)(null),h=d[0],y=d[1],v=ie(a,3),g=v[0],w=v[1],x=v[2],b=(0,p.useMemo)((function(){return re(J,[null!==c&&void 0!==c?c:1].concat(ae(m),[u]))}),[u,c].concat(ae(m)));(0,p.useEffect)((function(){if(null!=h)return b.attach(h),function(){b.detach()}}),[h,b]),(0,p.useEffect)((function(){if(null!=b&&null!=h){var e=function(){f.L.getState().controls&&(f.L.getState().controls.enabled=!1),P.D1.getState().setControlling(!0)},r=function(e){f.L.getState().controls&&(f.L.getState().controls.enabled=!0),setTimeout((function(){return P.D1.getState().setControlling(!1)}));var r=h[ce[t]],o=r.x,i=r.y,a=r.z;n(o,i,a)};return b.addEventListener("mouseDown",e),b.addEventListener("mouseUp",r),function(){P.D1.getState().setControlling(!1),b.removeEventListener("mouseUp",e),b.removeEventListener("mouseDown",r)}}}),[n,t,h]),null!=h&&h[ce[t]].fromArray(o);var j=(0,l.w)((function(e){return e.scene}));return(0,r.jsxs)("group",{matrixAutoUpdate:!1,matrix:i,children:[null!=h&&(0,l.g)((0,r.jsx)("primitive",{showX:g,showY:w,showZ:x,mode:t,space:"local",object:b}),j),(0,r.jsx)("group",{ref:y,children:null!=s&&(0,r.jsx)("primitive",{object:s})})]})}var ce={rotate:"rotation",scale:"scale",translate:"position"},ue=[!0,!1,!0];function pe(e){var t=e.substepValue,n=e.getSubstep,o=e.valueRef,i=e.matrix,a=(0,E.EB)(),l="raw"===t.children[0].type?t.children[0].value:0,s="raw"===t.children[1].type?t.children[1].value:0,c="raw"===t.children[2].type?t.children[2].value:0;return(0,r.jsx)(se,{value:[l,s,c],axis:ue,matrix:i,mode:"translate",set:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a.getState().replace((function(e){(null==n?e:n(e)).children=t.map((function(e){return{type:"raw",value:e}}))}),o.current)}})}function me(e){var t=e.description,n=(0,E.EB)()((function(e){return"gui"===e.type&&null==e.requested?e.selectionsList.filter((function(e){return(0,Y.Lr)(t,(0,Y.Il)(e.steps)[0])})):void 0}),Y.wU);return null==n?null:(0,r.jsx)(r.Fragment,{children:n.map((function(e){return(0,r.jsx)(fe,{values:e.values,step:e.steps},(0,Y.zq)(e.steps))}))})}function de(e){return e}function fe(e){var t=e.step,n=e.values;if("string"==typeof t||"operation"!=t.type)return null;var o=n.map((function(e){return e.before.raw})).filter((function(e,t,n){return n.indexOf(e)===t})).filter(he),i=(0,p.useMemo)((function(){return{current:t}}),[]);return i.current=t,"point3"===t.identifier?(0,r.jsx)(r.Fragment,{children:o.map((function(e,n){return(0,r.jsx)(pe,{matrix:new y.Matrix4,valueRef:i,getSubstep:de,substepValue:t},n)}))}):null}function he(e){return t=e,null!=(n=X.WV)&&"undefined"!==typeof Symbol&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](t):t instanceof n;var t,n}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ve(e,t){return null!=t&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function ge(e){return function(e){if(Array.isArray(e))return ye(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ye(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var we=new T.WV(new y.Vector3(0,0,0),[],new y.Scene);function xe(){var e=(0,E.g4)((function(e){return e.descriptions}),Y.wU);return(0,r.jsx)(r.Fragment,{children:e.map((function(e,t){var n=e.seed,o=e.name;return(0,r.jsx)(be,{seed:n,name:o,index:t},o)}))})}function be(e){var t=e.seed,n=e.name,o=(e.index,(0,E.EB)()),i=(0,E.g4)((function(e){return e.domain})),a=o((function(e){return e.selectedDescriptions.includes(n)})),l=o((function(e){var t;return null===(t=e.grammar.find((function(e){var t=e.name;return(0,Y.Lr)(n,t)})))||void 0===t?void 0:t.name}));return null==l?null:a||"movement"===i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(me,{description:n}),(0,r.jsx)(Le,{seed:t,name:n}),(0,r.jsx)(Me,{description:n})]}):(0,r.jsx)(Ee,{seed:t,name:n})}var je=new y.SphereBufferGeometry;function Se(e){var t=new y.Mesh(je);return ve(e,T.rd)&&t.position.copy(e.position[e.position.length-1].position),t}function Me(e){var t=e.description,n=(0,E.EB)(),o=((0,f.L)((function(e){return e.setTime})),n((function(e){if("gui"===e.type)return Array.from(new Set((null!=e.hovered?e.selectionsList.concat(e.hovered):e.selectionsList).filter((function(e){var n=e.steps;return(0,Y.Lr)(t,(0,Y.Il)(n)[0])})).reduce((function(e,t){var n,r;null===(n=t.values[0])||void 0===n||n.before.raw,null===(r=t.values[0])||void 0===r||r.after.raw;return e.concat(t.values.filter((function(e){return null!=e.object})).map((function(e){return e.object})))}),[])))}),Y.wU));return null==o?null:(0,r.jsx)(r.Fragment,{children:o.map((function(e){return(0,r.jsx)(Pe,{object:e,colorAdd:.25},e.uuid)}))})}function Pe(e){var t=e.object,n=e.colorAdd;return(0,p.useEffect)((function(){return t.traverse((function(e){"material"in e&&e.material.color.addScalar(n)})),function(){t.traverse((function(e){"material"in e&&e.material.color.addScalar(-n)}))}}),[t]),null}function Oe(e,t){return e((function(e){return"gui"===e.type?(0,Y.Bc)(e.grammar,e.dependencyMap,t):void 0}),Y.wU)}function Ee(e){var t=e.name,n=e.seed,o=(0,p.useRef)(null),i=(0,E.EB)();return function(e,t,n){var r=(0,E.EB)(),o=e&&e[0].name?e[0].name:"",i=we,a=(0,f.L)((function(e){return e.world})),l=(0,f.L)((function(e){return e.setLoadingState})),s=f.L.getState().treePath.some((function(e){return e.data.key.replace("Start@","").split("_")[0]===o.replace("Start@","")}));(0,p.useEffect)((function(){if(null!=n.current&&null!=e&&!s){var a=D((0,I.of)(i).pipe((0,A.U)((function(e){var t=f.L.getState().treePath.filter((function(e){return!(e.data.key.replace("Start@","").split("_")[0]===o.replace("Start@",""))}));return f.L.getState().setTreePath(t),e})),(0,Y.Tn)(void 0,void 0,{environment:(0,I.of)(n.current.parent),seed:(0,I.of)(t)}),(0,Y.Ii)(e,c.J,{delay:r.getState().interpretationDelay,seed:t,listeners:{onAfterStep:function(e,t){if("operation"===e.type){var n=e.identifier;"createOb"!==n&&"pedestrian"!==n&&"cyclist"!==n&&"car"!==n&&"createFromPrimitive"!==n&&"moveRight"!==n&&"moveLeft"!==n&&"moveUp"!==n&&"moveDown"!==n&&"moveRotate"!==n&&"standStill"!==n&&"sample"!==n&&"moveUpAvoid"!==n&&"moveDownAvoid"!==n&&"moveRightAvoid"!==n&&"moveLeftAvoid"!==n&&"moveRotateAvoid"!==n||t.raw.grammarSteps.push(e)}}}})),o,n.current,0,(function(e){console.error(e),P.D1.getState().setError(e.message)}),l);return function(){var e,t;null===(t=n.current)||void 0===t||(e=t).remove.apply(e,ge(n.current.children)),a.unsubscribe()}}}),[r,e,t,a])}(Oe(i,t),n,o),(0,r.jsx)("group",{onClick:function(e){var n;null==e.intersections[0].object.userData.steps&&(e.stopPropagation(),i.getState().selectDescription(t,null!==(n=i.getState().shift)&&void 0!==n&&n))},ref:o})}function Le(e){var t=e.name,n=e.seed,o=(0,E.EB)(),i=Oe(o,t),a=(0,p.useRef)(null);return function(e,t,n,r){var o=(0,E.EB)(),i=(0,f.L)(),a=(0,f.L)((function(e){return e.world})),l=(0,f.L)((function(e){return e.setLoadingState}));(0,p.useEffect)((function(){if(null!=r.current&&null!=e){var a;i.setData(null),z.D.getState().treePath=[];var s=new Map,u=new Map,p=new _.x,m=p.pipe((0,Y.br)(300)).subscribe((function(e){return o.getState().editIndices(e,!0)})),d=e&&e[0].name?e[0].name:"",h=we;try{a=D((0,I.of)(h).pipe((0,A.U)((function(e){var t=f.L.getState().treePath.filter((function(e){return!(e.data.key.replace("Start@","").split("_")[0]===d.replace("Start@",""))}));return f.L.getState().setTreePath(t),e})),(0,Y.Tn)(void 0,void 0,{environment:(0,I.of)(r.current.parent),seed:(0,I.of)(n)}),(0,Y.Ii)(e,c.J,{delay:o.getState().interpretationDelay,seed:n,listeners:{onAfterStep:function(e,t){var n=s.get(e),r=null===n||void 0===n?void 0:n.find((function(e){var n=(0,Y.Up)(t.index,e.index);return n===Y.J.Predecessor||n===Y.J.Equal}));if("operation"===e.type){var o=e.identifier;"createOb"!==o&&"pedestrian"!==o&&"cyclist"!==o&&"car"!==o&&"createFromPrimitive"!==o&&"moveRight"!==o&&"moveLeft"!==o&&"moveUp"!==o&&"moveDown"!==o&&"moveRotate"!==o&&"standStill"!==o&&"sample"!==o&&"moveUpAvoid"!==o&&"moveDownAvoid"!==o&&"moveRightAvoid"!==o&&"moveLeftAvoid"!==o&&"moveRotateAvoid"!==o||t.raw.grammarSteps.push(e)}null!=r&&p.next({steps:e,value:{after:t,before:r,object:ve(t.raw,T.WV)?Se(t.raw):void 0}});var i=t.index.join(","),a=u.get(i);null!=a&&(a.path[0]!==e.path[0]||function(e,t){if(e===t)return!0;if(e.length<t.length)return!1;for(var n=0;n<t.length;n++)if(e[n]!=t[n])return!1;return!0}(a.path,e.path)&&(0,V.I)({},e))||u.set(i,e)},onBeforeStep:function(e,t){var n=s.get(e);if(null==n&&(n=[],s.set(e,n)),n.push(t),"symbol"===e.type){var r=t.index.join(",");u.delete(r)}}}})),d,r.current,0,(function(e){console.error(e),P.D1.getState().setError(e.message)}),l)}catch(y){P.D1.getState().setError(y.message)}return function(){var e,n;o.getState().clearValueMap(t),null===(n=r.current)||void 0===n||(e=n).remove.apply(e,ge(r.current.children)),null===a||void 0===a||a.unsubscribe(),null===m||void 0===m||m.unsubscribe()}}}),[o,e,n,a])}(i,t,n,a),null==i?null:(0,r.jsx)("object3D",{onPointerMove:function(e){if(0!==e.intersections.length){var t=e.intersections[0].object,n=t.userData.steps,r=t.userData.value;null!=n&&null!=r&&(e.stopPropagation(),o.getState().onStartHover(n,[r]))}},onPointerOut:function(e){var t=e.object,n=t.userData.steps,r=t.userData.value;null!=n&&null!=r&&(e.stopPropagation(),o.getState().onEndHover(n))},onClick:function(e){var t=e.intersections[0].object,n=t.userData.steps,r=t.userData.value;if(null!=n&&null!=r){e.stopPropagation();var i=o.getState();"gui"==i.type&&null==i.requested&&o.getState().selectResult(n,r)}},ref:a})}var Ye=n(1530),Ie=n(82409);function Ae(){return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-pause-fill",viewBox:"0 0 16 16",children:(0,r.jsx)("path",{d:"M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"})})}function _e(){return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-play-fill",viewBox:"0 0 16 16",children:(0,r.jsx)("path",{d:"m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"})})}function Ve(){return(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-arrow-clockwise",viewBox:"0 0 16 16",children:[(0,r.jsx)("path",{fillRule:"evenodd",d:"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"}),(0,r.jsx)("path",{d:"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"})]})}var Te=n(82359),Xe=n(6493),Qe=(0,p.forwardRef)((function(e,t){var n=(0,p.useRef)(),o=(0,g.L)("./models/remyplace.glb"),i=o.scene,a=o.materials,s=o.animations,c=(0,p.useMemo)((function(){return Te.b.clone(i)}),[i]),u=(0,l.y)(c).nodes,m=(0,p.useMemo)((function(){return new y.AnimationMixer(c)}),[i]);return s.forEach((function(e){m.clipAction(e).play()})),(0,p.useImperativeHandle)(t,(function(){return{updatePosition:function(e,t,r,o,i){n.current.position.x!=e||n.current.position.z!=r||n.current.rotation.y!=o?(n.current.rotation.y=o,n.current.position.y=t+2,n.current.position.z=r,n.current.position.x=e,m.update(i)):m.setTime(.53)},hideObject:function(){n.current.visible=!1},showObject:function(){n.current.visible=!0}}})),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("group",{ref:n,dispose:null,children:[(0,r.jsx)(Xe.xu,{args:[8,30,8],position:[0,15,0],children:(0,r.jsx)("meshPhongMaterial",{color:"#ff0000",opacity:0,transparent:!0})}),(0,r.jsxs)("group",{name:"Armature",rotation:[Math.PI/2,0,0],scale:e.scale,children:[(0,r.jsx)("primitive",{object:u.mixamorigHips}),(0,r.jsx)("skinnedMesh",{geometry:u.Body.geometry,material:a.Bodymat,skeleton:u.Body.skeleton}),(0,r.jsx)("skinnedMesh",{geometry:u.Bottoms.geometry,material:a.Bottommat,skeleton:u.Bottoms.skeleton}),(0,r.jsx)("skinnedMesh",{geometry:u.Eyelashes.geometry,material:a.Eyelashmat,skeleton:u.Eyelashes.skeleton}),(0,r.jsx)("skinnedMesh",{geometry:u.Eyes.geometry,material:a.Bodymat,skeleton:u.Eyes.skeleton}),(0,r.jsx)("skinnedMesh",{geometry:u.Hair.geometry,material:a.Hairmat,skeleton:u.Hair.skeleton}),(0,r.jsx)("skinnedMesh",{geometry:u.Shoes.geometry,material:a.Shoesmat,skeleton:u.Shoes.skeleton}),(0,r.jsx)("skinnedMesh",{geometry:u.Tops.geometry,material:a.Topmat,skeleton:u.Tops.skeleton})]})]})})}));g.L.preload("./models/remyplace.glb");var ke=(0,p.forwardRef)((function(e,t){var n,o=(0,p.useRef)(),i=(0,g.L)("./models/cyclist.glb"),a=i.nodes,l=i.materials;return(0,p.useImperativeHandle)(t,(function(){return{updatePosition:function(e,t,n,r,i){o.current.rotation.y=r,o.current.position.z=n,o.current.position.x=e},hideObject:function(){o.current.visible=!1},showObject:function(){o.current.visible=!0}}})),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("group",{ref:null!==(n=o)&&void 0!==n?n:null,dispose:null,scale:e.scale,position:[0,e.positionY,0],children:(0,r.jsxs)("group",{rotation:[Math.PI/2,0,Math.PI/2],children:[(0,r.jsx)("mesh",{geometry:a.Chain_Chain_0.geometry,material:l.Chain_COLOR_0}),(0,r.jsx)("mesh",{geometry:a.eyeball1_eyeball1_0.geometry,material:l.eyeball1}),(0,r.jsx)("mesh",{geometry:a.Frame_Frame_0.geometry,material:l.Frame_COLOR_0}),(0,r.jsx)("mesh",{geometry:a.Handlebars_Handlebars_0.geometry,material:l.Handlebars_COLOR_0}),(0,r.jsx)("mesh",{geometry:a.Rims_Rims_0.geometry,material:l.Rims_COLOR_0}),(0,r.jsx)("mesh",{geometry:a.Saddle_Saddle_0.geometry,material:l.Saddle_COLOR_0}),(0,r.jsx)("mesh",{geometry:a.Spokes_Spokes_0.geometry,material:l.Spokes_COLOR_0}),(0,r.jsx)("mesh",{geometry:a.Tyres_Tyres_0.geometry,material:l.Tyres_COLOR_0}),(0,r.jsx)("mesh",{geometry:a.UMesh_Figure_1_UMesh_Figure_1_0.geometry,material:l.UMesh_Figure_1}),(0,r.jsx)("mesh",{geometry:a.UMesh_Figure_1_UMesh_Figure_1_0001.geometry,material:l.UMesh_Figure_1}),(0,r.jsx)("mesh",{geometry:a.UMesh_Figure_1_UMesh_Figure_1_0002.geometry,material:l.UMesh_Figure_1})]})})})}));g.L.preload("./models/cyclist.glb");var Ce=(0,p.forwardRef)((function(e,t){var n=(0,p.useRef)(),o=(0,g.L)("./models/truck.glb"),i=o.nodes,a=o.materials;return(0,p.useImperativeHandle)(t,(function(){return{updatePosition:function(e,t,r,o,i){n.current.rotation.y=o,n.current.position.y=t+2,n.current.position.z=r,n.current.position.x=e},hideObject:function(){n.current.visible=!1},showObject:function(){n.current.visible=!0}}})),(0,r.jsx)("group",{ref:n,dispose:null,scale:e.scale,children:(0,r.jsx)("group",{rotation:[-Math.PI/2,0,0],children:(0,r.jsxs)("group",{rotation:[Math.PI/2,0,0],children:[(0,r.jsx)("group",{position:[3.78,64.77,.21],rotation:[0,-Math.PI/2,0],scale:[.91,.85,.85],children:(0,r.jsx)("group",{position:[10.19,-20.82,144.24],children:(0,r.jsx)("mesh",{geometry:i.BODY_BODY_0.geometry,material:a.BODY})})}),(0,r.jsx)("group",{position:[-86.39,57.34,.45],rotation:[0,-Math.PI/2,0],scale:.85,children:(0,r.jsx)("group",{position:[-1.3,-28.61,42.95],children:(0,r.jsx)("mesh",{geometry:i.interior_VOID_0.geometry,material:a.VOID})})}),(0,r.jsx)("group",{position:[8.64,20.85,.44],rotation:[Math.PI/2,0,-Math.PI],scale:1.31,children:(0,r.jsxs)("group",{position:[71.49,-.58,15.66],children:[(0,r.jsx)("mesh",{geometry:i.bottom_BOTTOM_0.geometry,material:a.BOTTOM}),(0,r.jsx)("mesh",{geometry:i["bottom_07_-_Default_0"].geometry,material:a["07_-_Default"]})]})}),(0,r.jsx)("group",{position:[-.79,30.87,.21],rotation:[0,-Math.PI/2,0],scale:[.91,.85,.85],children:(0,r.jsxs)("group",{position:[10.19,19.01,138.87],children:[(0,r.jsx)("mesh",{geometry:i.LIGHTS_LIGHT_0.geometry,material:a.LIGHT}),(0,r.jsx)("mesh",{geometry:i.LIGHTS_LIGHTS_GLASS_0.geometry,material:a.LIGHTS_GLASS})]})}),(0,r.jsx)("group",{position:[-91.96,64.56,.21],rotation:[0,-Math.PI/2,0],scale:[.91,.85,.85],children:(0,r.jsx)("group",{position:[10.19,-20.58,29.64],children:(0,r.jsx)("mesh",{geometry:i.GLASS_GLASS_0.geometry,material:a.GLASS})})}),(0,r.jsx)("group",{position:[-89.58,62.39,.21],children:(0,r.jsxs)("group",{position:[23.2,-13.96,42.09],children:[(0,r.jsx)("mesh",{geometry:i.CABIN_PLASTIC_PLASTIC_0.geometry,material:a.PLASTIC}),(0,r.jsx)("mesh",{geometry:i.CABIN_PLASTIC_METALL_0.geometry,material:a.METALL})]})}),(0,r.jsx)("group",{position:[37.58,72.49,.21],children:(0,r.jsx)("group",{position:[1.78,0,46.74],children:(0,r.jsx)("mesh",{geometry:i.BOX_METAL_METALL_0.geometry,material:a.METALL})})}),(0,r.jsx)("group",{position:[-80.35,14.59,38.22],rotation:[-Math.PI/2,0,0],scale:1.11,children:(0,r.jsxs)("group",{position:[0,-.89,0],children:[(0,r.jsx)("mesh",{geometry:i.wheel_01_RIM_0.geometry,material:a.material}),(0,r.jsx)("mesh",{geometry:i.wheel_01_TIRE_0.geometry,material:a.TIRE})]})}),(0,r.jsx)("group",{position:[65.15,14.59,34.8],rotation:[-Math.PI/2,0,0],scale:1.11,children:(0,r.jsxs)("group",{position:[0,-3.96,0],children:[(0,r.jsx)("mesh",{geometry:i.wheel_02_TIRE_0.geometry,material:a.TIRE}),(0,r.jsx)("mesh",{geometry:i.wheel_02_RIM_0.geometry,material:a.material})]})}),(0,r.jsx)("group",{position:[65.15,14.59,-34.49],rotation:[Math.PI/2,0,0],scale:1.11,children:(0,r.jsxs)("group",{position:[0,-3.96,0],children:[(0,r.jsx)("mesh",{geometry:i.wheel_003_TIRE_0.geometry,material:a.TIRE}),(0,r.jsx)("mesh",{geometry:i.wheel_003_RIM_0.geometry,material:a.material})]})}),(0,r.jsx)("group",{position:[-80.35,14.59,-37.92],rotation:[Math.PI/2,0,0],scale:1.11,children:(0,r.jsxs)("group",{position:[0,-.89,0],children:[(0,r.jsx)("mesh",{geometry:i.wheel_004_RIM_0.geometry,material:a.material}),(0,r.jsx)("mesh",{geometry:i.wheel_004_TIRE_0.geometry,material:a.TIRE})]})}),(0,r.jsx)("group",{position:[-111.5,16.83,.21],scale:[.85,.85,.91],children:(0,r.jsx)("group",{position:[9.52,-2.51,48.36],children:(0,r.jsx)("mesh",{geometry:i.BUMPER_FRONT_INNER_BOTTOM_0.geometry,material:a.BOTTOM})})}),(0,r.jsx)("group",{position:[-111.5,16.83,.21],scale:[.85,.85,.91],children:(0,r.jsx)("group",{position:[9.52,-2.51,48.36],children:(0,r.jsx)("mesh",{geometry:i.BUMPER_FRONT_PLASTIC_0.geometry,material:a.PLASTIC})})})]})})})}));g.L.preload("./models/truck.glb");var Re,Ne=n(46385);function De(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ze(e,t){switch(t){case X.LP.Cyclist:return[Ze[e].cyclist.lineOffsetX,Ze[e].cyclist.lineOffsetY,Ze[e].cyclist.lineLength,Ze[e].cyclist.textMarginX,Ze[e].cyclist.textMarginY,Ze[e].cyclist.positionY,Ze[e].cyclist.rotationY,Ze[e].cyclist.objectScale];case X.LP.Pedestrian:return[Ze[e].pedestrian.lineOffsetX,Ze[e].pedestrian.lineOffsetY,Ze[e].pedestrian.lineLength,Ze[e].pedestrian.textMarginX,Ze[e].pedestrian.textMarginY,Ze[e].pedestrian.positionY,Ze[e].pedestrian.rotationY,Ze[e].pedestrian.objectScale];case X.LP.Car:return[Ze[e].truck.lineOffsetX,Ze[e].truck.lineOffsetY,Ze[e].truck.lineLength,Ze[e].truck.textMarginX,Ze[e].truck.textMarginY,Ze[e].truck.positionY,Ze[e].truck.rotationY,Ze[e].truck.objectScale];default:return[Ze[e].pedestrian.lineOffsetX,Ze[e].pedestrian.lineOffsetY,Ze[e].pedestrian.lineLength,Ze[e].pedestrian.textMarginX,Ze[e].pedestrian.textMarginY,Ze[e].pedestrian.positionY,Ze[e].pedestrian.rotationY,Ze[e].pedestrian.objectScale]}}var Ze=(De(Re={},Ne.g.Bookstore,{pedestrian:{lineOffsetX:0,lineOffsetY:20,lineLength:50,textMarginX:0,textMarginY:50,positionY:0,rotationY:Math.PI/2,objectScale:.095},cyclist:{lineOffsetX:0,lineOffsetY:25,lineLength:50,textMarginX:-10,textMarginY:55,positionY:14,rotationY:Math.PI/2,objectScale:8},truck:{lineOffsetX:50,lineOffsetY:30,lineLength:120,textMarginX:-10,textMarginY:85,positionY:0,rotationY:Math.PI,objectScale:.6}}),De(Re,Ne.g.Eth,{pedestrian:{lineOffsetX:0,lineOffsetY:25,lineLength:50,textMarginX:-10,textMarginY:60,positionY:0,rotationY:Math.PI/2,objectScale:.12},cyclist:{lineOffsetX:0,lineOffsetY:35,lineLength:50,textMarginX:-10,textMarginY:60,positionY:20,rotationY:Math.PI/2,objectScale:10},truck:{lineOffsetX:50,lineOffsetY:40,lineLength:180,textMarginX:-10,textMarginY:120,positionY:0,rotationY:Math.PI,objectScale:.9}}),De(Re,Ne.g.Students,{pedestrian:{lineOffsetX:0,lineOffsetY:30,lineLength:50,textMarginX:-10,textMarginY:65,positionY:0,rotationY:Math.PI/2,objectScale:.14},cyclist:{lineOffsetX:0,lineOffsetY:15,lineLength:50,textMarginX:-10,textMarginY:65,positionY:20,rotationY:Math.PI/2,objectScale:10},truck:{lineOffsetX:50,lineOffsetY:40,lineLength:180,textMarginX:-10,textMarginY:120,positionY:0,rotationY:Math.PI,objectScale:.9}}),De(Re,Ne.g.Hotel,{pedestrian:{lineOffsetX:0,lineOffsetY:40,lineLength:50,textMarginX:-10,textMarginY:115,positionY:0,rotationY:Math.PI/2,objectScale:.175},cyclist:{lineOffsetX:0,lineOffsetY:15,lineLength:50,textMarginX:-10,textMarginY:85,positionY:23,rotationY:Math.PI/2,objectScale:14},truck:{lineOffsetX:50,lineOffsetY:40,lineLength:180,textMarginX:-10,textMarginY:120,positionY:0,rotationY:Math.PI,objectScale:.9}}),De(Re,Ne.g.Zara,{pedestrian:{lineOffsetX:0,lineOffsetY:30,lineLength:50,textMarginX:-10,textMarginY:70,positionY:0,rotationY:Math.PI/2,objectScale:.15},cyclist:{lineOffsetX:0,lineOffsetY:35,lineLength:80,textMarginX:-10,textMarginY:80,positionY:22,rotationY:Math.PI/2,objectScale:13},truck:{lineOffsetX:50,lineOffsetY:40,lineLength:180,textMarginX:-10,textMarginY:120,positionY:0,rotationY:Math.PI,objectScale:.9}}),Re);function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Be(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e){var t=(0,p.useRef)(),n=e.data,o=e.world.enumName,i=e.type,a=Ge(ze(o,i),8),l=(a[0],a[1],a[2],a[3],a[4],a[5]),s=(a[6],a[7]),c=(0,p.useMemo)((function(){switch(i){case X.LP.Cyclist:return(0,r.jsx)(ke,{id:e.id,ref:t,scale:s,positionY:l},e.id);case X.LP.Pedestrian:return(0,r.jsx)(Qe,{id:e.id,ref:t,scale:s,positionY:l},e.id);case X.LP.Car:return(0,r.jsx)(Ce,{id:e.id,ref:t,scale:s,positionY:l},e.id);default:return(0,r.jsx)(Qe,{id:e.id,ref:t,scale:s,positionY:l},e.id)}}),[e]);return(0,p.useEffect)((function(){if(n){var e=n.position,r=n.direction;t.current.updatePosition(e[0],e[1],e[2],-Math.atan2(r[2],r[0])+Math.PI/2,Math.round(500*Math.random()))}}),[t,e]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(p.Suspense,{fallback:null,children:c})})}var Ue=function(){var e=(0,l.w)(),t=e.camera,n=e.gl;return(0,p.useEffect)((function(){t.rotateX(-Math.PI/10),t.position.set(3,200,400),t.rotateX(-Math.PI/10)}),[t,n]),null};function He(e){var t=(0,f.L)((function(e){return e.data})),n=(0,f.L)((function(e){return e.time})),o=(0,f.L)((function(e){return e.world})),i=(0,f.L)((function(e){return e.setTime})),l=(0,f.L)((function(e){return e.minTime})),s=(0,f.L)((function(e){return e.maxTime})),c=!!t&&0!=s,u=(0,p.useState)(!1),m=u[0],d=u[1],h=(0,p.useState)(0),y=h[0],v=h[1];return(0,r.jsx)(r.Fragment,{children:c?(0,r.jsxs)("div",{style:{position:"absolute",top:"70%",zIndex:"0",marginLeft:"10%",marginRight:"10%",width:"80%",height:"5%",color:"#040720"},children:[(0,r.jsxs)("h4",{children:["Frame : ",n]}),m?(0,r.jsxs)(a.Xz,{style:{position:"absolute",bottom:"75%",zIndex:"0",marginLeft:m-220+"px",width:"500px",height:"350px",border:"4px solid mediumgray"},children:[(0,r.jsx)("axesHelper",{}),(0,r.jsx)(S,{world:o}),"(",(0,r.jsx)(r.Fragment,{children:t?t.map((function(e){var t;return(0,r.jsx)(Fe,{id:e.id,data:null!==(t=e.framePos[y])&&void 0!==t?t:null,world:o,type:e.type},e.id)})):null}),") ",(0,r.jsx)(Ue,{})]}):null,(0,r.jsxs)("div",{children:[(0,r.jsx)(Ie.ZP,{step:1,min:l,max:s,value:n,onChangeCommitted:function(e,t){f.L.getState().setPlayActive(!0),i(t),f.L.getState().setPlayActive(!1),d(!1)},onChange:function(e,t){"mousemove"==e.type?(d(e.clientX),v(t)):(d(!1),v(0))},valueLabelDisplay:"auto"}),(0,r.jsx)("div",{className:"d-flex justify-content-center",children:(0,r.jsxs)("div",{className:"d-flex smallSize justify-content-between",children:[(0,r.jsx)("button",{type:"button",className:"btn btn-dark btn-sm",onClick:function(){f.L.getState().setPlayActive(!0)},children:(0,r.jsx)(_e,{})}),(0,r.jsx)("button",{type:"button",className:"btn btn-dark btn-sm",onClick:function(){f.L.getState().setPlayActive(!1)},children:(0,r.jsx)(Ae,{})}),(0,r.jsx)("button",{type:"button",className:"btn btn-dark btn-sm",onClick:function(){f.L.getState().setPlayActive(!1),i(l)},children:(0,r.jsx)(Ve,{})})]})})]})]}):null})}var We=n(46625),qe=(0,p.forwardRef)((function(e,t){var n=(0,p.useRef)(),o=e.text.replace("Start@ID","");return(0,p.useImperativeHandle)(t,(function(){return{updatePosition:function(e,t,r){n.current.position.x=e,n.current.position.y=t,n.current.position.z=r},hideText:function(){n.current.visible=!1},showText:function(){n.current.visible=!0}}})),(0,l.x)((function(e){var t=e.camera;n.current.quaternion.copy(t.quaternion)})),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(We.x,{color:"#000000",fontSize:8,outlineWidth:"100%",outlineOpacity:0,ref:n,children:o})})}));function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Je(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ke(e,t,n){return Ke=Je()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&et(o,n.prototype),o},Ke.apply(null,arguments)}function et(e,t){return et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},et(e,t)}function tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||rt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e){return function(e){if(Array.isArray(e))return $e(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(e,t){if(e){if("string"===typeof e)return $e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$e(e,t):void 0}}function ot(e){var t=(0,p.useRef)(),n=(0,p.useRef)(),o=((0,p.useRef)(),e.id.split("_")[0]),i=e.data.type,a=(X.LP.Car,tt(ze(e.world.enumName,i),8)),s=(a[0],a[1]),c=a[2],u=a[3],m=a[4],d=a[5],h=a[6],v=a[7],g=(0,p.useMemo)((function(){switch(i){case X.LP.Cyclist:return(0,r.jsx)(ke,{id:e.id,ref:t,scale:v,positionY:d},e.id);case X.LP.Pedestrian:return(0,r.jsx)(Qe,{id:e.id,ref:t,scale:v,positionY:d},e.id);case X.LP.Car:return(0,r.jsx)(Ce,{id:e.id,ref:t,scale:v,positionY:d},e.id);default:return(0,r.jsx)(Qe,{id:e.id,ref:t,scale:v,positionY:d},e.id)}}),[e]),w=(0,p.useRef)(),x=e.data;return(0,p.useEffect)((function(){if(t.current&&x.framePos.length>0){var e=x.framePos[0];if(e.position){var r=e.position[0],o=e.position[1],i=e.position[2];t.current.updatePosition(r,o,i,h,0),n.current.updatePosition(r+u,o+m,i)}}}),[t,e]),(0,l.x)((function(e,r){var o=f.L.getState().time,i=f.L.getState().getPlayActive();if(x.startT<=o&&o<=x.endT&&x.framePos){var a=o-x.startT,l=x.framePos[a],p=l.direction;if(l.position&&t.current&&w.current&&p){t.current.showObject(),w.current.visible=!0,n.current.showText();var d=l.position[0],v=l.position[1],g=l.position[2],b=-Math.atan2(p[2],p[0])+h;t.current.updatePosition(d,v,g,b,i?r:Math.random()),n.current.updatePosition(d+u,v+m,g);var j=[d,s,g],S=[d+p[0]*c,s+2,g+p[2]*c];w.current.geometry.setFromPoints([j,S].map((function(e){return Ke(y.Vector3,nt(e))})))}}else t.current&&w.current&&n.current&&(t.current.hideObject(),w.current.visible=!1,n.current.hideText())})),(0,r.jsxs)(r.Fragment,{children:[" ",(0,r.jsxs)(p.Suspense,{fallback:null,children:[(0,r.jsx)("group",{onClick:function(){e.store.getState().selectDescription(o,!1)},children:g}),(0,r.jsx)(qe,{text:e.id,ref:n})]}),(0,r.jsxs)("line",{ref:w,children:[(0,r.jsx)("bufferGeometry",{}),(0,r.jsx)("lineBasicMaterial",{attach:"material",color:"#9c88ff",linewidth:100})]})]})}var it=n(47741);function at(){return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-film",viewBox:"0 0 16 16",children:(0,r.jsx)("path",{d:"M0 1a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V1zm4 0v6h8V1H4zm8 8H4v6h8V9zM1 1v2h2V1H1zm2 3H1v2h2V4zM1 7v2h2V7H1zm2 3H1v2h2v-2zm-2 3v2h2v-2H1zM15 1h-2v2h2V1zm-2 3v2h2V4h-2zm2 3h-2v2h2V7zm-2 3v2h2v-2h-2zm2 3h-2v2h2v-2z"})})}function lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function st(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){lt(e,t,n[t])}))}return e}function ct(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ut(e){var t=e.className,n=ct(e,["className"]),o=(0,E.EB)(),i=o((function(e){return e.showTe}));return(0,r.jsx)(it.Z,{placement:"left",overlay:"Time Edit Toggle",children:(0,r.jsx)("div",st({},n,{onClick:function(){return o.getState().setShowTe(!i)},className:"".concat(t," d-flex align-items-center justify-content-center btn ").concat(i?"btn-primary":"btn-secondary"," btn-sm "),children:(0,r.jsx)(at,{})}))})}var pt=n(11864);function mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dt(){return dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dt.apply(this,arguments)}function ft(e){var t=dt({},e);return(0,r.jsxs)("select",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){mt(e,t,n[t])}))}return e}({},t,{children:[(0,r.jsx)("option",{value:"0",children:"Pedestrian"}),(0,r.jsx)("option",{value:"1",children:"Bicycle"}),(0,r.jsx)("option",{value:"2",children:"Truck"})]}))}var ht=n(98667);function yt(e){var t=e.value,n=(0,E.EB)(),o="raw"===t.children[0].type?t.children[0].value:void 0,i="raw"===t.children[1].type?t.children[1].value:void 0;return(0,r.jsxs)("div",{className:"d-flex flex-column mx-3",children:[(0,r.jsx)(pt.w,{value:"Direction Angle",className:"mb-3 ",children:(0,r.jsx)("input",{value:o,type:"number",onChange:function(e){return n.getState().replace((function(t){t.children[0]={type:"raw",value:+e.currentTarget.value}}),t)},className:"flex-grow-1 me-2 flex-basis-0 form-control form-control-sm"})}),(0,r.jsx)(pt.w,{value:"Distance",className:"mb-3 ",children:(0,r.jsx)("input",{value:i,type:"number",onChange:function(e){return n.getState().replace((function(t){t.children[1]={type:"raw",value:+e.currentTarget.value}}),t)},className:"flex-grow-1 me-2 flex-basis-0 form-control form-control-sm"})})]})}function vt(e){var t=e.value,n=(0,E.EB)(),o="raw"===t.children[1].type?t.children[1].value:void 0,i="raw"===t.children[2].type?t.children[2].value:void 0;if("operation"!==t.children[0].type)return null;var a=function(e,r){return n.getState().replace((function(t){var n=(0,Y.by)("operation",t);"operation"===n.type&&n.children[0].children&&(n.children[0].children[e]={type:"raw",value:r})}),t)},l=t.children[0],s="raw"===l.children[0].type?l.children[0].value:void 0,c=("raw"===l.children[1].type&&l.children[1].value,"raw"===l.children[2].type?l.children[2].value:void 0);return(0,r.jsxs)("div",{className:"d-flex flex-column mx-3",children:[(0,r.jsx)(pt.w,{value:"Start Position",className:"mb-3 ",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mb-3 d-flex flex-row",children:(0,r.jsx)(ht.A,{value:null!==s&&void 0!==s?s:0,type:"number",className:"flex-grow-1 me-2 flex-basis-0 form-control form-control-sm",onChangeCapture:function(e){return a(0,e.currentTarget.valueAsNumber)}})}),(0,r.jsx)("div",{className:"mb-3 d-flex flex-row",children:(0,r.jsx)(ht.A,{value:null!==c&&void 0!==c?c:0,type:"number",className:"flex-grow-1 me-2 flex-basis-0 form-control form-control-sm",onChangeCapture:function(e){return a(2,e.currentTarget.valueAsNumber)}})})]})}),(0,r.jsx)(pt.w,{value:"Start Time",className:"mb-3 ",children:(0,r.jsx)("input",{value:o,type:"number",onChange:function(e){return n.getState().replace((function(t){t.children[1]={type:"raw",value:+e.currentTarget.value}}),t)},className:"flex-grow-1 me-2 flex-basis-0 form-control form-control-sm"})}),(0,r.jsx)(pt.w,{value:"Direction in Degree",className:"mb-3 ",children:(0,r.jsx)("input",{value:i,type:"number",onChange:function(e){return n.getState().replace((function(t){t.children[2]={type:"raw",value:+e.currentTarget.value}}),t)},className:"flex-grow-1 me-2 flex-basis-0 form-control form-control-sm"})})]})}var gt={createOb:function(e){var t=e.value,n=(0,E.EB)(),o="raw"===t.children[1].type?t.children[1].value:void 0,i="raw"===t.children[2].type?t.children[2].value:void 0,a="raw"===t.children[3].type?t.children[3].value:void 0;if("operation"!==t.children[0].type)return null;var l=function(e,r){return n.getState().replace((function(t){var n=(0,Y.by)("operation",t);"operation"===n.type&&n.children[0].children&&(n.children[0].children[e]={type:"raw",value:r})}),t)},s=t.children[0],c="raw"===s.children[0].type?s.children[0].value:void 0,u=("raw"===s.children[1].type&&s.children[1].value,"raw"===s.children[2].type?s.children[2].value:void 0);return(0,r.jsxs)("div",{className:"d-flex flex-column mx-3",children:[(0,r.jsx)(pt.w,{value:"Start Position",className:"mb-3 ",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"mb-3 d-flex flex-row",children:(0,r.jsx)(ht.A,{value:null!==c&&void 0!==c?c:0,type:"number",className:"flex-grow-1 me-2 flex-basis-0 form-control form-control-sm",onChangeCapture:function(e){return l(0,e.currentTarget.valueAsNumber)}})}),(0,r.jsx)("div",{className:"mb-3 d-flex flex-row",children:(0,r.jsx)(ht.A,{value:null!==u&&void 0!==u?u:0,type:"number",className:"flex-grow-1 me-2 flex-basis-0 form-control form-control-sm",onChangeCapture:function(e){return l(2,e.currentTarget.valueAsNumber)}})})]})}),(0,r.jsx)(pt.w,{value:"Start Time",className:"mb-3 ",children:(0,r.jsx)("input",{value:o,type:"number",onChange:function(e){return n.getState().replace((function(t){t.children[1]={type:"raw",value:+e.currentTarget.value}}),t)},className:"flex-grow-1 me-2 flex-basis-0 form-control form-control-sm"})}),(0,r.jsx)(pt.w,{value:"Object Type",className:"mb-3 ",children:(0,r.jsx)(ft,{value:i,onChange:function(e){return n.getState().replace((function(t){t.children[2]={type:"raw",value:+e.currentTarget.value}}),t)},className:"flex-grow-1 w-auto form-select form-select-sm"})}),(0,r.jsx)(pt.w,{value:"Direction in Degree",className:"mb-3 ",children:(0,r.jsx)("input",{value:a,type:"number",onChange:function(e){return n.getState().replace((function(t){t.children[3]={type:"raw",value:+e.currentTarget.value}}),t)},className:"flex-grow-1 me-2 flex-basis-0 form-control form-control-sm"})})]})},pedestrian:vt,cyclist:vt,car:vt,createFromPrimitive:function(e){var t=e.value,n=(0,E.EB)(),o="raw"===t.children[0].type?t.children[0].value:void 0,i="raw"===t.children[1].type?t.children[1].value:void 0,a="raw"===t.children[2].type?t.children[2].value:void 0;return(0,r.jsxs)("div",{className:"d-flex flex-column mx-3",children:[(0,r.jsx)(pt.w,{value:"Start Time",className:"mb-3 ",children:(0,r.jsx)("input",{value:o,type:"number",onChange:function(e){return n.getState().replace((function(t){t.children[0]={type:"raw",value:+e.currentTarget.value}}),t)},className:"flex-grow-1 me-2 flex-basis-0 form-control form-control-sm"})}),(0,r.jsx)(pt.w,{value:"Object Type",className:"mb-3 ",children:(0,r.jsx)(ft,{value:i,onChange:function(e){return n.getState().replace((function(t){t.children[1]={type:"raw",value:+e.currentTarget.value}}),t)},className:"flex-grow-1 me-2 w-auto form-select form-select-sm"})}),(0,r.jsx)(pt.w,{value:"Direction in Degree",className:"mb-3 ",children:(0,r.jsx)("input",{value:a,type:"number",onChange:function(e){return n.getState().replace((function(t){t.children[2]={type:"raw",value:+e.currentTarget.value}}),t)},className:"flex-grow-1 me-2 flex-basis-0 form-control form-control-sm"})})]})},moveRotate:yt,moveRotateAvoid:yt};function wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){wt(e,t,n[t])}))}return e}function bt(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(0,s.FP)(0,18);function jt(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(u.default,{children:[(0,r.jsx)("title",{children:"CGV | Shape Editor"}),(0,r.jsx)("meta",{name:"description",content:""}),(0,r.jsx)("meta",{name:"viewport",content:"initial-scale=1.0, width=device-width"})]}),(0,r.jsx)(E.gb,{store:(0,m.i)(c.J,[Y.Ao,Y.Ug,Y.TO,Y.au,Y.W9,Y.z$]),Viewer:Mt,operationGuiMap:gt,operations:c.J,children:(0,r.jsx)(O.M,{})})]})}var St=function(e){var t=(0,f.L)((function(e){return e.data}));return(0,r.jsx)(r.Fragment,{children:t?t.map((function(t){return(0,r.jsx)(ot,{id:t.id.replace("Start@",""),data:t,world:e.world,store:e.store},t.id)})):null})};function Mt(e){var t=e.className,l=e.children,s=bt(e,["className","children"]),c=(0,o.j)(E.op),u=(0,E.EB)(),m=(0,f.L)((function(e){return e.world})),d=((0,f.L)((function(e){return e.setWorld})),(0,f.L)((function(e){return e.resetState})),(0,p.useState)()),y=(d[0],d[1],(0,p.useState)(null)),v=y[0],g=(y[1],v&&Object.keys(v),(0,p.useState)("keine Auswahl")),w=(g[0],g[1],(0,f.L)((function(e){return e.loadingState})));(0,f.L)((function(e){return e.setLoadingState}));return(0,r.jsx)(p.Suspense,{fallback:null,children:(0,r.jsxs)("div",xt({onDragOver:function(e){return e.preventDefault()},onDrop:M.zf.bind(null,u)},s,{className:"".concat(t," position-relative"),children:[(0,r.jsxs)(a.Xz,{style:{touchAction:"none",userSelect:"none",WebkitUserSelect:"none"},events:function(e){return xt({},(0,a.U3)(e),{priority:1,filter:function(e){return P.D1.getState().controlling?[]:e.sort((function(e,t){return e.distance-t.distance}))}})},dpr:null==n.g.window?1:window.devicePixelRatio,children:[(0,r.jsxs)(c,{children:[(0,r.jsx)(xe,{}),(0,r.jsx)(p.Suspense,{fallback:null,children:(0,r.jsx)(S,{world:m})}),(0,r.jsx)(Pt,{}),(0,r.jsx)(i.c,{makeDefault:!0,far:1e4}),(0,r.jsx)(h,{})]}),(0,r.jsx)(St,{world:m,store:u})]}),w?(0,r.jsx)("div",{className:"spinner-container",children:(0,r.jsx)("div",{className:"loading-spinner"})}):null,(0,r.jsx)(He,{}),(0,r.jsxs)("div",{className:"d-flex flex-row justify-content-between position-absolute",style:{pointerEvents:"none",inset:0,left:0,right:0,top:0,bottom:0},children:[(0,r.jsxs)("div",{className:"d-flex flex-column my-3 ms-3",style:{maxWidth:200,minHeight:600},children:[(0,r.jsx)(Ye.o,{createDescriptionRequestData:function(){return{}},style:{pointerEvents:"all"},className:"mb-3",children:(0,r.jsx)("div",{className:"p-2 border-top border-1",children:(0,r.jsx)(M.kk,{})})}),(0,r.jsx)("div",{className:"flex-grow-1"}),(0,r.jsxs)("div",{style:{pointerEvents:"all"},className:"d-flex flex-row",children:[(0,r.jsx)(M.cO,{className:"me-2"}),(0,r.jsx)(M.o6,{className:"me-2"}),(0,r.jsx)(M.Sw,{className:"me-2"}),(0,r.jsx)(M.Ol,{})]})]}),(0,r.jsxs)("div",{className:"d-flex flex-column align-items-end m-3",children:[(0,r.jsx)(V.XS,{className:"bg-light border rounded shadow w-100 mb-3 overflow-hidden",style:{maxWidth:"16rem",pointerEvents:"all"}}),(0,r.jsx)("div",{className:"flex-grow-1"}),(0,r.jsxs)("div",{className:"d-flex flex-row",style:{pointerEvents:"all"},children:[(0,r.jsx)(L.c,{className:"me-2"}),(0,r.jsx)(ut,{className:"me-2"})]})]})]}),l]}))})}var Pt=function(){(0,f.L)((function(e){return e.data}));var e=(0,f.L)((function(e){return e.maxTime}));return(0,l.x)((function(t){t.clock;f.L.getState().getPlayActive()&&f.L.getState().time+1<e&&f.L.getState().incrementTime(1)})),null}}},function(e){e.O(0,[429,770,523,306,2,774,888,179],(function(){return t=45301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);